function sE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var v1={exports:{}},Fu={},w1={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=Symbol.for("react.element"),oE=Symbol.for("react.portal"),lE=Symbol.for("react.fragment"),aE=Symbol.for("react.strict_mode"),cE=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),fE=Symbol.for("react.forward_ref"),hE=Symbol.for("react.suspense"),pE=Symbol.for("react.memo"),mE=Symbol.for("react.lazy"),qg=Symbol.iterator;function gE(t){return t===null||typeof t!="object"?null:(t=qg&&t[qg]||t["@@iterator"],typeof t=="function"?t:null)}var x1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b1=Object.assign,k1={};function Gi(t,e,n){this.props=t,this.context=e,this.refs=k1,this.updater=n||x1}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function S1(){}S1.prototype=Gi.prototype;function Kp(t,e,n){this.props=t,this.context=e,this.refs=k1,this.updater=n||x1}var Jp=Kp.prototype=new S1;Jp.constructor=Kp;b1(Jp,Gi.prototype);Jp.isPureReactComponent=!0;var Kg=Array.isArray,E1=Object.prototype.hasOwnProperty,Gp={current:null},C1={key:!0,ref:!0,__self:!0,__source:!0};function N1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)E1.call(e,r)&&!C1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ll,type:t,key:i,ref:o,props:s,_owner:Gp.current}}function yE(t,e){return{$$typeof:Ll,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ll}function vE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jg=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vE(""+t.key):e.toString(36)}function Va(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ll:case oE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Id(o,0):r,Kg(s)?(n="",t!=null&&(n=t.replace(Jg,"$&/")+"/"),Va(s,e,n,"",function(c){return c})):s!=null&&(Qp(s)&&(s=yE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Jg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Kg(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Id(i,l);o+=Va(i,e,n,a,s)}else if(a=gE(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Id(i,l++),o+=Va(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ca(t,e,n){if(t==null)return t;var r=[],s=0;return Va(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dt={current:null},Wa={transition:null},xE={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:Gp};function T1(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:ca,forEach:function(t,e,n){ca(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ca(t,function(){e++}),e},toArray:function(t){return ca(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Gi;K.Fragment=lE;K.Profiler=cE;K.PureComponent=Kp;K.StrictMode=aE;K.Suspense=hE;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xE;K.act=T1;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)E1.call(e,a)&&!C1.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ll,type:t.type,key:s,ref:i,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:dE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uE,_context:t},t.Consumer=t};K.createElement=N1;K.createFactory=function(t){var e=N1.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:fE,render:t}};K.isValidElement=Qp;K.lazy=function(t){return{$$typeof:mE,_payload:{_status:-1,_result:t},_init:wE}};K.memo=function(t,e){return{$$typeof:pE,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Wa.transition;Wa.transition={};try{t()}finally{Wa.transition=e}};K.unstable_act=T1;K.useCallback=function(t,e){return dt.current.useCallback(t,e)};K.useContext=function(t){return dt.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return dt.current.useDeferredValue(t)};K.useEffect=function(t,e){return dt.current.useEffect(t,e)};K.useId=function(){return dt.current.useId()};K.useImperativeHandle=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return dt.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return dt.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return dt.current.useMemo(t,e)};K.useReducer=function(t,e,n){return dt.current.useReducer(t,e,n)};K.useRef=function(t){return dt.current.useRef(t)};K.useState=function(t){return dt.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return dt.current.useTransition()};K.version="18.3.1";w1.exports=K;var x=w1.exports;const T=y1(x),ji=sE({__proto__:null,default:T},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE=x,kE=Symbol.for("react.element"),SE=Symbol.for("react.fragment"),EE=Object.prototype.hasOwnProperty,CE=bE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NE={key:!0,ref:!0,__self:!0,__source:!0};function O1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)EE.call(e,r)&&!NE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:kE,type:t,key:i,ref:o,props:s,_owner:CE.current}}Fu.Fragment=SE;Fu.jsx=O1;Fu.jsxs=O1;v1.exports=Fu;var p=v1.exports,_1={exports:{}},Dt={},M1={exports:{}},A1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,$){var F=P.length;P.push($);e:for(;0<F;){var Y=F-1>>>1,J=P[Y];if(0<s(J,$))P[Y]=$,P[F]=J,F=Y;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],F=P.pop();if(F!==$){P[0]=F;e:for(var Y=0,J=P.length,ht=J>>>1;Y<ht;){var de=2*(Y+1)-1,ts=P[de],ve=de+1,Dn=P[ve];if(0>s(ts,F))ve<J&&0>s(Dn,ts)?(P[Y]=Dn,P[ve]=F,Y=ve):(P[Y]=ts,P[de]=F,Y=de);else if(ve<J&&0>s(Dn,F))P[Y]=Dn,P[ve]=F,Y=ve;else break e}}return $}function s(P,$){var F=P.sortIndex-$.sortIndex;return F!==0?F:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,h=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=P)r(c),$.sortIndex=$.expirationTime,e(a,$);else break;$=n(c)}}function k(P){if(g=!1,b(P),!m)if(n(a)!==null)m=!0,rt(E);else{var $=n(c);$!==null&&Z(k,$.startTime-P)}}function E(P,$){m=!1,g&&(g=!1,y(N),N=-1),h=!0;var F=f;try{for(b($),d=n(a);d!==null&&(!(d.expirationTime>$)||P&&!z());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var J=Y(d.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(a)&&r(a),b($)}else r(a);d=n(a)}if(d!==null)var ht=!0;else{var de=n(c);de!==null&&Z(k,de.startTime-$),ht=!1}return ht}finally{d=null,f=F,h=!1}}var S=!1,C=null,N=-1,M=5,R=-1;function z(){return!(t.unstable_now()-R<M)}function ee(){if(C!==null){var P=t.unstable_now();R=P;var $=!0;try{$=C(!0,P)}finally{$?oe():(S=!1,C=null)}}else S=!1}var oe;if(typeof w=="function")oe=function(){w(ee)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ke=xe.port2;xe.port1.onmessage=ee,oe=function(){Ke.postMessage(null)}}else oe=function(){v(ee,0)};function rt(P){C=P,S||(S=!0,oe())}function Z(P,$){N=v(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,rt(E))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var F=f;f=$;try{return P()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=f;f=P;try{return $()}finally{f=F}},t.unstable_scheduleCallback=function(P,$,F){var Y=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,P){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=F+J,P={id:u++,callback:$,priorityLevel:P,startTime:F,expirationTime:J,sortIndex:-1},F>Y?(P.sortIndex=F,e(c,P),n(a)===null&&P===n(c)&&(g?(y(N),N=-1):g=!0,Z(k,F-Y))):(P.sortIndex=J,e(a,P),m||h||(m=!0,rt(E))),P},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(P){var $=f;return function(){var F=f;f=$;try{return P.apply(this,arguments)}finally{f=F}}}})(A1);M1.exports=A1;var TE=M1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE=x,Rt=TE;function _(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P1=new Set,sl={};function $s(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(sl[t]=e,t=0;t<e.length;t++)P1.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,_E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Qg={};function ME(t){return nh.call(Qg,t)?!0:nh.call(Gg,t)?!1:_E.test(t)?Qg[t]=!0:(Gg[t]=!0,!1)}function AE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PE(t,e,n,r){if(e===null||typeof e>"u"||AE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yp=/[\-:]([a-z])/g;function Xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);Ve[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);Ve[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yp,Xp);Ve[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,r){var s=Ve.hasOwnProperty(e)?Ve[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PE(e,n,s,r)&&(n=null),r||s===null?ME(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=OE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),li=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),j1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),D1=Symbol.for("react.offscreen"),Yg=Symbol.iterator;function ho(t){return t===null||typeof t!="object"?null:(t=Yg&&t[Yg]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,Ld;function To(t){if(Ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ld=e&&e[1]||""}return`
`+Ld+t}var $d=!1;function Fd(t,e){if(!t||$d)return"";$d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{$d=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function jE(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=Fd(t.type,!1),t;case 11:return t=Fd(t.type.render,!1),t;case 1:return t=Fd(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case li:return"Portal";case rh:return"Profiler";case em:return"StrictMode";case sh:return"Suspense";case ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R1:return(t.displayName||"Context")+".Consumer";case j1:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function RE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DE(t){var e=I1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function da(t){t._valueTracker||(t._valueTracker=DE(t))}function L1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $1(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function ah(t,e){$1(t,e);var n=Wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&ch(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ch(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oo=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_(92));if(Oo(n)){if(1<n.length)throw Error(_(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function F1(t,e){var n=Wr(e.value),r=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function t0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fa,B1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IE=["Webkit","ms","Moz","O"];Object.keys(Lo).forEach(function(t){IE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lo[e]=Lo[t]})});function U1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lo.hasOwnProperty(t)&&Lo[t]?(""+e).trim():e+"px"}function H1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var LE=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(LE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mh=null,ki=null,Si=null;function n0(t){if(t=zl(t)){if(typeof mh!="function")throw Error(_(280));var e=t.stateNode;e&&(e=Vu(e),mh(t.stateNode,t.type,e))}}function V1(t){ki?Si?Si.push(t):Si=[t]:ki=t}function W1(){if(ki){var t=ki,e=Si;if(Si=ki=null,n0(t),e)for(t=0;t<e.length;t++)n0(e[t])}}function q1(t,e){return t(e)}function K1(){}var zd=!1;function J1(t,e,n){if(zd)return t(e,n);zd=!0;try{return q1(t,e,n)}finally{zd=!1,(ki!==null||Si!==null)&&(K1(),W1())}}function ol(t,e){var n=t.stateNode;if(n===null)return null;var r=Vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_(231,e,typeof n));return n}var gh=!1;if(Gn)try{var po={};Object.defineProperty(po,"passive",{get:function(){gh=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{gh=!1}function $E(t,e,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var $o=!1,pc=null,mc=!1,yh=null,FE={onError:function(t){$o=!0,pc=t}};function zE(t,e,n,r,s,i,o,l,a){$o=!1,pc=null,$E.apply(FE,arguments)}function BE(t,e,n,r,s,i,o,l,a){if(zE.apply(this,arguments),$o){if($o){var c=pc;$o=!1,pc=null}else throw Error(_(198));mc||(mc=!0,yh=c)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r0(t){if(Fs(t)!==t)throw Error(_(188))}function UE(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(_(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return r0(s),t;if(i===r)return r0(s),e;i=i.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?t:e}function Q1(t){return t=UE(t),t!==null?Y1(t):null}function Y1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Y1(t);if(e!==null)return e;t=t.sibling}return null}var X1=Rt.unstable_scheduleCallback,s0=Rt.unstable_cancelCallback,HE=Rt.unstable_shouldYield,VE=Rt.unstable_requestPaint,we=Rt.unstable_now,WE=Rt.unstable_getCurrentPriorityLevel,sm=Rt.unstable_ImmediatePriority,Z1=Rt.unstable_UserBlockingPriority,gc=Rt.unstable_NormalPriority,qE=Rt.unstable_LowPriority,ew=Rt.unstable_IdlePriority,zu=null,An=null;function KE(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(zu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:QE,JE=Math.log,GE=Math.LN2;function QE(t){return t>>>=0,t===0?32:31-(JE(t)/GE|0)|0}var ha=64,pa=4194304;function _o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=_o(l):(i&=o,i!==0&&(r=_o(i)))}else o=n&~s,o!==0?r=_o(o):i!==0&&(r=_o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),s=1<<n,r|=t[n],e&=~s;return r}function YE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=YE(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tw(){var t=ha;return ha<<=1,!(ha&4194240)&&(ha=64),t}function Bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function ZE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var X=0;function nw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rw,om,sw,iw,ow,wh=!1,ma=[],jr=null,Rr=null,Dr=null,ll=new Map,al=new Map,wr=[],eC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i0(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(e.pointerId)}}function mo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zl(e),e!==null&&om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tC(t,e,n,r,s){switch(e){case"focusin":return jr=mo(jr,t,e,n,r,s),!0;case"dragenter":return Rr=mo(Rr,t,e,n,r,s),!0;case"mouseover":return Dr=mo(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ll.set(i,mo(ll.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,al.set(i,mo(al.get(i)||null,t,e,n,r,s)),!0}return!1}function lw(t){var e=ds(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=G1(n),e!==null){t.blockedOn=e,ow(t.priority,function(){sw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return e=zl(n),e!==null&&om(e),t.blockedOn=n,!1;e.shift()}return!0}function o0(t,e,n){qa(t)&&n.delete(e)}function nC(){wh=!1,jr!==null&&qa(jr)&&(jr=null),Rr!==null&&qa(Rr)&&(Rr=null),Dr!==null&&qa(Dr)&&(Dr=null),ll.forEach(o0),al.forEach(o0)}function go(t,e){t.blockedOn===e&&(t.blockedOn=null,wh||(wh=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,nC)))}function cl(t){function e(s){return go(s,t)}if(0<ma.length){go(ma[0],t);for(var n=1;n<ma.length;n++){var r=ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&go(jr,t),Rr!==null&&go(Rr,t),Dr!==null&&go(Dr,t),ll.forEach(e),al.forEach(e),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)lw(n),n.blockedOn===null&&wr.shift()}var Ei=nr.ReactCurrentBatchConfig,vc=!0;function rC(t,e,n,r){var s=X,i=Ei.transition;Ei.transition=null;try{X=1,lm(t,e,n,r)}finally{X=s,Ei.transition=i}}function sC(t,e,n,r){var s=X,i=Ei.transition;Ei.transition=null;try{X=4,lm(t,e,n,r)}finally{X=s,Ei.transition=i}}function lm(t,e,n,r){if(vc){var s=xh(t,e,n,r);if(s===null)Yd(t,e,r,wc,n),i0(t,r);else if(tC(s,t,e,n,r))r.stopPropagation();else if(i0(t,r),e&4&&-1<eC.indexOf(t)){for(;s!==null;){var i=zl(s);if(i!==null&&rw(i),i=xh(t,e,n,r),i===null&&Yd(t,e,r,wc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yd(t,e,r,null,n)}}var wc=null;function xh(t,e,n,r){if(wc=null,t=rm(r),t=ds(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wc=t,null}function aw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WE()){case sm:return 1;case Z1:return 4;case gc:case qE:return 16;case ew:return 536870912;default:return 16}default:return 16}}var Nr=null,am=null,Ka=null;function cw(){if(Ka)return Ka;var t,e=am,n=e.length,r,s="value"in Nr?Nr.value:Nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ka=s.slice(t,1<r?1-r:void 0)}function Ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function l0(){return!1}function It(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ga:l0,this.isPropagationStopped=l0,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=It(Qi),Fl=me({},Qi,{view:0,detail:0}),iC=It(Fl),Ud,Hd,yo,Bu=me({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(Ud=t.screenX-yo.screenX,Hd=t.screenY-yo.screenY):Hd=Ud=0,yo=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),a0=It(Bu),oC=me({},Bu,{dataTransfer:0}),lC=It(oC),aC=me({},Fl,{relatedTarget:0}),Vd=It(aC),cC=me({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=It(cC),dC=me({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fC=It(dC),hC=me({},Qi,{data:0}),c0=It(hC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gC[t])?!!e[t]:!1}function um(){return yC}var vC=me({},Fl,{key:function(t){if(t.key){var e=pC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wC=It(vC),xC=me({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u0=It(xC),bC=me({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),kC=It(bC),SC=me({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),EC=It(SC),CC=me({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NC=It(CC),TC=[9,13,27,32],dm=Gn&&"CompositionEvent"in window,Fo=null;Gn&&"documentMode"in document&&(Fo=document.documentMode);var OC=Gn&&"TextEvent"in window&&!Fo,uw=Gn&&(!dm||Fo&&8<Fo&&11>=Fo),d0=" ",f0=!1;function dw(t,e){switch(t){case"keyup":return TC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function _C(t,e){switch(t){case"compositionend":return fw(e);case"keypress":return e.which!==32?null:(f0=!0,d0);case"textInput":return t=e.data,t===d0&&f0?null:t;default:return null}}function MC(t,e){if(ci)return t==="compositionend"||!dm&&dw(t,e)?(t=cw(),Ka=am=Nr=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uw&&e.locale!=="ko"?null:e.data;default:return null}}var AC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AC[t.type]:e==="textarea"}function hw(t,e,n,r){V1(r),e=xc(e,"onChange"),0<e.length&&(n=new cm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,ul=null;function PC(t){Ew(t,0)}function Uu(t){var e=fi(t);if(L1(e))return t}function jC(t,e){if(t==="change")return e}var pw=!1;if(Gn){var Wd;if(Gn){var qd="oninput"in document;if(!qd){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),qd=typeof p0.oninput=="function"}Wd=qd}else Wd=!1;pw=Wd&&(!document.documentMode||9<document.documentMode)}function m0(){zo&&(zo.detachEvent("onpropertychange",mw),ul=zo=null)}function mw(t){if(t.propertyName==="value"&&Uu(ul)){var e=[];hw(e,ul,t,rm(t)),J1(PC,e)}}function RC(t,e,n){t==="focusin"?(m0(),zo=e,ul=n,zo.attachEvent("onpropertychange",mw)):t==="focusout"&&m0()}function DC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(ul)}function IC(t,e){if(t==="click")return Uu(e)}function LC(t,e){if(t==="input"||t==="change")return Uu(e)}function $C(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:$C;function dl(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!nh.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function g0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y0(t,e){var n=g0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g0(n)}}function gw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yw(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FC(t){var e=yw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gw(n.ownerDocument.documentElement,n)){if(r!==null&&fm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=y0(n,i);var o=y0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zC=Gn&&"documentMode"in document&&11>=document.documentMode,ui=null,bh=null,Bo=null,kh=!1;function v0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kh||ui==null||ui!==hc(r)||(r=ui,"selectionStart"in r&&fm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bo&&dl(Bo,r)||(Bo=r,r=xc(bh,"onSelect"),0<r.length&&(e=new cm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Kd={},vw={};Gn&&(vw=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Hu(t){if(Kd[t])return Kd[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vw)return Kd[t]=e[n];return t}var ww=Hu("animationend"),xw=Hu("animationiteration"),bw=Hu("animationstart"),kw=Hu("transitionend"),Sw=new Map,w0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){Sw.set(t,e),$s(e,[t])}for(var Jd=0;Jd<w0.length;Jd++){var Gd=w0[Jd],BC=Gd.toLowerCase(),UC=Gd[0].toUpperCase()+Gd.slice(1);Jr(BC,"on"+UC)}Jr(ww,"onAnimationEnd");Jr(xw,"onAnimationIteration");Jr(bw,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(kw,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mo));function x0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BE(r,e,void 0,t),t.currentTarget=null}function Ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;x0(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;x0(s,l,c),i=a}}}if(mc)throw t=yh,mc=!1,yh=null,t}function le(t,e){var n=e[Th];n===void 0&&(n=e[Th]=new Set);var r=t+"__bubble";n.has(r)||(Cw(e,t,2,!1),n.add(r))}function Qd(t,e,n){var r=0;e&&(r|=4),Cw(n,t,r,e)}var va="_reactListening"+Math.random().toString(36).slice(2);function fl(t){if(!t[va]){t[va]=!0,P1.forEach(function(n){n!=="selectionchange"&&(HC.has(n)||Qd(n,!1,t),Qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[va]||(e[va]=!0,Qd("selectionchange",!1,e))}}function Cw(t,e,n,r){switch(aw(e)){case 1:var s=rC;break;case 4:s=sC;break;default:s=lm}n=s.bind(null,e,n,t),s=void 0,!gh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ds(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}J1(function(){var c=i,u=rm(n),d=[];e:{var f=Sw.get(t);if(f!==void 0){var h=cm,m=t;switch(t){case"keypress":if(Ja(n)===0)break e;case"keydown":case"keyup":h=wC;break;case"focusin":m="focus",h=Vd;break;case"focusout":m="blur",h=Vd;break;case"beforeblur":case"afterblur":h=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=lC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=kC;break;case ww:case xw:case bw:h=uC;break;case kw:h=EC;break;case"scroll":h=iC;break;case"wheel":h=NC;break;case"copy":case"cut":case"paste":h=fC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=u0}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,y!==null&&(k=ol(w,y),k!=null&&g.push(hl(w,k,b)))),v)break;w=w.return}0<g.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==ph&&(m=n.relatedTarget||n.fromElement)&&(ds(m)||m[Qn]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?ds(m):null,m!==null&&(v=Fs(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=a0,k="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=u0,k="onPointerLeave",y="onPointerEnter",w="pointer"),v=h==null?f:fi(h),b=m==null?f:fi(m),f=new g(k,w+"leave",h,n,u),f.target=v,f.relatedTarget=b,k=null,ds(u)===c&&(g=new g(y,w+"enter",m,n,u),g.target=b,g.relatedTarget=v,k=g),v=k,h&&m)t:{for(g=h,y=m,w=0,b=g;b;b=Ys(b))w++;for(b=0,k=y;k;k=Ys(k))b++;for(;0<w-b;)g=Ys(g),w--;for(;0<b-w;)y=Ys(y),b--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ys(g),y=Ys(y)}g=null}else g=null;h!==null&&b0(d,f,h,g,!1),m!==null&&v!==null&&b0(d,v,m,g,!0)}}e:{if(f=c?fi(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=jC;else if(h0(f))if(pw)E=LC;else{E=DC;var S=RC}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=IC);if(E&&(E=E(t,c))){hw(d,E,n,u);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&ch(f,"number",f.value)}switch(S=c?fi(c):window,t){case"focusin":(h0(S)||S.contentEditable==="true")&&(ui=S,bh=c,Bo=null);break;case"focusout":Bo=bh=ui=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,v0(d,n,u);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":v0(d,n,u)}var C;if(dm)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ci?dw(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(uw&&n.locale!=="ko"&&(ci||N!=="onCompositionStart"?N==="onCompositionEnd"&&ci&&(C=cw()):(Nr=u,am="value"in Nr?Nr.value:Nr.textContent,ci=!0)),S=xc(c,N),0<S.length&&(N=new c0(N,t,null,n,u),d.push({event:N,listeners:S}),C?N.data=C:(C=fw(n),C!==null&&(N.data=C)))),(C=OC?_C(t,n):MC(t,n))&&(c=xc(c,"onBeforeInput"),0<c.length&&(u=new c0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}Ew(d,e)})}function hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ol(t,n),i!=null&&r.unshift(hl(t,i,s)),i=ol(t,e),i!=null&&r.push(hl(t,i,s))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=ol(n,i),a!=null&&o.unshift(hl(n,a,l))):s||(a=ol(n,i),a!=null&&o.push(hl(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VC=/\r\n?/g,WC=/\u0000|\uFFFD/g;function k0(t){return(typeof t=="string"?t:""+t).replace(VC,`
`).replace(WC,"")}function wa(t,e,n){if(e=k0(e),k0(t)!==e&&n)throw Error(_(425))}function bc(){}var Sh=null,Eh=null;function Ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nh=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(t){return S0.resolve(null).then(t).catch(JC)}:Nh;function JC(t){setTimeout(function(){throw t})}function Xd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);cl(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),_n="__reactFiber$"+Yi,pl="__reactProps$"+Yi,Qn="__reactContainer$"+Yi,Th="__reactEvents$"+Yi,GC="__reactListeners$"+Yi,QC="__reactHandles$"+Yi;function ds(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E0(t);t!==null;){if(n=t[_n])return n;t=E0(t)}return e}t=n,n=t.parentNode}return null}function zl(t){return t=t[_n]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_(33))}function Vu(t){return t[pl]||null}var Oh=[],hi=-1;function Gr(t){return{current:t}}function ae(t){0>hi||(t.current=Oh[hi],Oh[hi]=null,hi--)}function ie(t,e){hi++,Oh[hi]=t.current,t.current=e}var qr={},tt=Gr(qr),wt=Gr(!1),_s=qr;function Di(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function kc(){ae(wt),ae(tt)}function C0(t,e,n){if(tt.current!==qr)throw Error(_(168));ie(tt,e),ie(wt,n)}function Nw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_(108,RE(t)||"Unknown",s));return me({},n,r)}function Sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,_s=tt.current,ie(tt,t),ie(wt,wt.current),!0}function N0(t,e,n){var r=t.stateNode;if(!r)throw Error(_(169));n?(t=Nw(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,ae(wt),ae(tt),ie(tt,t)):ae(wt),ie(wt,n)}var Bn=null,Wu=!1,Zd=!1;function Tw(t){Bn===null?Bn=[t]:Bn.push(t)}function YC(t){Wu=!0,Tw(t)}function Qr(){if(!Zd&&Bn!==null){Zd=!0;var t=0,e=X;try{var n=Bn;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,Wu=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),X1(sm,Qr),s}finally{X=e,Zd=!1}}return null}var pi=[],mi=0,Ec=null,Cc=0,Wt=[],qt=0,Ms=null,Hn=1,Vn="";function rs(t,e){pi[mi++]=Cc,pi[mi++]=Ec,Ec=t,Cc=e}function Ow(t,e,n){Wt[qt++]=Hn,Wt[qt++]=Vn,Wt[qt++]=Ms,Ms=t;var r=Hn;t=Vn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-pn(e)+s|n<<s|r,Vn=i+t}else Hn=1<<i|n<<s|r,Vn=t}function hm(t){t.return!==null&&(rs(t,1),Ow(t,1,0))}function pm(t){for(;t===Ec;)Ec=pi[--mi],pi[mi]=null,Cc=pi[--mi],pi[mi]=null;for(;t===Ms;)Ms=Wt[--qt],Wt[qt]=null,Vn=Wt[--qt],Wt[qt]=null,Hn=Wt[--qt],Wt[qt]=null}var jt=null,At=null,ce=!1,dn=null;function _w(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,At=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:Hn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,At=null,!0):!1;default:return!1}}function _h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mh(t){if(ce){var e=At;if(e){var n=e;if(!T0(t,e)){if(_h(t))throw Error(_(418));e=Ir(n.nextSibling);var r=jt;e&&T0(t,e)?_w(r,n):(t.flags=t.flags&-4097|2,ce=!1,jt=t)}}else{if(_h(t))throw Error(_(418));t.flags=t.flags&-4097|2,ce=!1,jt=t}}}function O0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function xa(t){if(t!==jt)return!1;if(!ce)return O0(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ch(t.type,t.memoizedProps)),e&&(e=At)){if(_h(t))throw Mw(),Error(_(418));for(;e;)_w(t,e),e=Ir(e.nextSibling)}if(O0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=jt?Ir(t.stateNode.nextSibling):null;return!0}function Mw(){for(var t=At;t;)t=Ir(t.nextSibling)}function Ii(){At=jt=null,ce=!1}function mm(t){dn===null?dn=[t]:dn.push(t)}var XC=nr.ReactCurrentBatchConfig;function vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,t))}return t}function ba(t,e){throw t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function Aw(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=zr(y,w),y.index=0,y.sibling=null,y}function i(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,w,b,k){return w===null||w.tag!==6?(w=lf(b,y.mode,k),w.return=y,w):(w=s(w,b),w.return=y,w)}function a(y,w,b,k){var E=b.type;return E===ai?u(y,w,b.props.children,k,b.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fr&&_0(E)===w.type)?(k=s(w,b.props),k.ref=vo(y,w,b),k.return=y,k):(k=tc(b.type,b.key,b.props,null,y.mode,k),k.ref=vo(y,w,b),k.return=y,k)}function c(y,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=af(b,y.mode,k),w.return=y,w):(w=s(w,b.children||[]),w.return=y,w)}function u(y,w,b,k,E){return w===null||w.tag!==7?(w=xs(b,y.mode,k,E),w.return=y,w):(w=s(w,b),w.return=y,w)}function d(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=lf(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ua:return b=tc(w.type,w.key,w.props,null,y.mode,b),b.ref=vo(y,null,w),b.return=y,b;case li:return w=af(w,y.mode,b),w.return=y,w;case fr:var k=w._init;return d(y,k(w._payload),b)}if(Oo(w)||ho(w))return w=xs(w,y.mode,b,null),w.return=y,w;ba(y,w)}return null}function f(y,w,b,k){var E=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:l(y,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ua:return b.key===E?a(y,w,b,k):null;case li:return b.key===E?c(y,w,b,k):null;case fr:return E=b._init,f(y,w,E(b._payload),k)}if(Oo(b)||ho(b))return E!==null?null:u(y,w,b,k,null);ba(y,b)}return null}function h(y,w,b,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(b)||null,l(w,y,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ua:return y=y.get(k.key===null?b:k.key)||null,a(w,y,k,E);case li:return y=y.get(k.key===null?b:k.key)||null,c(w,y,k,E);case fr:var S=k._init;return h(y,w,b,S(k._payload),E)}if(Oo(k)||ho(k))return y=y.get(b)||null,u(w,y,k,E,null);ba(w,k)}return null}function m(y,w,b,k){for(var E=null,S=null,C=w,N=w=0,M=null;C!==null&&N<b.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var R=f(y,C,b[N],k);if(R===null){C===null&&(C=M);break}t&&C&&R.alternate===null&&e(y,C),w=i(R,w,N),S===null?E=R:S.sibling=R,S=R,C=M}if(N===b.length)return n(y,C),ce&&rs(y,N),E;if(C===null){for(;N<b.length;N++)C=d(y,b[N],k),C!==null&&(w=i(C,w,N),S===null?E=C:S.sibling=C,S=C);return ce&&rs(y,N),E}for(C=r(y,C);N<b.length;N++)M=h(C,y,N,b[N],k),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),w=i(M,w,N),S===null?E=M:S.sibling=M,S=M);return t&&C.forEach(function(z){return e(y,z)}),ce&&rs(y,N),E}function g(y,w,b,k){var E=ho(b);if(typeof E!="function")throw Error(_(150));if(b=E.call(b),b==null)throw Error(_(151));for(var S=E=null,C=w,N=w=0,M=null,R=b.next();C!==null&&!R.done;N++,R=b.next()){C.index>N?(M=C,C=null):M=C.sibling;var z=f(y,C,R.value,k);if(z===null){C===null&&(C=M);break}t&&C&&z.alternate===null&&e(y,C),w=i(z,w,N),S===null?E=z:S.sibling=z,S=z,C=M}if(R.done)return n(y,C),ce&&rs(y,N),E;if(C===null){for(;!R.done;N++,R=b.next())R=d(y,R.value,k),R!==null&&(w=i(R,w,N),S===null?E=R:S.sibling=R,S=R);return ce&&rs(y,N),E}for(C=r(y,C);!R.done;N++,R=b.next())R=h(C,y,N,R.value,k),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?N:R.key),w=i(R,w,N),S===null?E=R:S.sibling=R,S=R);return t&&C.forEach(function(ee){return e(y,ee)}),ce&&rs(y,N),E}function v(y,w,b,k){if(typeof b=="object"&&b!==null&&b.type===ai&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ua:e:{for(var E=b.key,S=w;S!==null;){if(S.key===E){if(E=b.type,E===ai){if(S.tag===7){n(y,S.sibling),w=s(S,b.props.children),w.return=y,y=w;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fr&&_0(E)===S.type){n(y,S.sibling),w=s(S,b.props),w.ref=vo(y,S,b),w.return=y,y=w;break e}n(y,S);break}else e(y,S);S=S.sibling}b.type===ai?(w=xs(b.props.children,y.mode,k,b.key),w.return=y,y=w):(k=tc(b.type,b.key,b.props,null,y.mode,k),k.ref=vo(y,w,b),k.return=y,y=k)}return o(y);case li:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=s(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=af(b,y.mode,k),w.return=y,y=w}return o(y);case fr:return S=b._init,v(y,w,S(b._payload),k)}if(Oo(b))return m(y,w,b,k);if(ho(b))return g(y,w,b,k);ba(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,b),w.return=y,y=w):(n(y,w),w=lf(b,y.mode,k),w.return=y,y=w),o(y)):n(y,w)}return v}var Li=Aw(!0),Pw=Aw(!1),Nc=Gr(null),Tc=null,gi=null,gm=null;function ym(){gm=gi=Tc=null}function vm(t){var e=Nc.current;ae(Nc),t._currentValue=e}function Ah(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ci(t,e){Tc=t,gm=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(gm!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(Tc===null)throw Error(_(308));gi=t,Tc.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var fs=null;function wm(t){fs===null?fs=[t]:fs.push(t)}function jw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Yn(t,r)}function Yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hr=!1;function xm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Yn(t,n)}return s=r.interleaved,s===null?(e.next=e,wm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Yn(t,n)}function Ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}function M0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var s=t.updateQueue;hr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,u=c=a=null,l=i;do{var f=l.lane,h=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,g=l;switch(f=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=me({},d,f);break e;case 2:hr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=h,a=d):u=u.next=h,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(a=d),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=d}}function A0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Bl={},Pn=Gr(Bl),ml=Gr(Bl),gl=Gr(Bl);function hs(t){if(t===Bl)throw Error(_(174));return t}function bm(t,e){switch(ie(gl,e),ie(ml,t),ie(Pn,Bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}ae(Pn),ie(Pn,e)}function $i(){ae(Pn),ae(ml),ae(gl)}function Dw(t){hs(gl.current);var e=hs(Pn.current),n=dh(e,t.type);e!==n&&(ie(ml,t),ie(Pn,n))}function km(t){ml.current===t&&(ae(Pn),ae(ml))}var he=Gr(0);function _c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function Sm(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var Qa=nr.ReactCurrentDispatcher,tf=nr.ReactCurrentBatchConfig,As=0,pe=null,Ee=null,Me=null,Mc=!1,Uo=!1,yl=0,ZC=0;function Je(){throw Error(_(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Cm(t,e,n,r,s,i){if(As=i,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qa.current=t===null||t.memoizedState===null?rN:sN,t=n(r,s),Uo){i=0;do{if(Uo=!1,yl=0,25<=i)throw Error(_(301));i+=1,Me=Ee=null,e.updateQueue=null,Qa.current=iN,t=n(r,s)}while(Uo)}if(Qa.current=Ac,e=Ee!==null&&Ee.next!==null,As=0,Me=Ee=pe=null,Mc=!1,e)throw Error(_(300));return t}function Nm(){var t=yl!==0;return yl=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?pe.memoizedState=Me=t:Me=Me.next=t,Me}function en(){if(Ee===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Me===null?pe.memoizedState:Me.next;if(e!==null)Me=e,Ee=t;else{if(t===null)throw Error(_(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Me===null?pe.memoizedState=Me=t:Me=Me.next=t}return Me}function vl(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=en(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=Ee,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var u=c.lane;if((As&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,pe.lanes|=u,Ps|=u}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,yn(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pe.lanes|=i,Ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=en(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yn(i,e.memoizedState)||(vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Iw(){}function Lw(t,e){var n=pe,r=en(),s=e(),i=!yn(r.memoizedState,s);if(i&&(r.memoizedState=s,vt=!0),r=r.queue,Tm(zw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,wl(9,Fw.bind(null,n,r,s,e),void 0,null),je===null)throw Error(_(349));As&30||$w(n,e,s)}return s}function $w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fw(t,e,n,r){e.value=n,e.getSnapshot=r,Bw(e)&&Uw(t)}function zw(t,e,n){return n(function(){Bw(e)&&Uw(t)})}function Bw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function Uw(t){var e=Yn(t,1);e!==null&&mn(e,t,1,-1)}function P0(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:t},e.queue=t,t=t.dispatch=nN.bind(null,pe,t),[e.memoizedState,t]}function wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hw(){return en().memoizedState}function Ya(t,e,n,r){var s=En();pe.flags|=t,s.memoizedState=wl(1|e,n,void 0,r===void 0?null:r)}function qu(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(Ee!==null){var o=Ee.memoizedState;if(i=o.destroy,r!==null&&Em(r,o.deps)){s.memoizedState=wl(e,n,i,r);return}}pe.flags|=t,s.memoizedState=wl(1|e,n,i,r)}function j0(t,e){return Ya(8390656,8,t,e)}function Tm(t,e){return qu(2048,8,t,e)}function Vw(t,e){return qu(4,2,t,e)}function Ww(t,e){return qu(4,4,t,e)}function qw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kw(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,qw.bind(null,e,t),n)}function Om(){}function Jw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Em(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Em(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qw(t,e,n){return As&21?(yn(n,e)||(n=tw(),pe.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=n)}function eN(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=tf.transition;tf.transition={};try{t(!1),e()}finally{X=n,tf.transition=r}}function Yw(){return en().memoizedState}function tN(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xw(t))Zw(e,n);else if(n=jw(t,e,n,r),n!==null){var s=ot();mn(n,t,r,s),ex(n,e,r)}}function nN(t,e,n){var r=Fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xw(t))Zw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,yn(l,o)){var a=e.interleaved;a===null?(s.next=s,wm(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=jw(t,e,s,r),n!==null&&(s=ot(),mn(n,t,r,s),ex(n,e,r))}}function Xw(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function Zw(t,e){Uo=Mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ex(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}var Ac={readContext:Zt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},rN={readContext:Zt,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:j0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ya(4194308,4,qw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ya(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tN.bind(null,pe,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:P0,useDebugValue:Om,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=P0(!1),e=t[0];return t=eN.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pe,s=En();if(ce){if(n===void 0)throw Error(_(407));n=n()}else{if(n=e(),je===null)throw Error(_(349));As&30||$w(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,j0(zw.bind(null,r,i,t),[t]),r.flags|=2048,wl(9,Fw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=En(),e=je.identifierPrefix;if(ce){var n=Vn,r=Hn;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sN={readContext:Zt,useCallback:Jw,useContext:Zt,useEffect:Tm,useImperativeHandle:Kw,useInsertionEffect:Vw,useLayoutEffect:Ww,useMemo:Gw,useReducer:nf,useRef:Hw,useState:function(){return nf(vl)},useDebugValue:Om,useDeferredValue:function(t){var e=en();return Qw(e,Ee.memoizedState,t)},useTransition:function(){var t=nf(vl)[0],e=en().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Lw,useId:Yw,unstable_isNewReconciler:!1},iN={readContext:Zt,useCallback:Jw,useContext:Zt,useEffect:Tm,useImperativeHandle:Kw,useInsertionEffect:Vw,useLayoutEffect:Ww,useMemo:Gw,useReducer:rf,useRef:Hw,useState:function(){return rf(vl)},useDebugValue:Om,useDeferredValue:function(t){var e=en();return Ee===null?e.memoizedState=t:Qw(e,Ee.memoizedState,t)},useTransition:function(){var t=rf(vl)[0],e=en().memoizedState;return[t,e]},useMutableSource:Iw,useSyncExternalStore:Lw,useId:Yw,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ph(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ku={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),s=Fr(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(mn(e,t,s,r),Ga(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),s=Fr(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(mn(e,t,s,r),Ga(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=Fr(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(mn(e,t,r,n),Ga(e,t,r))}};function R0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!dl(n,r)||!dl(s,i):!0}function tx(t,e,n){var r=!1,s=qr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=xt(e)?_s:tt.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function D0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ku.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=xt(e)?_s:tt.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ph(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ku.enqueueReplaceState(s,s.state,null),Oc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=jE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oN=typeof WeakMap=="function"?WeakMap:Map;function nx(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Vh=r),Rh(t,e)},n}function rx(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rh(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xN.bind(null,t,e,n),e.then(t,t))}function L0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var lN=nr.ReactCurrentOwner,vt=!1;function it(t,e,n,r){e.child=t===null?Pw(e,null,n,r):Li(e,t.child,n,r)}function F0(t,e,n,r,s){n=n.render;var i=e.ref;return Ci(e,s),r=Cm(t,e,n,r,i,s),n=Nm(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(ce&&n&&hm(e),e.flags|=1,it(t,e,r,s),e.child)}function z0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Im(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sx(t,e,i,r,s)):(t=tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(o,r)&&t.ref===e.ref)return Xn(t,e,s)}return e.flags|=1,t=zr(i,r),t.ref=e.ref,t.return=e,e.child=t}function sx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(dl(i,r)&&t.ref===e.ref)if(vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,Xn(t,e,s)}return Dh(t,e,n,r,s)}function ix(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(vi,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(vi,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ie(vi,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ie(vi,Ot),Ot|=r;return it(t,e,s,n),e.child}function ox(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dh(t,e,n,r,s){var i=xt(n)?_s:tt.current;return i=Di(e,i),Ci(e,s),n=Cm(t,e,n,r,i,s),r=Nm(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(ce&&r&&hm(e),e.flags|=1,it(t,e,n,s),e.child)}function B0(t,e,n,r,s){if(xt(n)){var i=!0;Sc(e)}else i=!1;if(Ci(e,s),e.stateNode===null)Xa(t,e),tx(e,n,r),jh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=xt(n)?_s:tt.current,c=Di(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&D0(e,o,r,c),hr=!1;var f=e.memoizedState;o.state=f,Oc(e,r,o,s),a=e.memoizedState,l!==r||f!==a||wt.current||hr?(typeof u=="function"&&(Ph(e,n,u,r),a=e.memoizedState),(l=hr||R0(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:an(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Zt(a):(a=xt(n)?_s:tt.current,a=Di(e,a));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&D0(e,o,r,a),hr=!1,f=e.memoizedState,o.state=f,Oc(e,r,o,s);var m=e.memoizedState;l!==d||f!==m||wt.current||hr?(typeof h=="function"&&(Ph(e,n,h,r),m=e.memoizedState),(c=hr||R0(e,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ih(t,e,n,r,i,s)}function Ih(t,e,n,r,s,i){ox(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&N0(e,n,!1),Xn(t,e,i);r=e.stateNode,lN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,l,i)):it(t,e,l,i),e.memoizedState=r.state,s&&N0(e,n,!0),e.child}function lx(t){var e=t.stateNode;e.pendingContext?C0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C0(t,e.context,!1),bm(t,e.containerInfo)}function U0(t,e,n,r,s){return Ii(),mm(s),e.flags|=256,it(t,e,n,r),e.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function $h(t){return{baseLanes:t,cachePool:null,transitions:null}}function ax(t,e,n){var r=e.pendingProps,s=he.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(he,s&1),t===null)return Mh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qu(o,r,0,null),t=xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$h(n),e.memoizedState=Lh,t):_m(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return aN(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=zr(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zr(l,i):(i=xs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$h(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lh,r}return i=t.child,t=i.sibling,r=zr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _m(t,e){return e=Qu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ka(t,e,n,r){return r!==null&&mm(r),Li(e,t.child,null,n),t=_m(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sf(Error(_(422))),ka(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qu({mode:"visible",children:r.children},s,0,null),i=xs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=$h(o),e.memoizedState=Lh,i);if(!(e.mode&1))return ka(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(_(419)),r=sf(i,r,void 0),ka(t,e,o,r)}if(l=(o&t.childLanes)!==0,vt||l){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yn(t,s),mn(r,t,s,-1))}return Dm(),r=sf(Error(_(421))),ka(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,At=Ir(s.nextSibling),jt=e,ce=!0,dn=null,t!==null&&(Wt[qt++]=Hn,Wt[qt++]=Vn,Wt[qt++]=Ms,Hn=t.id,Vn=t.overflow,Ms=e),e=_m(e,r.children),e.flags|=4096,e)}function H0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ah(t.return,e,n)}function of(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(it(t,e,r.children,n),r=he.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H0(t,n,e);else if(t.tag===19)H0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(he,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&_c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),of(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&_c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}of(e,!0,n,null,i);break;case"together":of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,n=zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cN(t,e,n){switch(e.tag){case 3:lx(e),Ii();break;case 5:Dw(e);break;case 1:xt(e.type)&&Sc(e);break;case 4:bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ie(Nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?ax(t,e,n):(ie(he,he.current&1),t=Xn(t,e,n),t!==null?t.sibling:null);ie(he,he.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(he,he.current),r)break;return null;case 22:case 23:return e.lanes=0,ix(t,e,n)}return Xn(t,e,n)}var ux,Fh,dx,fx;ux=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fh=function(){};dx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,hs(Pn.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=me({},s,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":s=uh(t,s),r=uh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bc)}fh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sl.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&le("scroll",t),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};fx=function(t,e,n,r){n!==r&&(e.flags|=4)};function wo(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uN(t,e,n){var r=e.pendingProps;switch(pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return xt(e.type)&&kc(),Ge(e),null;case 3:return r=e.stateNode,$i(),ae(wt),ae(tt),Sm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(Kh(dn),dn=null))),Fh(t,e),Ge(e),null;case 5:km(e);var s=hs(gl.current);if(n=e.type,t!==null&&e.stateNode!=null)dx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_(166));return Ge(e),null}if(t=hs(Pn.current),xa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[pl]=i,t=(e.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(s=0;s<Mo.length;s++)le(Mo[s],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":Xg(r,i),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},le("invalid",r);break;case"textarea":e0(r,i),le("invalid",r)}fh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&wa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&wa(r.textContent,l,t),s=["children",""+l]):sl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&le("scroll",r)}switch(n){case"input":da(r),Zg(r,i,!0);break;case"textarea":da(r),t0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_n]=e,t[pl]=r,ux(t,e,!1,!1),e.stateNode=t;e:{switch(o=hh(n,r),n){case"dialog":le("cancel",t),le("close",t),s=r;break;case"iframe":case"object":case"embed":le("load",t),s=r;break;case"video":case"audio":for(s=0;s<Mo.length;s++)le(Mo[s],t);s=r;break;case"source":le("error",t),s=r;break;case"img":case"image":case"link":le("error",t),le("load",t),s=r;break;case"details":le("toggle",t),s=r;break;case"input":Xg(t,r),s=lh(t,r),le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=me({},r,{value:void 0}),le("invalid",t);break;case"textarea":e0(t,r),s=uh(t,r),le("invalid",t);break;default:s=r}fh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?H1(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&B1(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&il(t,a):typeof a=="number"&&il(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sl.hasOwnProperty(i)?a!=null&&i==="onScroll"&&le("scroll",t):a!=null&&Zp(t,i,a,o))}switch(n){case"input":da(t),Zg(t,r,!1);break;case"textarea":da(t),t0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)fx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_(166));if(n=hs(gl.current),hs(Pn.current),xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return Ge(e),null;case 13:if(ae(he),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&At!==null&&e.mode&1&&!(e.flags&128))Mw(),Ii(),e.flags|=98560,i=!1;else if(i=xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_(317));i[_n]=e}else Ii(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),i=!1}else dn!==null&&(Kh(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?Oe===0&&(Oe=3):Dm())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return $i(),Fh(t,e),t===null&&fl(e.stateNode.containerInfo),Ge(e),null;case 10:return vm(e.type._context),Ge(e),null;case 17:return xt(e.type)&&kc(),Ge(e),null;case 19:if(ae(he),i=e.memoizedState,i===null)return Ge(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wo(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_c(t),o!==null){for(e.flags|=128,wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(he,he.current&1|2),e.child}t=t.sibling}i.tail!==null&&we()>zi&&(e.flags|=128,r=!0,wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=_c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return Ge(e),null}else 2*we()-i.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=we(),e.sibling=null,n=he.current,ie(he,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return Rm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(_(156,e.tag))}function dN(t,e){switch(pm(e),e.tag){case 1:return xt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $i(),ae(wt),ae(tt),Sm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return km(e),null;case 13:if(ae(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));Ii()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(he),null;case 4:return $i(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var Sa=!1,Ye=!1,fN=typeof WeakSet=="function"?WeakSet:Set,D=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(t,e,r)}else n.current=null}function zh(t,e,n){try{n()}catch(r){ge(t,e,r)}}var V0=!1;function hN(t,e){if(Sh=vc,t=yw(),fm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===s&&(l=o),f===i&&++u===r&&(a=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Eh={focusedElem:t,selectionRange:n},vc=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:an(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(k){ge(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=V0,V0=!1,m}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&zh(e,n,i)}s=s.next}while(s!==r)}}function Ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hx(t){var e=t.alternate;e!==null&&(t.alternate=null,hx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[pl],delete e[Th],delete e[GC],delete e[QC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function px(t){return t.tag===5||t.tag===3||t.tag===4}function W0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||px(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(t=t.child,t!==null))for(Uh(t,e,n),t=t.sibling;t!==null;)Uh(t,e,n),t=t.sibling}function Hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hh(t,e,n),t=t.sibling;t!==null;)Hh(t,e,n),t=t.sibling}var Fe=null,cn=!1;function or(t,e,n){for(n=n.child;n!==null;)mx(t,e,n),n=n.sibling}function mx(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(zu,n)}catch{}switch(n.tag){case 5:Ye||yi(n,e);case 6:var r=Fe,s=cn;Fe=null,or(t,e,n),Fe=r,cn=s,Fe!==null&&(cn?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(cn?(t=Fe,n=n.stateNode,t.nodeType===8?Xd(t.parentNode,n):t.nodeType===1&&Xd(t,n),cl(t)):Xd(Fe,n.stateNode));break;case 4:r=Fe,s=cn,Fe=n.stateNode.containerInfo,cn=!0,or(t,e,n),Fe=r,cn=s;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&zh(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!Ye&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ge(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,or(t,e,n),Ye=r):or(t,e,n);break;default:or(t,e,n)}}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fN),e.forEach(function(r){var s=kN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,cn=!1;break e;case 3:Fe=l.stateNode.containerInfo,cn=!0;break e;case 4:Fe=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(Fe===null)throw Error(_(160));mx(i,o,s),Fe=null,cn=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){ge(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gx(e,t),e=e.sibling}function gx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),Sn(t),r&4){try{Ho(3,t,t.return),Ju(3,t)}catch(g){ge(t,t.return,g)}try{Ho(5,t,t.return)}catch(g){ge(t,t.return,g)}}break;case 1:on(e,t),Sn(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(on(e,t),Sn(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var s=t.stateNode;try{il(s,"")}catch(g){ge(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$1(s,i),hh(l,o);var c=hh(l,i);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?H1(s,d):u==="dangerouslySetInnerHTML"?B1(s,d):u==="children"?il(s,d):Zp(s,u,d,c)}switch(l){case"input":ah(s,i);break;case"textarea":F1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?bi(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[pl]=i}catch(g){ge(t,t.return,g)}}break;case 6:if(on(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(_(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){ge(t,t.return,g)}}break;case 3:if(on(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(e.containerInfo)}catch(g){ge(t,t.return,g)}break;case 4:on(e,t),Sn(t);break;case 13:on(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pm=we())),r&4&&q0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(c=Ye)||u,on(e,t),Ye=c):on(e,t),Sn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(D=t,u=t.child;u!==null;){for(d=D=u;D!==null;){switch(f=D,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ho(4,f,f.return);break;case 1:yi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ge(r,n,g)}}break;case 5:yi(f,f.return);break;case 22:if(f.memoizedState!==null){J0(d);continue}}h!==null?(h.return=f,D=h):J0(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=U1("display",o))}catch(g){ge(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ge(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),Sn(t),r&4&&q0(t);break;case 21:break;default:on(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(px(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(il(s,""),r.flags&=-33);var i=W0(t);Hh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=W0(t);Uh(t,l,o);break;default:throw Error(_(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pN(t,e,n){D=t,yx(t)}function yx(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sa;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Ye;l=Sa;var c=Ye;if(Sa=o,(Ye=a)&&!c)for(D=s;D!==null;)o=D,a=o.child,o.tag===22&&o.memoizedState!==null?G0(s):a!==null?(a.return=o,D=a):G0(s);for(;i!==null;)D=i,yx(i),i=i.sibling;D=s,Sa=l,Ye=c}K0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):K0(t)}}function K0(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&A0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}A0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&cl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Ye||e.flags&512&&Bh(e)}catch(f){ge(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function J0(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function G0(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ju(4,e)}catch(a){ge(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){ge(e,s,a)}}var i=e.return;try{Bh(e)}catch(a){ge(e,i,a)}break;case 5:var o=e.return;try{Bh(e)}catch(a){ge(e,o,a)}}}catch(a){ge(e,e.return,a)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var mN=Math.ceil,Pc=nr.ReactCurrentDispatcher,Mm=nr.ReactCurrentOwner,Qt=nr.ReactCurrentBatchConfig,Q=0,je=null,be=null,He=0,Ot=0,vi=Gr(0),Oe=0,xl=null,Ps=0,Gu=0,Am=0,Vo=null,mt=null,Pm=0,zi=1/0,Fn=null,jc=!1,Vh=null,$r=null,Ea=!1,Tr=null,Rc=0,Wo=0,Wh=null,Za=-1,ec=0;function ot(){return Q&6?we():Za!==-1?Za:Za=we()}function Fr(t){return t.mode&1?Q&2&&He!==0?He&-He:XC.transition!==null?(ec===0&&(ec=tw()),ec):(t=X,t!==0||(t=window.event,t=t===void 0?16:aw(t.type)),t):1}function mn(t,e,n,r){if(50<Wo)throw Wo=0,Wh=null,Error(_(185));$l(t,n,r),(!(Q&2)||t!==je)&&(t===je&&(!(Q&2)&&(Gu|=n),Oe===4&&xr(t,He)),bt(t,r),n===1&&Q===0&&!(e.mode&1)&&(zi=we()+500,Wu&&Qr()))}function bt(t,e){var n=t.callbackNode;XE(t,e);var r=yc(t,t===je?He:0);if(r===0)n!==null&&s0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&s0(n),e===1)t.tag===0?YC(Q0.bind(null,t)):Tw(Q0.bind(null,t)),KC(function(){!(Q&6)&&Qr()}),n=null;else{switch(nw(r)){case 1:n=sm;break;case 4:n=Z1;break;case 16:n=gc;break;case 536870912:n=ew;break;default:n=gc}n=Cx(n,vx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vx(t,e){if(Za=-1,ec=0,Q&6)throw Error(_(327));var n=t.callbackNode;if(Ni()&&t.callbackNode!==n)return null;var r=yc(t,t===je?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dc(t,r);else{e=r;var s=Q;Q|=2;var i=xx();(je!==t||He!==e)&&(Fn=null,zi=we()+500,ws(t,e));do try{vN();break}catch(l){wx(t,l)}while(!0);ym(),Pc.current=i,Q=s,be!==null?e=0:(je=null,He=0,e=Oe)}if(e!==0){if(e===2&&(s=vh(t),s!==0&&(r=s,e=qh(t,s))),e===1)throw n=xl,ws(t,0),xr(t,r),bt(t,we()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!gN(s)&&(e=Dc(t,r),e===2&&(i=vh(t),i!==0&&(r=i,e=qh(t,i))),e===1))throw n=xl,ws(t,0),xr(t,r),bt(t,we()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_(345));case 2:ss(t,mt,Fn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=Pm+500-we(),10<e)){if(yc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nh(ss.bind(null,t,mt,Fn),e);break}ss(t,mt,Fn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mN(r/1960))-r,10<r){t.timeoutHandle=Nh(ss.bind(null,t,mt,Fn),r);break}ss(t,mt,Fn);break;case 5:ss(t,mt,Fn);break;default:throw Error(_(329))}}}return bt(t,we()),t.callbackNode===n?vx.bind(null,t):null}function qh(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=Dc(t,e),t!==2&&(e=mt,mt=n,e!==null&&Kh(e)),t}function Kh(t){mt===null?mt=t:mt.push.apply(mt,t)}function gN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~Am,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function Q0(t){if(Q&6)throw Error(_(327));Ni();var e=yc(t,0);if(!(e&1))return bt(t,we()),null;var n=Dc(t,e);if(t.tag!==0&&n===2){var r=vh(t);r!==0&&(e=r,n=qh(t,r))}if(n===1)throw n=xl,ws(t,0),xr(t,e),bt(t,we()),n;if(n===6)throw Error(_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ss(t,mt,Fn),bt(t,we()),null}function jm(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(zi=we()+500,Wu&&Qr())}}function js(t){Tr!==null&&Tr.tag===0&&!(Q&6)&&Ni();var e=Q;Q|=1;var n=Qt.transition,r=X;try{if(Qt.transition=null,X=1,t)return t()}finally{X=r,Qt.transition=n,Q=e,!(Q&6)&&Qr()}}function Rm(){Ot=vi.current,ae(vi)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qC(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:$i(),ae(wt),ae(tt),Sm();break;case 5:km(r);break;case 4:$i();break;case 13:ae(he);break;case 19:ae(he);break;case 10:vm(r.type._context);break;case 22:case 23:Rm()}n=n.return}if(je=t,be=t=zr(t.current,null),He=Ot=e,Oe=0,xl=null,Am=Gu=Ps=0,mt=Vo=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fs=null}return t}function wx(t,e){do{var n=be;try{if(ym(),Qa.current=Ac,Mc){for(var r=pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mc=!1}if(As=0,Me=Ee=pe=null,Uo=!1,yl=0,Mm.current=null,n===null||n.return===null){Oe=1,xl=e,be=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=He,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=L0(o);if(h!==null){h.flags&=-257,$0(h,o,l,i,e),h.mode&1&&I0(i,c,e),e=h,a=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(a),e.updateQueue=g}else m.add(a);break e}else{if(!(e&1)){I0(i,c,e),Dm();break e}a=Error(_(426))}}else if(ce&&l.mode&1){var v=L0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),$0(v,o,l,i,e),mm(Fi(a,l));break e}}i=a=Fi(a,l),Oe!==4&&(Oe=2),Vo===null?Vo=[i]:Vo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=nx(i,a,e);M0(i,y);break e;case 1:l=a;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=rx(i,l,e);M0(i,k);break e}}i=i.return}while(i!==null)}kx(n)}catch(E){e=E,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function xx(){var t=Pc.current;return Pc.current=Ac,t===null?Ac:t}function Dm(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),je===null||!(Ps&268435455)&&!(Gu&268435455)||xr(je,He)}function Dc(t,e){var n=Q;Q|=2;var r=xx();(je!==t||He!==e)&&(Fn=null,ws(t,e));do try{yN();break}catch(s){wx(t,s)}while(!0);if(ym(),Q=n,Pc.current=r,be!==null)throw Error(_(261));return je=null,He=0,Oe}function yN(){for(;be!==null;)bx(be)}function vN(){for(;be!==null&&!HE();)bx(be)}function bx(t){var e=Ex(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?kx(t):be=e,Mm.current=null}function kx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dN(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,be=null;return}}else if(n=uN(n,e,Ot),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Oe===0&&(Oe=5)}function ss(t,e,n){var r=X,s=Qt.transition;try{Qt.transition=null,X=1,wN(t,e,n,r)}finally{Qt.transition=s,X=r}return null}function wN(t,e,n,r){do Ni();while(Tr!==null);if(Q&6)throw Error(_(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZE(t,i),t===je&&(be=je=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ea||(Ea=!0,Cx(gc,function(){return Ni(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=X;X=1;var l=Q;Q|=4,Mm.current=null,hN(t,n),gx(n,t),FC(Eh),vc=!!Sh,Eh=Sh=null,t.current=n,pN(n),VE(),Q=l,X=o,Qt.transition=i}else t.current=n;if(Ea&&(Ea=!1,Tr=t,Rc=s),i=t.pendingLanes,i===0&&($r=null),KE(n.stateNode),bt(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jc)throw jc=!1,t=Vh,Vh=null,t;return Rc&1&&t.tag!==0&&Ni(),i=t.pendingLanes,i&1?t===Wh?Wo++:(Wo=0,Wh=t):Wo=0,Qr(),null}function Ni(){if(Tr!==null){var t=nw(Rc),e=Qt.transition,n=X;try{if(Qt.transition=null,X=16>t?16:t,Tr===null)var r=!1;else{if(t=Tr,Tr=null,Rc=0,Q&6)throw Error(_(331));var s=Q;for(Q|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(D=c;D!==null;){var u=D;switch(u.tag){case 0:case 11:case 15:Ho(8,u,i)}var d=u.child;if(d!==null)d.return=u,D=d;else for(;D!==null;){u=D;var f=u.sibling,h=u.return;if(hx(u),u===c){D=null;break}if(f!==null){f.return=h,D=f;break}D=h}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ho(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,D=y;break e}D=i.return}}var w=t.current;for(D=w;D!==null;){o=D;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,D=b;else e:for(o=w;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ju(9,l)}}catch(E){ge(l,l.return,E)}if(l===o){D=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,D=k;break e}D=l.return}}if(Q=s,Qr(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(zu,t)}catch{}r=!0}return r}finally{X=n,Qt.transition=e}}return!1}function Y0(t,e,n){e=Fi(n,e),e=nx(t,e,1),t=Lr(t,e,1),e=ot(),t!==null&&($l(t,1,e),bt(t,e))}function ge(t,e,n){if(t.tag===3)Y0(t,t,n);else for(;e!==null;){if(e.tag===3){Y0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Fi(n,t),t=rx(e,t,1),e=Lr(e,t,1),t=ot(),e!==null&&($l(e,1,t),bt(e,t));break}}e=e.return}}function xN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(He&n)===n&&(Oe===4||Oe===3&&(He&130023424)===He&&500>we()-Pm?ws(t,0):Am|=n),bt(t,e)}function Sx(t,e){e===0&&(t.mode&1?(e=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):e=1);var n=ot();t=Yn(t,e),t!==null&&($l(t,e,n),bt(t,n))}function bN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sx(t,n)}function kN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(e),Sx(t,n)}var Ex;Ex=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vt=!1,cN(t,e,n);vt=!!(t.flags&131072)}else vt=!1,ce&&e.flags&1048576&&Ow(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var s=Di(e,tt.current);Ci(e,n),s=Cm(null,e,r,t,s,n);var i=Nm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,Sc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xm(e),s.updater=Ku,e.stateNode=s,s._reactInternals=e,jh(e,r,t,n),e=Ih(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&hm(e),it(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=EN(r),t=an(r,t),s){case 0:e=Dh(null,e,r,t,n);break e;case 1:e=B0(null,e,r,t,n);break e;case 11:e=F0(null,e,r,t,n);break e;case 14:e=z0(null,e,r,an(r.type,t),n);break e}throw Error(_(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Dh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),B0(t,e,r,s,n);case 3:e:{if(lx(e),t===null)throw Error(_(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rw(t,e),Oc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fi(Error(_(423)),e),e=U0(t,e,r,n,s);break e}else if(r!==s){s=Fi(Error(_(424)),e),e=U0(t,e,r,n,s);break e}else for(At=Ir(e.stateNode.containerInfo.firstChild),jt=e,ce=!0,dn=null,n=Pw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ii(),r===s){e=Xn(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Dw(e),t===null&&Mh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ch(r,s)?o=null:i!==null&&Ch(r,i)&&(e.flags|=32),ox(t,e),it(t,e,o,n),e.child;case 6:return t===null&&Mh(e),null;case 13:return ax(t,e,n);case 4:return bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),F0(t,e,r,s,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ie(Nc,r._currentValue),r._currentValue=o,i!==null)if(yn(i.value,o)){if(i.children===s.children&&!wt.current){e=Xn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Wn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Ah(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ah(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}it(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ci(e,n),s=Zt(s),r=r(s),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,s=an(r,e.pendingProps),s=an(r.type,s),z0(t,e,r,s,n);case 15:return sx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Xa(t,e),e.tag=1,xt(r)?(t=!0,Sc(e)):t=!1,Ci(e,n),tx(e,r,s),jh(e,r,s,n),Ih(null,e,r,!0,t,n);case 19:return cx(t,e,n);case 22:return ix(t,e,n)}throw Error(_(156,e.tag))};function Cx(t,e){return X1(t,e)}function SN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new SN(t,e,n,r)}function Im(t){return t=t.prototype,!(!t||!t.isReactComponent)}function EN(t){if(typeof t=="function")return Im(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function zr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Im(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ai:return xs(n.children,s,i,e);case em:o=8,s|=8;break;case rh:return t=Jt(12,n,e,s|2),t.elementType=rh,t.lanes=i,t;case sh:return t=Jt(13,n,e,s),t.elementType=sh,t.lanes=i,t;case ih:return t=Jt(19,n,e,s),t.elementType=ih,t.lanes=i,t;case D1:return Qu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j1:o=10;break e;case R1:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case fr:o=16,r=null;break e}throw Error(_(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xs(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Qu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=D1,t.lanes=n,t.stateNode={isHidden:!1},t}function lf(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function af(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bd(0),this.expirationTimes=Bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lm(t,e,n,r,s,i,o,l,a){return t=new CN(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xm(i),t}function NN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Nx(t){if(!t)return qr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_(171))}if(t.tag===1){var n=t.type;if(xt(n))return Nw(t,n,e)}return e}function Tx(t,e,n,r,s,i,o,l,a){return t=Lm(n,r,!0,t,s,i,o,l,a),t.context=Nx(null),n=t.current,r=ot(),s=Fr(n),i=Wn(r,s),i.callback=e??null,Lr(n,i,s),t.current.lanes=s,$l(t,s,r),bt(t,r),t}function Yu(t,e,n,r){var s=e.current,i=ot(),o=Fr(s);return n=Nx(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,o),t!==null&&(mn(t,s,o,i),Ga(t,s,o)),o}function Ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $m(t,e){X0(t,e),(t=t.alternate)&&X0(t,e)}function TN(){return null}var Ox=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fm(t){this._internalRoot=t}Xu.prototype.render=Fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));Yu(t,e,null,null)};Xu.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){Yu(null,t,null,null)}),e[Qn]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=iw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wr.length&&e!==0&&e<wr[n].priority;n++);wr.splice(n,0,t),n===0&&lw(t)}};function zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function ON(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ic(o);i.call(c)}}var o=Tx(e,r,t,0,null,!1,!1,"",Z0);return t._reactRootContainer=o,t[Qn]=o.current,fl(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Ic(a);l.call(c)}}var a=Lm(t,0,!1,null,null,!1,!1,"",Z0);return t._reactRootContainer=a,t[Qn]=a.current,fl(t.nodeType===8?t.parentNode:t),js(function(){Yu(e,a,n,r)}),a}function ed(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Ic(o);l.call(a)}}Yu(e,o,t,s)}else o=ON(n,e,t,s,r);return Ic(o)}rw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_o(e.pendingLanes);n!==0&&(im(e,n|1),bt(e,we()),!(Q&6)&&(zi=we()+500,Qr()))}break;case 13:js(function(){var r=Yn(t,1);if(r!==null){var s=ot();mn(r,t,1,s)}}),$m(t,1)}};om=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var n=ot();mn(e,t,134217728,n)}$m(t,134217728)}};sw=function(t){if(t.tag===13){var e=Fr(t),n=Yn(t,e);if(n!==null){var r=ot();mn(n,t,e,r)}$m(t,e)}};iw=function(){return X};ow=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};mh=function(t,e,n){switch(e){case"input":if(ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vu(r);if(!s)throw Error(_(90));L1(r),ah(r,s)}}}break;case"textarea":F1(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};q1=jm;K1=js;var _N={usingClientEntryPoint:!1,Events:[zl,fi,Vu,V1,W1,jm]},xo={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MN={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Q1(t),t===null?null:t.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||TN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ca.isDisabled&&Ca.supportsFiber)try{zu=Ca.inject(MN),An=Ca}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_N;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(e))throw Error(_(200));return NN(t,e,null,n)};Dt.createRoot=function(t,e){if(!zm(t))throw Error(_(299));var n=!1,r="",s=Ox;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lm(t,1,!1,null,null,n,!1,r,s),t[Qn]=e.current,fl(t.nodeType===8?t.parentNode:t),new Fm(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=Q1(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return js(t)};Dt.hydrate=function(t,e,n){if(!Zu(e))throw Error(_(200));return ed(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!zm(t))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ox;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tx(e,null,t,1,n??null,s,!1,i,o),t[Qn]=e.current,fl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xu(e)};Dt.render=function(t,e,n){if(!Zu(e))throw Error(_(200));return ed(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(_(40));return t._reactRootContainer?(js(function(){ed(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Dt.unstable_batchedUpdates=jm;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zu(n))throw Error(_(200));if(t==null||t._reactInternals===void 0)throw Error(_(38));return ed(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function _x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_x)}catch(t){console.error(t)}}_x(),_1.exports=Dt;var Un=_1.exports;const AN=y1(Un);var Mx,ey=Un;Mx=ey.createRoot,ey.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const ty="popstate";function PN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Jh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Px(s)}return RN(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ax(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jN(){return Math.random().toString(36).substr(2,8)}function ny(t,e){return{usr:t.state,key:t.key,idx:e}}function Jh(t,e,n,r){return n===void 0&&(n=null),bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||jN()})}function Px(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Or.Pop,a=null,c=u();c==null&&(c=0,o.replaceState(bl({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){l=Or.Pop;let v=u(),y=v==null?null:v-c;c=v,a&&a({action:l,location:g.location,delta:y})}function f(v,y){l=Or.Push;let w=Jh(g.location,v,y);c=u()+1;let b=ny(w,c),k=g.createHref(w);try{o.pushState(b,"",k)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(k)}i&&a&&a({action:l,location:g.location,delta:1})}function h(v,y){l=Or.Replace;let w=Jh(g.location,v,y);c=u();let b=ny(w,c),k=g.createHref(w);o.replaceState(b,"",k),i&&a&&a({action:l,location:g.location,delta:0})}function m(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:Px(v);return w=w.replace(/ $/,"%20"),Se(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return l},get location(){return t(s,o)},listen(v){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(ty,d),a=v,()=>{s.removeEventListener(ty,d),a=null}},createHref(v){return e(s,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(v){return o.go(v)}};return g}var ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ry||(ry={}));function DN(t,e,n){return n===void 0&&(n="/"),IN(t,e,n,!1)}function IN(t,e,n,r){let s=typeof e=="string"?Xi(e):e,i=Dx(s.pathname||"/",n);if(i==null)return null;let o=jx(t);LN(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let c=JN(i);l=qN(o[a],c,r)}return l}function jx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(Se(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=bs([r,a.relativePath]),u=n.concat(a);i.children&&i.children.length>0&&(Se(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),jx(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:VN(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of Rx(i.path))s(i,o,a)}),e}function Rx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Rx(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function LN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $N=/^:[\w-]+$/,FN=3,zN=2,BN=1,UN=10,HN=-2,sy=t=>t==="*";function VN(t,e){let n=t.split("/"),r=n.length;return n.some(sy)&&(r+=HN),e&&(r+=zN),n.filter(s=>!sy(s)).reduce((s,i)=>s+($N.test(i)?FN:i===""?BN:UN),r)}function WN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function qN(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],c=l===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=iy({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},u),f=a.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=iy({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:bs([i,d.pathname]),pathnameBase:XN(bs([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=bs([i,d.pathnameBase]))}return o}function iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=KN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let g=l[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[d];return h&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function KN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ax(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function JN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ax(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function GN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:QN(n,e):e,search:ZN(r),hash:e2(s)}}function QN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ix(t,e){let n=YN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Lx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xi(t):(s=bl({},t),Se(!s.pathname||!s.pathname.includes("?"),cf("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),cf("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),cf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=GN(s,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const bs=t=>t.join("/").replace(/\/\/+/g,"/"),XN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $x=["post","put","patch","delete"];new Set($x);const n2=["get",...$x];new Set(n2);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kl.apply(this,arguments)}const Bm=x.createContext(null),r2=x.createContext(null),Ul=x.createContext(null),td=x.createContext(null),zs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Fx=x.createContext(null);function Hl(){return x.useContext(td)!=null}function Um(){return Hl()||Se(!1),x.useContext(td).location}function zx(t){x.useContext(Ul).static||x.useLayoutEffect(t)}function nd(){let{isDataRoute:t}=x.useContext(zs);return t?g2():s2()}function s2(){Hl()||Se(!1);let t=x.useContext(Bm),{basename:e,future:n,navigator:r}=x.useContext(Ul),{matches:s}=x.useContext(zs),{pathname:i}=Um(),o=JSON.stringify(Ix(s,n.v7_relativeSplatPath)),l=x.useRef(!1);return zx(()=>{l.current=!0}),x.useCallback(function(c,u){if(u===void 0&&(u={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let d=Lx(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bs([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function i2(t,e){return o2(t,e)}function o2(t,e,n,r){Hl()||Se(!1);let{navigator:s}=x.useContext(Ul),{matches:i}=x.useContext(zs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let c=Um(),u;if(e){var d;let v=typeof e=="string"?Xi(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||Se(!1),u=v}else u=c;let f=u.pathname||"/",h=f;if(a!=="/"){let v=a.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=DN(t,{pathname:h}),g=d2(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:bs([a,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:bs([a,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&g?x.createElement(td.Provider,{value:{location:kl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Or.Pop}},g):g}function l2(){let t=m2(),e=t2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const a2=x.createElement(l2,null);class c2 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(zs.Provider,{value:this.props.routeContext},x.createElement(Fx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u2(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(Bm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(zs.Provider,{value:e},r)}function d2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);u>=0||Se(!1),o=o.slice(0,Math.min(o.length,u+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){a=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,m=!1,g=null,v=null;n&&(h=l&&d.route.id?l[d.route.id]:void 0,g=d.route.errorElement||a2,a&&(c<0&&f===0?(m=!0,v=null):c===f&&(m=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),w=()=>{let b;return h?b=g:m?b=v:d.route.Component?b=x.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,x.createElement(u2,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(c2,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Bx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bx||{}),Lc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lc||{});function f2(t){let e=x.useContext(Bm);return e||Se(!1),e}function h2(t){let e=x.useContext(r2);return e||Se(!1),e}function p2(t){let e=x.useContext(zs);return e||Se(!1),e}function Ux(t){let e=p2(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function m2(){var t;let e=x.useContext(Fx),n=h2(Lc.UseRouteError),r=Ux(Lc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function g2(){let{router:t}=f2(Bx.UseNavigateStable),e=Ux(Lc.UseNavigateStable),n=x.useRef(!1);return zx(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,kl({fromRouteId:e},i)))},[t,e])}const oy={};function y2(t,e){oy[e]||(oy[e]=!0,console.warn(e))}const ly=(t,e,n)=>y2(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function v2(t,e){t!=null&&t.v7_startTransition||ly("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&ly("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function uf(t){let{to:e,replace:n,state:r,relative:s}=t;Hl()||Se(!1);let{future:i,static:o}=x.useContext(Ul),{matches:l}=x.useContext(zs),{pathname:a}=Um(),c=nd(),u=Lx(e,Ix(l,i.v7_relativeSplatPath),a,s==="path"),d=JSON.stringify(u);return x.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Ao(t){Se(!1)}function w2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Or.Pop,navigator:i,static:o=!1,future:l}=t;Hl()&&Se(!1);let a=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:a,navigator:i,static:o,future:kl({v7_relativeSplatPath:!1},l)}),[a,l,i,o]);typeof r=="string"&&(r=Xi(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=r,g=x.useMemo(()=>{let v=Dx(u,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:h,key:m},navigationType:s}},[a,u,d,f,h,m,s]);return g==null?null:x.createElement(Ul.Provider,{value:c},x.createElement(td.Provider,{children:n,value:g}))}function x2(t){let{children:e,location:n}=t;return i2(Gh(e),n)}new Promise(()=>{});function Gh(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,Gh(r.props.children,i));return}r.type!==Ao&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const b2="6";try{window.__reactRouterVersion=b2}catch{}const k2="startTransition",ay=ji[k2];function S2(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=PN({window:s,v5Compat:!0}));let o=i.current,[l,a]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=x.useCallback(d=>{c&&ay?ay(()=>a(d)):a(d)},[a,c]);return x.useLayoutEffect(()=>o.listen(u),[o,u]),x.useEffect(()=>v2(r),[r]),x.createElement(w2,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var cy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cy||(cy={}));var uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(t,e)=>{const n=x.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...c},u)=>x.createElement("svg",{ref:u,...E2,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${C2(t)}`,l].join(" "),...c},[...e.map(([d,f])=>x.createElement(d,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=U("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=U("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=U("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=U("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=U("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=U("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=U("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=U("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=U("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=U("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=U("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=U("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=U("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=U("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=U("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=U("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=U("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=U("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=U("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=U("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=U("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=U("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=U("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=U("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=U("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=U("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=U("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=U("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=U("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var oT=Object.defineProperty,lT=(t,e,n)=>e in t?oT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,df=(t,e,n)=>(lT(t,typeof e!="symbol"?e+"":e,n),n);let aT=class{constructor(){df(this,"current",this.detect()),df(this,"handoffState","pending"),df(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},qn=new aT,tn=(t,e)=>{qn.isServer?x.useEffect(t,e):x.useLayoutEffect(t,e)};function Kn(t){let e=x.useRef(t);return tn(()=>{e.current=t},[t]),e}let ue=function(t){let e=Kn(t);return T.useCallback((...n)=>e.current(...n),[e])};function sd(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Bs(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return sd(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Bs();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function Wm(){let[t]=x.useState(Bs);return x.useEffect(()=>()=>t.dispose(),[t]),t}function cT(){let t=typeof document>"u";return"useSyncExternalStore"in ji?(e=>e.useSyncExternalStore)(ji)(()=>()=>{},()=>!1,()=>!t):!1}function Zi(){let t=cT(),[e,n]=x.useState(qn.isHandoffComplete);return e&&qn.isHandoffComplete===!1&&n(!1),x.useEffect(()=>{e!==!0&&n(!0)},[e]),x.useEffect(()=>qn.handoff(),[]),t?!1:e}var dy;let eo=(dy=T.useId)!=null?dy:function(){let t=Zi(),[e,n]=T.useState(t?()=>qn.nextId():null);return tn(()=>{e===null&&n(qn.nextId())},[e]),e!=null?""+e:void 0};function Ze(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ze),r}function Kx(t){return qn.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let Qh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var ls=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(ls||{}),Jx=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Jx||{}),uT=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(uT||{});function dT(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Qh)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Gx=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Gx||{});function fT(t,e=0){var n;return t===((n=Kx(t))==null?void 0:n.body)?!1:Ze(e,{0(){return t.matches(Qh)},1(){let r=t;for(;r!==null;){if(r.matches(Qh))return!0;r=r.parentElement}return!1}})}var hT=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(hT||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ks(t){t==null||t.focus({preventScroll:!0})}let pT=["textarea","input"].join(",");function mT(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,pT))!=null?n:!1}function gT(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function nc(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?gT(t):t:dT(t);s.length>0&&o.length>1&&(o=o.filter(h=>!s.includes(h))),r=r??i.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,d=o.length,f;do{if(u>=d||u+d<=0)return 0;let h=a+u;if(e&16)h=(h+d)%d;else{if(h<0)return 3;if(h>=d)return 1}f=o[h],f==null||f.focus(c),u+=l}while(f!==i.activeElement);return e&6&&mT(f)&&f.select(),2}function Qx(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function yT(){return/Android/gi.test(window.navigator.userAgent)}function vT(){return Qx()||yT()}function Na(t,e,n){let r=Kn(e);x.useEffect(()=>{function s(i){r.current(i)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function Yx(t,e,n){let r=Kn(e);x.useEffect(()=>{function s(i){r.current(i)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function wT(t,e,n=!0){let r=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,l){if(!r.current||o.defaultPrevented)return;let a=l(o);if(a===null||!a.getRootNode().contains(a)||!a.isConnected)return;let c=function u(d){return typeof d=="function"?u(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let u of c){if(u===null)continue;let d=u instanceof HTMLElement?u:u.current;if(d!=null&&d.contains(a)||o.composed&&o.composedPath().includes(d))return}return!fT(a,Gx.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let i=x.useRef(null);Na("pointerdown",o=>{var l,a;r.current&&(i.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),Na("mousedown",o=>{var l,a;r.current&&(i.current=((a=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:a[0])||o.target)},!0),Na("click",o=>{vT()||i.current&&(s(o,()=>i.current),i.current=null)},!0),Na("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Yx("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Wl(...t){return x.useMemo(()=>Kx(...t),[...t])}let Xx=Symbol();function xT(t,e=!0){return Object.assign(t,{[Xx]:e})}function xn(...t){let e=x.useRef(t);x.useEffect(()=>{e.current=t},[t]);let n=ue(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[Xx]))?void 0:n}function qm(t,e){let n=x.useRef([]),r=ue(t);x.useEffect(()=>{let s=[...n.current];for(let[i,o]of e.entries())if(n.current[i]!==o){let l=r(e,s);return n.current=e,l}},[r,...e])}function $c(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var Fc=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Fc||{}),_r=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(_r||{});function nn({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:l}){l=l??bT;let a=Zx(e,t);if(i)return Ta(a,n,r,o,l);let c=s??0;if(c&2){let{static:u=!1,...d}=a;if(u)return Ta(d,n,r,o,l)}if(c&1){let{unmount:u=!0,...d}=a;return Ze(u?0:1,{0(){return null},1(){return Ta({...d,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return Ta(a,n,r,o,l)}function Ta(t,e={},n,r,s){let{as:i=n,children:o,refName:l="ref",...a}=ff(t,["unmount","static"]),c=t.ref!==void 0?{[l]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(e));let d={};if(e){let f=!1,h=[];for(let[m,g]of Object.entries(e))typeof g=="boolean"&&(f=!0),g===!0&&h.push(m);f&&(d["data-headlessui-state"]=h.join(" "))}if(i===x.Fragment&&Object.keys(fy(a)).length>0){if(!x.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=u.props,h=typeof(f==null?void 0:f.className)=="function"?(...g)=>$c(f==null?void 0:f.className(...g),a.className):$c(f==null?void 0:f.className,a.className),m=h?{className:h}:{};return x.cloneElement(u,Object.assign({},Zx(u.props,fy(ff(a,["ref"]))),d,c,{ref:s(u.ref,c.ref)},m))}return x.createElement(i,Object.assign({},ff(a,["ref"]),i!==x.Fragment&&c,i!==x.Fragment&&d),u)}function bT(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Zx(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...i){let o=n[r];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return e}function Lt(t){var e;return Object.assign(x.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function fy(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function ff(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let kT="div";var zc=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(zc||{});function ST(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return nn({ourProps:i,theirProps:s,slot:{},defaultTag:kT,name:"Hidden"})}let Yh=Lt(ST),Km=x.createContext(null);Km.displayName="OpenClosedContext";var _t=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(_t||{});function Jm(){return x.useContext(Km)}function ET({value:t,children:e}){return T.createElement(Km.Provider,{value:t},e)}function CT(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let br=[];CT(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&br[0]!==e.target&&(br.unshift(e.target),br=br.filter(n=>n!=null&&n.isConnected),br.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function NT(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&TT(n)?!1:r}function TT(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var eb=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(eb||{});function tb(t,e,n,r){let s=Kn(n);x.useEffect(()=>{t=t??window;function i(o){s.current(o)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function ql(){let t=x.useRef(!1);return tn(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function nb(t){let e=ue(t),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,sd(()=>{n.current&&e()})}),[e])}var Po=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Po||{});function OT(){let t=x.useRef(0);return Yx("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function rb(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let _T="div";var sb=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(sb||{});function MT(t,e){let n=x.useRef(null),r=xn(n,e),{initialFocus:s,containers:i,features:o=30,...l}=t;Zi()||(o=1);let a=Wl(n);jT({ownerDocument:a},!!(o&16));let c=RT({ownerDocument:a,container:n,initialFocus:s},!!(o&2));DT({ownerDocument:a,container:n,containers:i,previousActiveElement:c},!!(o&8));let u=OT(),d=ue(g=>{let v=n.current;v&&(y=>y())(()=>{Ze(u.current,{[Po.Forwards]:()=>{nc(v,ls.First,{skipElements:[g.relatedTarget]})},[Po.Backwards]:()=>{nc(v,ls.Last,{skipElements:[g.relatedTarget]})}})})}),f=Wm(),h=x.useRef(!1),m={ref:r,onKeyDown(g){g.key=="Tab"&&(h.current=!0,f.requestAnimationFrame(()=>{h.current=!1}))},onBlur(g){let v=rb(i);n.current instanceof HTMLElement&&v.add(n.current);let y=g.relatedTarget;y instanceof HTMLElement&&y.dataset.headlessuiFocusGuard!=="true"&&(ib(v,y)||(h.current?nc(n.current,Ze(u.current,{[Po.Forwards]:()=>ls.Next,[Po.Backwards]:()=>ls.Previous})|ls.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&ks(g.target)))}};return T.createElement(T.Fragment,null,!!(o&4)&&T.createElement(Yh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:zc.Focusable}),nn({ourProps:m,theirProps:l,defaultTag:_T,name:"FocusTrap"}),!!(o&4)&&T.createElement(Yh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:zc.Focusable}))}let AT=Lt(MT),bo=Object.assign(AT,{features:sb});function PT(t=!0){let e=x.useRef(br.slice());return qm(([n],[r])=>{r===!0&&n===!1&&sd(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=br.slice())},[t,br,e]),ue(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function jT({ownerDocument:t},e){let n=PT(e);qm(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&ks(n())},[e]),nb(()=>{e&&ks(n())})}function RT({ownerDocument:t,container:e,initialFocus:n},r){let s=x.useRef(null),i=ql();return qm(()=>{if(!r)return;let o=e.current;o&&sd(()=>{if(!i.current)return;let l=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?ks(n.current):nc(o,ls.First)===Jx.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function DT({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let i=ql();tb(t==null?void 0:t.defaultView,"focus",o=>{if(!s||!i.current)return;let l=rb(n);e.current instanceof HTMLElement&&l.add(e.current);let a=r.current;if(!a)return;let c=o.target;c&&c instanceof HTMLElement?ib(l,c)?(r.current=c,ks(c)):(o.preventDefault(),o.stopPropagation(),ks(a)):ks(r.current)},!0)}function ib(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let ob=x.createContext(!1);function IT(){return x.useContext(ob)}function Xh(t){return T.createElement(ob.Provider,{value:t.force},t.children)}function LT(t){let e=IT(),n=x.useContext(lb),r=Wl(t),[s,i]=x.useState(()=>{if(!e&&n!==null||qn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return x.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),x.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),s}let $T=x.Fragment;function FT(t,e){let n=t,r=x.useRef(null),s=xn(xT(u=>{r.current=u}),e),i=Wl(r),o=LT(r),[l]=x.useState(()=>{var u;return qn.isServer?null:(u=i==null?void 0:i.createElement("div"))!=null?u:null}),a=x.useContext(Zh),c=Zi();return tn(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),tn(()=>{if(l&&a)return a.register(l)},[a,l]),nb(()=>{var u;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((u=o.parentElement)==null||u.removeChild(o)))}),c?!o||!l?null:Un.createPortal(nn({ourProps:{ref:s},theirProps:n,defaultTag:$T,name:"Portal"}),l):null}let zT=x.Fragment,lb=x.createContext(null);function BT(t,e){let{target:n,...r}=t,s={ref:xn(e)};return T.createElement(lb.Provider,{value:n},nn({ourProps:s,theirProps:r,defaultTag:zT,name:"Popover.Group"}))}let Zh=x.createContext(null);function UT(){let t=x.useContext(Zh),e=x.useRef([]),n=ue(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=ue(i=>{let o=e.current.indexOf(i);o!==-1&&e.current.splice(o,1),t&&t.unregister(i)}),s=x.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,x.useMemo(()=>function({children:i}){return T.createElement(Zh.Provider,{value:s},i)},[s])]}let HT=Lt(FT),VT=Lt(BT),ep=Object.assign(HT,{Group:VT});function WT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const qT=typeof Object.is=="function"?Object.is:WT,{useState:KT,useEffect:JT,useLayoutEffect:GT,useDebugValue:QT}=ji;function YT(t,e,n){const r=e(),[{inst:s},i]=KT({inst:{value:r,getSnapshot:e}});return GT(()=>{s.value=r,s.getSnapshot=e,hf(s)&&i({inst:s})},[t,r,e]),JT(()=>(hf(s)&&i({inst:s}),t(()=>{hf(s)&&i({inst:s})})),[t]),QT(r),r}function hf(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!qT(n,r)}catch{return!0}}function XT(t,e,n){return e()}const ZT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eO=!ZT,tO=eO?XT:YT,nO="useSyncExternalStore"in ji?(t=>t.useSyncExternalStore)(ji):tO;function rO(t){return nO(t.subscribe,t.getSnapshot,t.getSnapshot)}function sO(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=e[s].call(n,...i);o&&(n=o,r.forEach(l=>l()))}}}function iO(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,i=t-s;n.style(r,"paddingRight",`${i}px`)}}}function oO(){return Qx()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=Bs();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let a=l.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let a=l.target;for(;a.parentElement&&r(a.parentElement);)a=a.parentElement;e.style(a,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let a=l.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let a=(l=window.scrollY)!=null?l:window.pageYOffset;i!==a&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function lO(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function aO(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let ps=sO(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Bs(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:aO(n)},s=[oO(),iO(),lO()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});ps.subscribe(()=>{let t=ps.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&ps.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ps.dispatch("TEARDOWN",n)}});function cO(t,e,n){let r=rO(ps),s=t?r.get(t):void 0,i=s?s.count>0:!1;return tn(()=>{if(!(!t||!e))return ps.dispatch("PUSH",t,n),()=>ps.dispatch("POP",t,n)},[e,t]),i}let pf=new Map,ko=new Map;function hy(t,e=!0){tn(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var o;if(!r)return;let l=(o=ko.get(r))!=null?o:1;if(l===1?ko.delete(r):ko.set(r,l-1),l!==1)return;let a=pf.get(r);a&&(a["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",a["aria-hidden"]),r.inert=a.inert,pf.delete(r))}let i=(n=ko.get(r))!=null?n:0;return ko.set(r,i+1),i!==0||(pf.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function uO({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=x.useRef((r=n==null?void 0:n.current)!=null?r:null),i=Wl(s),o=ue(()=>{var l,a,c;let u=[];for(let d of t)d!==null&&(d instanceof HTMLElement?u.push(d):"current"in d&&d.current instanceof HTMLElement&&u.push(d.current));if(e!=null&&e.current)for(let d of e.current)u.push(d);for(let d of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])d!==document.body&&d!==document.head&&d instanceof HTMLElement&&d.id!=="headlessui-portal-root"&&(d.contains(s.current)||d.contains((c=(a=s.current)==null?void 0:a.getRootNode())==null?void 0:c.host)||u.some(f=>d.contains(f))||u.push(d));return u});return{resolveContainers:o,contains:ue(l=>o().some(a=>a.contains(l))),mainTreeNodeRef:s,MainTreeNode:x.useMemo(()=>function(){return n!=null?null:T.createElement(Yh,{features:zc.Hidden,ref:s})},[s,n])}}let Gm=x.createContext(()=>{});Gm.displayName="StackContext";var tp=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(tp||{});function dO(){return x.useContext(Gm)}function fO({children:t,onUpdate:e,type:n,element:r,enabled:s}){let i=dO(),o=ue((...l)=>{e==null||e(...l),i(...l)});return tn(()=>{let l=s===void 0||s===!0;return l&&o(0,n,r),()=>{l&&o(1,n,r)}},[o,n,r,s]),T.createElement(Gm.Provider,{value:o},t)}let ab=x.createContext(null);function cb(){let t=x.useContext(ab);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,cb),e}return t}function hO(){let[t,e]=x.useState([]);return[t.length>0?t.join(" "):void 0,x.useMemo(()=>function(n){let r=ue(i=>(e(o=>[...o,i]),()=>e(o=>{let l=o.slice(),a=l.indexOf(i);return a!==-1&&l.splice(a,1),l}))),s=x.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return T.createElement(ab.Provider,{value:s},n.children)},[e])]}let pO="p";function mO(t,e){let n=eo(),{id:r=`headlessui-description-${n}`,...s}=t,i=cb(),o=xn(e);tn(()=>i.register(r),[r,i.register]);let l={ref:o,...i.props,id:r};return nn({ourProps:l,theirProps:s,slot:i.slot||{},defaultTag:pO,name:i.name||"Description"})}let gO=Lt(mO),yO=Object.assign(gO,{});var vO=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(vO||{}),wO=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(wO||{});let xO={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Bc=x.createContext(null);Bc.displayName="DialogContext";function Kl(t){let e=x.useContext(Bc);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kl),n}return e}function bO(t,e,n=()=>[document.body]){cO(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function kO(t,e){return Ze(e.type,xO,t,e)}let SO="div",EO=Fc.RenderStrategy|Fc.Static;function CO(t,e){let n=eo(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:l="dialog",__demoMode:a=!1,...c}=t,[u,d]=x.useState(0),f=x.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=Jm();s===void 0&&h!==null&&(s=(h&_t.Open)===_t.Open);let m=x.useRef(null),g=xn(m,e),v=Wl(m),y=t.hasOwnProperty("open")||h!==null,w=t.hasOwnProperty("onClose");if(!y&&!w)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!y)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!w)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let b=s?0:1,[k,E]=x.useReducer(kO,{titleId:null,descriptionId:null,panelRef:x.createRef()}),S=ue(()=>i(!1)),C=ue(ne=>E({type:0,id:ne})),N=Zi()?a?!1:b===0:!1,M=u>1,R=x.useContext(Bc)!==null,[z,ee]=UT(),oe={get current(){var ne;return(ne=k.panelRef.current)!=null?ne:m.current}},{resolveContainers:xe,mainTreeNodeRef:Ke,MainTreeNode:rt}=uO({portals:z,defaultContainers:[oe]}),Z=M?"parent":"leaf",P=h!==null?(h&_t.Closing)===_t.Closing:!1,$=R||P?!1:N,F=x.useCallback(()=>{var ne,Le;return(Le=Array.from((ne=v==null?void 0:v.querySelectorAll("body > *"))!=null?ne:[]).find(st=>st.id==="headlessui-portal-root"?!1:st.contains(Ke.current)&&st instanceof HTMLElement))!=null?Le:null},[Ke]);hy(F,$);let Y=M?!0:N,J=x.useCallback(()=>{var ne,Le;return(Le=Array.from((ne=v==null?void 0:v.querySelectorAll("[data-headlessui-portal]"))!=null?ne:[]).find(st=>st.contains(Ke.current)&&st instanceof HTMLElement))!=null?Le:null},[Ke]);hy(J,Y),wT(xe,ne=>{ne.preventDefault(),S()},!(!N||M));let de=!(M||b!==0);tb(v==null?void 0:v.defaultView,"keydown",ne=>{de&&(ne.defaultPrevented||ne.key===eb.Escape&&(ne.preventDefault(),ne.stopPropagation(),S()))}),bO(v,!(P||b!==0||R),xe),x.useEffect(()=>{if(b!==0||!m.current)return;let ne=new ResizeObserver(Le=>{for(let st of Le){let Ft=st.target.getBoundingClientRect();Ft.x===0&&Ft.y===0&&Ft.width===0&&Ft.height===0&&S()}});return ne.observe(m.current),()=>ne.disconnect()},[b,m,S]);let[ve,Dn]=hO(),ra=x.useMemo(()=>[{dialogState:b,close:S,setTitleId:C},k],[b,k,S,C]),oo=x.useMemo(()=>({open:b===0}),[b]),Et={ref:g,id:r,role:l,"aria-modal":b===0?!0:void 0,"aria-labelledby":k.titleId,"aria-describedby":ve};return T.createElement(fO,{type:"Dialog",enabled:b===0,element:m,onUpdate:ue((ne,Le)=>{Le==="Dialog"&&Ze(ne,{[tp.Add]:()=>d(st=>st+1),[tp.Remove]:()=>d(st=>st-1)})})},T.createElement(Xh,{force:!0},T.createElement(ep,null,T.createElement(Bc.Provider,{value:ra},T.createElement(ep.Group,{target:m},T.createElement(Xh,{force:!1},T.createElement(Dn,{slot:oo,name:"Dialog.Description"},T.createElement(bo,{initialFocus:o,containers:xe,features:N?Ze(Z,{parent:bo.features.RestoreFocus,leaf:bo.features.All&~bo.features.FocusLock}):bo.features.None},T.createElement(ee,null,nn({ourProps:Et,theirProps:c,slot:oo,defaultTag:SO,features:EO,visible:b===0,name:"Dialog"}))))))))),T.createElement(rt,null))}let NO="div";function TO(t,e){let n=eo(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:i,close:o}]=Kl("Dialog.Overlay"),l=xn(e),a=ue(u=>{if(u.target===u.currentTarget){if(NT(u.currentTarget))return u.preventDefault();u.preventDefault(),u.stopPropagation(),o()}}),c=x.useMemo(()=>({open:i===0}),[i]);return nn({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:a},theirProps:s,slot:c,defaultTag:NO,name:"Dialog.Overlay"})}let OO="div";function _O(t,e){let n=eo(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:i},o]=Kl("Dialog.Backdrop"),l=xn(e);x.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let a=x.useMemo(()=>({open:i===0}),[i]);return T.createElement(Xh,{force:!0},T.createElement(ep,null,nn({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:a,defaultTag:OO,name:"Dialog.Backdrop"})))}let MO="div";function AO(t,e){let n=eo(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:i},o]=Kl("Dialog.Panel"),l=xn(e,o.panelRef),a=x.useMemo(()=>({open:i===0}),[i]),c=ue(u=>{u.stopPropagation()});return nn({ourProps:{ref:l,id:r,onClick:c},theirProps:s,slot:a,defaultTag:MO,name:"Dialog.Panel"})}let PO="h2";function jO(t,e){let n=eo(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:i,setTitleId:o}]=Kl("Dialog.Title"),l=xn(e);x.useEffect(()=>(o(r),()=>o(null)),[r,o]);let a=x.useMemo(()=>({open:i===0}),[i]);return nn({ourProps:{ref:l,id:r},theirProps:s,slot:a,defaultTag:PO,name:"Dialog.Title"})}let RO=Lt(CO),DO=Lt(_O),IO=Lt(AO),LO=Lt(TO),$O=Lt(jO),py=Object.assign(RO,{Backdrop:DO,Panel:IO,Overlay:LO,Title:$O,Description:yO});function FO(t=0){let[e,n]=x.useState(t),r=ql(),s=x.useCallback(a=>{r.current&&n(c=>c|a)},[e,r]),i=x.useCallback(a=>!!(e&a),[e]),o=x.useCallback(a=>{r.current&&n(c=>c&~a)},[n,r]),l=x.useCallback(a=>{r.current&&n(c=>c^a)},[n]);return{flags:e,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:l}}function zO(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function mf(t,...e){t&&e.length>0&&t.classList.add(...e)}function gf(t,...e){t&&e.length>0&&t.classList.remove(...e)}function BO(t,e){let n=Bs();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(t),[i,o]=[r,s].map(a=>{let[c=0]=a.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,d)=>d-u);return c}),l=i+o;if(l!==0){n.group(c=>{c.setTimeout(()=>{e(),c.dispose()},l),c.addEventListener(t,"transitionrun",u=>{u.target===u.currentTarget&&c.dispose()})});let a=n.addEventListener(t,"transitionend",c=>{c.target===c.currentTarget&&(e(),a())})}else e();return n.add(()=>e()),n.dispose}function UO(t,e,n,r){let s=n?"enter":"leave",i=Bs(),o=r!==void 0?zO(r):()=>{};s==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=Ze(s,{enter:()=>e.enter,leave:()=>e.leave}),a=Ze(s,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),c=Ze(s,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return gf(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),mf(t,...e.base,...l,...c),i.nextFrame(()=>{gf(t,...e.base,...l,...c),mf(t,...e.base,...l,...a),BO(t,()=>(gf(t,...e.base,...l),mf(t,...e.base,...e.entered),o()))}),i.dispose}function HO({immediate:t,container:e,direction:n,classes:r,onStart:s,onStop:i}){let o=ql(),l=Wm(),a=Kn(n);tn(()=>{t&&(a.current="enter")},[t]),tn(()=>{let c=Bs();l.add(c.dispose);let u=e.current;if(u&&a.current!=="idle"&&o.current)return c.dispose(),s.current(a.current),c.add(UO(u,r.current,a.current==="enter",()=>{c.dispose(),i.current(a.current)})),c.dispose},[n])}function lr(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let id=x.createContext(null);id.displayName="TransitionContext";var VO=(t=>(t.Visible="visible",t.Hidden="hidden",t))(VO||{});function WO(){let t=x.useContext(id);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function qO(){let t=x.useContext(od);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let od=x.createContext(null);od.displayName="NestingContext";function ld(t){return"children"in t?ld(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ub(t,e){let n=Kn(t),r=x.useRef([]),s=ql(),i=Wm(),o=ue((h,m=_r.Hidden)=>{let g=r.current.findIndex(({el:v})=>v===h);g!==-1&&(Ze(m,{[_r.Unmount](){r.current.splice(g,1)},[_r.Hidden](){r.current[g].state="hidden"}}),i.microTask(()=>{var v;!ld(r)&&s.current&&((v=n.current)==null||v.call(n))}))}),l=ue(h=>{let m=r.current.find(({el:g})=>g===h);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:h,state:"visible"}),()=>o(h,_r.Unmount)}),a=x.useRef([]),c=x.useRef(Promise.resolve()),u=x.useRef({enter:[],leave:[],idle:[]}),d=ue((h,m,g)=>{a.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([v])=>v!==h)),e==null||e.chains.current[m].push([h,new Promise(v=>{a.current.push(v)})]),e==null||e.chains.current[m].push([h,new Promise(v=>{Promise.all(u.current[m].map(([y,w])=>w)).then(()=>v())})]),m==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>g(m)):g(m)}),f=ue((h,m,g)=>{Promise.all(u.current[m].splice(0).map(([v,y])=>y)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>g(m))});return x.useMemo(()=>({children:r,register:l,unregister:o,onStart:d,onStop:f,wait:c,chains:u}),[l,o,r,d,f,u,c])}function KO(){}let JO=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function my(t){var e;let n={};for(let r of JO)n[r]=(e=t[r])!=null?e:KO;return n}function GO(t){let e=x.useRef(my(t));return x.useEffect(()=>{e.current=my(t)},[t]),e}let QO="div",db=Fc.RenderStrategy;function YO(t,e){var n,r;let{beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l,enter:a,enterFrom:c,enterTo:u,entered:d,leave:f,leaveFrom:h,leaveTo:m,...g}=t,v=x.useRef(null),y=xn(v,e),w=(n=g.unmount)==null||n?_r.Unmount:_r.Hidden,{show:b,appear:k,initial:E}=WO(),[S,C]=x.useState(b?"visible":"hidden"),N=qO(),{register:M,unregister:R}=N;x.useEffect(()=>M(v),[M,v]),x.useEffect(()=>{if(w===_r.Hidden&&v.current){if(b&&S!=="visible"){C("visible");return}return Ze(S,{hidden:()=>R(v),visible:()=>M(v)})}},[S,v,M,R,b,w]);let z=Kn({base:lr(g.className),enter:lr(a),enterFrom:lr(c),enterTo:lr(u),entered:lr(d),leave:lr(f),leaveFrom:lr(h),leaveTo:lr(m)}),ee=GO({beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l}),oe=Zi();x.useEffect(()=>{if(oe&&S==="visible"&&v.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,S,oe]);let xe=E&&!k,Ke=k&&b&&E,rt=!oe||xe?"idle":b?"enter":"leave",Z=FO(0),P=ue(de=>Ze(de,{enter:()=>{Z.addFlag(_t.Opening),ee.current.beforeEnter()},leave:()=>{Z.addFlag(_t.Closing),ee.current.beforeLeave()},idle:()=>{}})),$=ue(de=>Ze(de,{enter:()=>{Z.removeFlag(_t.Opening),ee.current.afterEnter()},leave:()=>{Z.removeFlag(_t.Closing),ee.current.afterLeave()},idle:()=>{}})),F=ub(()=>{C("hidden"),R(v)},N),Y=x.useRef(!1);HO({immediate:Ke,container:v,classes:z,direction:rt,onStart:Kn(de=>{Y.current=!0,F.onStart(v,de,P)}),onStop:Kn(de=>{Y.current=!1,F.onStop(v,de,$),de==="leave"&&!ld(F)&&(C("hidden"),R(v))})});let J=g,ht={ref:y};return Ke?J={...J,className:$c(g.className,...z.current.enter,...z.current.enterFrom)}:Y.current&&(J.className=$c(g.className,(r=v.current)==null?void 0:r.className),J.className===""&&delete J.className),T.createElement(od.Provider,{value:F},T.createElement(ET,{value:Ze(S,{visible:_t.Open,hidden:_t.Closed})|Z.flags},nn({ourProps:ht,theirProps:J,defaultTag:QO,features:db,visible:S==="visible",name:"Transition.Child"})))}function XO(t,e){let{show:n,appear:r=!1,unmount:s=!0,...i}=t,o=x.useRef(null),l=xn(o,e);Zi();let a=Jm();if(n===void 0&&a!==null&&(n=(a&_t.Open)===_t.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,u]=x.useState(n?"visible":"hidden"),d=ub(()=>{u("hidden")}),[f,h]=x.useState(!0),m=x.useRef([n]);tn(()=>{f!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),h(!1))},[m,n]);let g=x.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);x.useEffect(()=>{if(n)u("visible");else if(!ld(d))u("hidden");else{let b=o.current;if(!b)return;let k=b.getBoundingClientRect();k.x===0&&k.y===0&&k.width===0&&k.height===0&&u("hidden")}},[n,d]);let v={unmount:s},y=ue(()=>{var b;f&&h(!1),(b=t.beforeEnter)==null||b.call(t)}),w=ue(()=>{var b;f&&h(!1),(b=t.beforeLeave)==null||b.call(t)});return T.createElement(od.Provider,{value:d},T.createElement(id.Provider,{value:g},nn({ourProps:{...v,as:x.Fragment,children:T.createElement(fb,{ref:l,...v,...i,beforeEnter:y,beforeLeave:w})},theirProps:{},defaultTag:x.Fragment,features:db,visible:c==="visible",name:"Transition"})))}function ZO(t,e){let n=x.useContext(id)!==null,r=Jm()!==null;return T.createElement(T.Fragment,null,!n&&r?T.createElement(np,{ref:e,...t}):T.createElement(fb,{ref:e,...t}))}let np=Lt(XO),fb=Lt(YO),e_=Lt(ZO),yf=Object.assign(np,{Child:e_,Root:np}),t_={data:""},n_=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||t_,r_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s_=/\/\*[^]*?\*\/|  +/g,gy=/\n+/g,kr=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?kr(o,i):i+"{"+kr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=kr(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,a=>/&/.test(a)?a.replace(/&/g,l):l?l+" "+a:a)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=kr.p?kr.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},In={},hb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+hb(t[n]);return e}return t},i_=(t,e,n,r,s)=>{let i=hb(t),o=In[i]||(In[i]=(a=>{let c=0,u=11;for(;c<a.length;)u=101*u+a.charCodeAt(c++)>>>0;return"go"+u})(i));if(!In[o]){let a=i!==t?t:(c=>{let u,d,f=[{}];for(;u=r_.exec(c.replace(s_,""));)u[4]?f.shift():u[3]?(d=u[3].replace(gy," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(gy," ").trim();return f[0]})(t);In[o]=kr(s?{["@keyframes "+o]:a}:a,n?"":"."+o)}let l=n&&In.g?In.g:null;return n&&(In.g=In[o]),((a,c,u,d)=>{d?c.data=c.data.replace(d,a):c.data.indexOf(a)===-1&&(c.data=u?a+c.data:c.data+a)})(In[o],e,r,l),o},o_=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let l=o(n),a=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=a?"."+a:l&&typeof l=="object"?l.props?"":kr(l,""):l===!1?"":l}return r+s+(o??"")},"");function ad(t){let e=this||{},n=t.call?t(e.p):t;return i_(n.unshift?n.raw?o_(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,n_(e.target),e.g,e.o,e.k)}let pb,rp,sp;ad.bind({g:1});let Zn=ad.bind({k:1});function l_(t,e,n,r){kr.p=e,pb=t,rp=n,sp=r}function Yr(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let l=Object.assign({},i),a=l.className||s.className;n.p=Object.assign({theme:rp&&rp()},l),n.o=/ *go\d+/.test(a),l.className=ad.apply(n,r)+(a?" "+a:"");let c=t;return t[0]&&(c=l.as||t,delete l.as),sp&&c[0]&&sp(l),pb(c,l)}return s}}var a_=t=>typeof t=="function",Uc=(t,e)=>a_(t)?t(e):t,c_=(()=>{let t=0;return()=>(++t).toString()})(),mb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),u_=20,rc=new Map,d_=1e3,yy=t=>{if(rc.has(t))return;let e=setTimeout(()=>{rc.delete(t),Us({type:4,toastId:t})},d_);rc.set(t,e)},f_=t=>{let e=rc.get(t);e&&clearTimeout(e)},ip=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,u_)};case 1:return e.toast.id&&f_(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return t.toasts.find(i=>i.id===n.id)?ip(t,{type:1,toast:n}):ip(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?yy(r):t.toasts.forEach(i=>{yy(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},sc=[],ic={toasts:[],pausedAt:void 0},Us=t=>{ic=ip(ic,t),sc.forEach(e=>{e(ic)})},h_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},p_=(t={})=>{let[e,n]=x.useState(ic);x.useEffect(()=>(sc.push(n),()=>{let s=sc.indexOf(n);s>-1&&sc.splice(s,1)}),[e]);let r=e.toasts.map(s=>{var i,o;return{...t,...t[s.type],...s,duration:s.duration||((i=t[s.type])==null?void 0:i.duration)||(t==null?void 0:t.duration)||h_[s.type],style:{...t.style,...(o=t[s.type])==null?void 0:o.style,...s.style}}});return{...e,toasts:r}},m_=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||c_()}),Jl=t=>(e,n)=>{let r=m_(e,t,n);return Us({type:2,toast:r}),r.id},Pt=(t,e)=>Jl("blank")(t,e);Pt.error=Jl("error");Pt.success=Jl("success");Pt.loading=Jl("loading");Pt.custom=Jl("custom");Pt.dismiss=t=>{Us({type:3,toastId:t})};Pt.remove=t=>Us({type:4,toastId:t});Pt.promise=(t,e,n)=>{let r=Pt.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(s=>(Pt.success(Uc(e.success,s),{id:r,...n,...n==null?void 0:n.success}),s)).catch(s=>{Pt.error(Uc(e.error,s),{id:r,...n,...n==null?void 0:n.error})}),t};var g_=(t,e)=>{Us({type:1,toast:{id:t,height:e}})},y_=()=>{Us({type:5,time:Date.now()})},v_=t=>{let{toasts:e,pausedAt:n}=p_(t);x.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let a=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(a<0){l.visible&&Pt.dismiss(l.id);return}return setTimeout(()=>Pt.dismiss(l.id),a)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=x.useCallback(()=>{n&&Us({type:6,time:Date.now()})},[n]),s=x.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:a=8,defaultPosition:c}=o||{},u=e.filter(h=>(h.position||c)===(i.position||c)&&h.height),d=u.findIndex(h=>h.id===i.id),f=u.filter((h,m)=>m<d&&h.visible).length;return u.filter(h=>h.visible).slice(...l?[f+1]:[0,f]).reduce((h,m)=>h+(m.height||0)+a,0)},[e]);return{toasts:e,handlers:{updateHeight:g_,startPause:y_,endPause:r,calculateOffset:s}}},w_=Zn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,x_=Zn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,b_=Zn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,k_=Yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${w_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${x_} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${b_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,S_=Zn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,E_=Yr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${S_} 1s linear infinite;
`,C_=Zn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,N_=Zn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,T_=Yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${C_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${N_} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,O_=Yr("div")`
  position: absolute;
`,__=Yr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,M_=Zn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,A_=Yr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${M_} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,P_=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(A_,null,e):e:n==="blank"?null:x.createElement(__,null,x.createElement(E_,{...r}),n!=="loading"&&x.createElement(O_,null,n==="error"?x.createElement(k_,{...r}):x.createElement(T_,{...r})))},j_=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,R_=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,D_="0%{opacity:0;} 100%{opacity:1;}",I_="0%{opacity:1;} 100%{opacity:0;}",L_=Yr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$_=Yr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,F_=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=mb()?[D_,I_]:[j_(n),R_(n)];return{animation:e?`${Zn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Zn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},z_=x.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?F_(t.position||e||"top-center",t.visible):{opacity:0},i=x.createElement(P_,{toast:t}),o=x.createElement($_,{...t.ariaProps},Uc(t.message,t));return x.createElement(L_,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):x.createElement(x.Fragment,null,i,o))});l_(x.createElement);var B_=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=x.useCallback(o=>{if(o){let l=()=>{let a=o.getBoundingClientRect().height;r(t,a)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:i,className:e,style:n},s)},U_=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},H_=ad`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Oa=16,V_=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:a}=v_(n);return x.createElement("div",{style:{position:"fixed",zIndex:9999,top:Oa,left:Oa,right:Oa,bottom:Oa,pointerEvents:"none",...i},className:o,onMouseEnter:a.startPause,onMouseLeave:a.endPause},l.map(c=>{let u=c.position||e,d=a.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),f=U_(u,d);return x.createElement(B_,{id:c.id,key:c.id,onHeightUpdate:a.updateHeight,className:c.visible?H_:"",style:f},c.type==="custom"?Uc(c.message,c):s?s(c):x.createElement(z_,{toast:c,position:u}))}))},Ce=Pt;const W_="modulepreload",q_=function(t){return"/"+t},vy={},Bi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=q_(a),a in vy)return;vy[a]=!0;const c=a.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":W_,c||(d.as="script"),d.crossOrigin="",d.href=a,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},K_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Bi(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Qm extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class J_ extends Qm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class G_ extends Qm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Q_ extends Qm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var op;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(op||(op={}));var Y_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class X_{constructor(e,{headers:n={},customFetch:r,region:s=op.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=K_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Y_(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:a}=n;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:c}).catch(m=>{throw new J_(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new G_(u);if(!u.ok)throw new Q_(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield u.json():f==="application/octet-stream"?h=yield u.blob():f==="text/event-stream"?h=u:f==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var gt={},Ym={},cd={},Gl={},ud={},dd={},Z_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ui=Z_();const eM=Ui.fetch,gb=Ui.fetch.bind(Ui),yb=Ui.Headers,tM=Ui.Request,nM=Ui.Response,to=Object.freeze(Object.defineProperty({__proto__:null,Headers:yb,Request:tM,Response:nM,default:gb,fetch:eM},Symbol.toStringTag,{value:"Module"})),rM=iE(to);var fd={};Object.defineProperty(fd,"__esModule",{value:!0});class sM extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}fd.default=sM;var vb=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dd,"__esModule",{value:!0});const iM=vb(rM),oM=vb(fd);let lM=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=iM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let c=null,u=null,d=null,f=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{c=JSON.parse(g),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,h="OK")}catch{i.status===404&&g===""?(f=204,h="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,f=200,h="OK"),c&&this.shouldThrowOnError)throw new oM.default(c)}return{error:c,data:u,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};dd.default=lM;var aM=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ud,"__esModule",{value:!0});const cM=aM(dd);let uM=class extends cM.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ud.default=uM;var dM=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gl,"__esModule",{value:!0});const fM=dM(ud);let hM=class extends fM.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Gl.default=hM;var pM=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cd,"__esModule",{value:!0});const So=pM(Gl);let mM=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new So.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new So.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new So.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new So.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new So.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cd.default=mM;var hd={},pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.version=void 0;pd.version="0.0.0-automated";Object.defineProperty(hd,"__esModule",{value:!0});hd.DEFAULT_HEADERS=void 0;const gM=pd;hd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${gM.version}`};var wb=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ym,"__esModule",{value:!0});const yM=wb(cd),vM=wb(Gl),wM=hd;let xM=class xb{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},wM.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new yM.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{l.searchParams.append(u,d)})):(o="POST",a=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new vM.default({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};Ym.default=xM;var no=Xt&&Xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gt,"__esModule",{value:!0});gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const bb=no(Ym);gt.PostgrestClient=bb.default;const kb=no(cd);gt.PostgrestQueryBuilder=kb.default;const Sb=no(Gl);gt.PostgrestFilterBuilder=Sb.default;const Eb=no(ud);gt.PostgrestTransformBuilder=Eb.default;const Cb=no(dd);gt.PostgrestBuilder=Cb.default;const Nb=no(fd);gt.PostgrestError=Nb.default;var bM=gt.default={PostgrestClient:bb.default,PostgrestQueryBuilder:kb.default,PostgrestFilterBuilder:Sb.default,PostgrestTransformBuilder:Eb.default,PostgrestBuilder:Cb.default,PostgrestError:Nb.default};const{PostgrestClient:kM,PostgrestQueryBuilder:f5,PostgrestFilterBuilder:h5,PostgrestTransformBuilder:p5,PostgrestBuilder:m5}=bM,SM="2.10.7",EM={"X-Client-Info":`realtime-js/${SM}`},CM="1.0.0",Tb=1e4,NM=1e3;var Ti;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ti||(Ti={}));var Tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tt||(Tt={}));var un;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(un||(un={}));var lp;(function(t){t.websocket="websocket"})(lp||(lp={}));var as;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(as||(as={}));class TM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const a=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}class Ob{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const wy=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=OM(o,t,e,s),i),{})},OM=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?_b(i,o):ap(o)},_b=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return PM(e,n)}switch(t){case re.bool:return _M(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return MM(e);case re.json:case re.jsonb:return AM(e);case re.timestamp:return jM(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return ap(e);default:return ap(e)}},ap=t=>t,_M=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},MM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},AM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},PM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>_b(e,l))}return t},jM=t=>typeof t=="string"?t.replace(" ","T"):t,Mb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class vf{constructor(e,n,r={},s=Tb){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xy||(xy={}));class qo{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qo.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=qo.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qo.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(i,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(v=>v.presence_ref),h=d.map(v=>v.presence_ref),m=u.filter(v=>h.indexOf(v.presence_ref)<0),g=d.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(l[c]=m),g.length>0&&(a[c]=g)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const d=e[l].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[l].unshift(...f)}r(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[l]=c,s(l,c,a),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var by;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(by||(by={}));var ky;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ky||(ky={}));var Sy;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Sy||(Sy={}));class Xm{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new vf(this,un.join,this.params,this.timeout),this.rejoinTimer=new Ob(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new qo(this),this.broadcastEndpointURL=Mb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const a={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,m=[];for(let g=0;g<h;g++){const v=f[g],{filter:{event:y,schema:w,table:b,filter:k}}=v,E=u&&u[g];if(E&&E.event===y&&E.schema===w&&E.table===b&&E.filter===k)m.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const a=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=a.body)===null||s===void 0?void 0:s.cancel()),a.ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new vf(this,un.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new vf(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=un;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var m,g,v;return((m=h.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=h.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var m,g,v,y,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const k=h.id,E=(m=h.filter)===null||m===void 0?void 0:m.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(w=(y=h==null?void 0:h.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:v,commit_timestamp:y,type:w,errors:b}=m;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(m))}h.callback(f,r)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Xm.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(un.close,{},e)}_onError(e){this._on(un.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=wy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=wy(e.columns,e.old_record)),n}}const RM=()=>{},DM=typeof WebSocket<"u",IM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LM{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=EM,this.params={},this.timeout=Tb,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=RM,this.conn=null,this.sendBuffer=[],this.serializer=new TM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Bi(async()=>{const{default:a}=await Promise.resolve().then(()=>to);return{default:a}},void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${lp.websocket}`,this.httpEndpoint=Mb(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ob(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(DM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new $M(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Bi(async()=>{const{default:e}=await import("./browser-DshU_sBd.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ti.connecting:return as.Connecting;case Ti.open:return as.Open;case Ti.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}channel(e,n={config:{}}){const r=new Xm(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(un.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CM}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(un.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(NM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([IM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class $M{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ti.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _e(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class FM extends Zm{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class cp extends Zm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var zM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Ab=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Bi(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},BM=()=>zM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bi(()=>Promise.resolve().then(()=>to),void 0)).Response:Response}),up=t=>{if(Array.isArray(t))return t.map(n=>up(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=up(r)}),e};var Hs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const wf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),UM=(t,e,n)=>Hs(void 0,void 0,void 0,function*(){const r=yield BM();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new FM(wf(s),t.status||500))}).catch(s=>{e(new cp(wf(s),s))}):e(new cp(wf(t),t))}),HM=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ql(t,e,n,r,s,i){return Hs(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,HM(e,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>UM(a,l,r))})})}function Hc(t,e,n,r){return Hs(this,void 0,void 0,function*(){return Ql(t,"GET",e,n,r)})}function pr(t,e,n,r,s){return Hs(this,void 0,void 0,function*(){return Ql(t,"POST",e,r,s,n)})}function VM(t,e,n,r,s){return Hs(this,void 0,void 0,function*(){return Ql(t,"PUT",e,r,s,n)})}function WM(t,e,n,r){return Hs(this,void 0,void 0,function*(){return Ql(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Pb(t,e,n,r,s){return Hs(this,void 0,void 0,function*(){return Ql(t,"DELETE",e,r,s,n)})}var pt=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const qM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ey={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KM{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Ab(s)}uploadOrUpdate(e,n,r,s){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ey),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(_e(i))return{data:null,error:i};throw i}})}upload(e,n,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const c=Object.assign({upsert:Ey.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),f=yield d.json();return d.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(_e(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Zm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}update(e,n,r){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return pt(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}copy(e,n,r){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return pt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return pt(this,void 0,void 0,function*(){try{const s=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}download(e,n){return pt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Hc(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(_e(l))return{data:null,error:l};throw l}})}info(e){return pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Hc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:up(r),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}exists(e){return pt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield WM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(_e(r)&&r instanceof cp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield Pb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}list(e,n,r){return pt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},qM),n),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const JM="2.7.1",GM={"X-Client-Info":`storage-js/${JM}`};var Xs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class QM{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},GM),n),this.fetch=Ab(r)}listBuckets(){return Xs(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_e(e))return{data:null,error:e};throw e}})}getBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Xs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Xs(this,void 0,void 0,function*(){try{return{data:yield VM(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield Pb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}})}}class YM extends QM{constructor(e,n={},r){super(e,n,r)}from(e){return new KM(this.url,this.headers,e,this.fetch)}}const XM="2.46.1";let jo="";typeof Deno<"u"?jo="deno":typeof document<"u"?jo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jo="react-native":jo="node";const ZM={"X-Client-Info":`supabase-js-${jo}/${XM}`},eA={headers:ZM},tA={schema:"public"},nA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rA={};var sA=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const iA=t=>{let e;return t?e=t:typeof fetch>"u"?e=gb:e=fetch,(...n)=>e(...n)},oA=()=>typeof Headers>"u"?yb:Headers,lA=(t,e,n)=>{const r=iA(n),s=oA();return(i,o)=>sA(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var aA=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};function cA(t){return t.replace(/\/$/,"")}function uA(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:l,realtime:a,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>aA(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const jb="2.65.1",dA="http://localhost:9999",fA="supabase.auth.token",hA={"X-Client-Info":`gotrue-js/${jb}`},Cy=10,dp="X-Supabase-Api-Version",Rb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function pA(t){return Math.round(Date.now()/1e3)+t}function mA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ln=()=>typeof document<"u",ns={tested:!1,writable:!1},Ko=()=>{if(!ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function xf(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Db=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Bi(async()=>{const{default:r}=await Promise.resolve().then(()=>to);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},gA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ib=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},_a=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ma=async(t,e)=>{await t.removeItem(e)};function yA(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,o,l,a,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|l>>4,s=(l&15)<<4|a>>2,i=(a&3)<<6|c,n=n+String.fromCharCode(r),a!=64&&s!=0&&(n=n+String.fromCharCode(s)),c!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class md{constructor(){this.promise=new md.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}md.promiseConstructor=Promise;function Ny(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(yA(r))}async function vA(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wA(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function xA(t){return("0"+t.toString(16)).substr(-2)}function bA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,xA).join("")}async function kA(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function SA(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function EA(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await kA(t);return SA(n)}async function Zs(t,e,n=!1){const r=bA();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ib(t,`${e}-code-verifier`,s);const i=await EA(r);return[i,r===i?"plain":"s256"]}const CA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NA(t){const e=t.headers.get(dp);if(!e||!e.match(CA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class eg extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function W(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class TA extends eg{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function OA(t){return W(t)&&t.name==="AuthApiError"}class Lb extends eg{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Vs extends eg{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class cr extends Vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _A(t){return W(t)&&t.name==="AuthSessionMissingError"}class bf extends Vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Aa extends Vs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pa extends Vs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ty extends Vs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fp extends Vs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function kf(t){return W(t)&&t.name==="AuthRetryableFetchError"}class Oy extends Vs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var MA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AA=[502,503,504];async function _y(t){var e;if(!gA(t))throw new fp(is(t),0);if(AA.includes(t.status))throw new fp(is(t),t.status);let n;try{n=await t.json()}catch(i){throw new Lb(is(i),i)}let r;const s=NA(t);if(s&&s.getTime()>=Rb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Oy(is(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Oy(is(n),t.status,n.weak_password.reasons);throw new TA(is(n),t.status||500,r)}const PA=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function G(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[dp]||(i[dp]=Rb["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await jA(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function jA(t,e,n,r,s,i){const o=PA(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new fp(is(a),0)}if(l.ok||await _y(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await _y(a)}}function ur(t){var e;let n=null;LA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=pA(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function My(t){const e=ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Sr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function RA(t){return{data:t,error:null}}function DA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=MA(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function IA(t){return t}function LA(t){return t.access_token&&t.refresh_token&&t.expires_in}var $A=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class FA{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Db(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Sr})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=$A(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:DA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Sr})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:IA});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return h.length>0&&(h.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(W(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Sr})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Sr})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Sr})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}}const zA={getItem:t=>Ko()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ko()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ko()&&globalThis.localStorage.removeItem(t)}};function Ay(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function BA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ei={debug:!!(globalThis&&Ko()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $b extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class UA extends $b{}async function HA(t,e,n){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new UA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ei.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}BA();const VA={url:dA,storageKey:fA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Eo=30*1e3,Py=3;async function jy(t,e,n){return await n()}class El{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=El.nextInstanceID,El.nextInstanceID+=1,this.instanceID>0&&ln()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},VA),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new FA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Db(s.fetch),this.lock=s.lock||jy,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ln()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=HA:this.lock=jy,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ko()?this.storage=zA:(this.memoryStorage={},this.storage=Ay(this.memoryStorage)):(this.memoryStorage={},this.storage=Ay(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ln()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:s,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return W(e)?{error:e}:{error:new Lb("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ur}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(W(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Zs(this.storage,this.storageKey)),i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},xform:ur})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ur})}else throw new Aa("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(W(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:My})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:My})}else throw new Aa("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await _a(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ur});if(await Ma(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new bf}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(W(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ur}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new bf}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Zs(this.storage,this.storageKey));const{error:d}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Aa("You must provide either an email or phone number.")}catch(l){if(W(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ur});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(W(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Zs(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:RA})}catch(i){if(W(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new cr;const{error:s}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(W(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await G(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await G(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Aa("You must provide either an email or phone number and a type")}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await _a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Sr}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cr}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Sr})})}catch(n){if(W(n))return _A(n)&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new cr;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Zs(this.storage,this.storageKey));const{data:c,error:u}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Sr});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Ny(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const o=Ny(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(W(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new cr;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(W(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!ln())throw new Pa("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Pa("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ty("Not a valid PKCE flow url.");const n=xf(window.location.href);if(e){if(!n.code)throw new Ty("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:w.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Pa(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=n;if(!i||!l||!o||!c)throw new Pa("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(l);let f=u+d;a&&(f=parseInt(a));const h=f-u;h*1e3<=Eo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=f-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:n.type},error:null}}catch(n){if(W(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=xf(window.location.href);return!!(ln()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=xf(window.location.href),n=await _a(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(OA(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=mA(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Zs(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(W(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,c,u;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ln()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(W(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wA(async s=>(s>0&&await vA(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ur})),(s,i)=>{const o=200*Math.pow(2,s);return i&&kf(i)&&Date.now()+o-r<Eo})}catch(r){if(this._debug(n,"error",r),W(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ln()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await _a(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Cy;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Cy}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),kf(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new md;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new cr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),W(i)){const o={session:null,error:i};return kf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ib(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ma(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Eo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Eo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Eo}ms, refresh threshold is ${Py} ticks`),s<=Py&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $b)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Zs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}}El.nextInstanceID=0;const WA=El;class qA extends WA{constructor(e){super(e)}}var KA=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class JA{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=cA(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:tA,realtime:rA,auth:Object.assign(Object.assign({},nA),{storageKey:a}),global:eA},u=uA(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=lA(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new kM(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new X_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new YM(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return KA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:a},c,u){var d;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qA({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:a,fetch:u,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new LM(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GA=(t,e,n)=>new JA(t,e,n),QA="https://kxxjvioactifagifcxnf.supabase.co",YA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4eGp2aW9hY3RpZmFnaWZjeG5mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE0NDkxMTEsImV4cCI6MjA0NzAyNTExMX0.InHskoumcGnZDLiZrqKVNdMcEbOmVLbKO-IrvZEQ3PA",Xe=GA(QA,YA),Fb=x.createContext(void 0),XA=({children:t})=>{const[e,n]=x.useState(!1),[r,s]=x.useState(null);x.useEffect(()=>{Xe.auth.getSession().then(({data:{session:c}})=>{n(!!c),s((c==null?void 0:c.user)??null)});const{data:{subscription:a}}=Xe.auth.onAuthStateChange((c,u)=>{n(!!u),s((u==null?void 0:u.user)??null)});return()=>a.unsubscribe()},[]);const i=async(a,c,u)=>{try{const{data:d,error:f}=await Xe.auth.signUp({email:a,password:c,options:{data:{name:u}}});if(f)return{error:f.message};if(d.user){const{error:h}=await Xe.from("profiles").insert([{id:d.user.id,email:d.user.email,name:u,topics:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(h)return console.error("Error creating profile:",h),{error:"Failed to create user profile"}}return{}}catch(d){return console.error("Registration error:",d),{error:"An unexpected error occurred"}}},o=async(a,c)=>{var u;try{const{data:d,error:f}=await Xe.auth.signInWithPassword({email:a,password:c});return f?{error:f.message}:(n(!!d.session),s(((u=d.session)==null?void 0:u.user)??null),{})}catch(d){return console.error("Login error:",d),{error:"An unexpected error occurred"}}},l=async()=>{const{error:a}=await Xe.auth.signOut();a&&console.error("Logout error:",a),n(!1),s(null)};return p.jsx(Fb.Provider,{value:{isAuthenticated:e,user:r,login:o,register:i,logout:l},children:t})},Ws=()=>{const t=x.useContext(Fb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},zb=x.createContext(void 0),ZA=({children:t})=>{const{user:e}=Ws(),[n,r]=x.useState(null),[s,i]=x.useState(!0),o=async()=>{if(!e){r(null),i(!1);return}try{const{data:a,error:c}=await Xe.from("profiles").select("*").eq("id",e.id).single();if(c)throw c;r(a)}catch(a){console.error("Error fetching profile:",a),r(null)}finally{i(!1)}},l=async()=>{i(!0),await o()};return x.useEffect(()=>{o()},[e]),p.jsx(zb.Provider,{value:{profile:n,isLoading:s,refreshProfile:l},children:t})},tg=()=>{const t=x.useContext(zb);if(t===void 0)throw new Error("useProfile must be used within a ProfileProvider");return t},Bb=()=>{const t=()=>{},e=()=>{};return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:t,className:"w-full inline-flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[p.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),p.jsxs("button",{onClick:e,className:"w-full inline-flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[p.jsx("svg",{className:"h-5 w-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook"]})]})},eP=({onRegister:t,onForgotPassword:e})=>{const[n,r]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState(""),[a,c]=T.useState(!1),{login:u}=Ws(),{profile:d}=tg(),f=nd(),h=async m=>{if(m.preventDefault(),l(""),c(!0),!n||!s){l("Please fill in all fields"),c(!1);return}try{const{error:g}=await u(n,s);if(g){l(g);return}Ce.success("Successfully logged in!"),f(d?"/dashboard":"/onboarding")}catch{l("An unexpected error occurred")}finally{c(!1)}};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Sign in to your account"})]}),p.jsx(Bb,{}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o&&p.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[p.jsx(rd,{className:"h-5 w-5"}),p.jsx("span",{children:o})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Sl,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"email",type:"email",value:n,onChange:m=>r(m.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Hx,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"password",type:"password",value:s,onChange:m=>i(m.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]})]}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("button",{type:"button",onClick:e,className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})}),p.jsx("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:a?"Signing in...":"Sign in"})]}),p.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",p.jsx("button",{onClick:t,className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})]})};async function tP(t,e,n){try{const{data:r,error:s}=await Xe.auth.signUp({email:t,password:e,options:{data:{name:n},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(s)throw s;return{data:r,error:null}}catch(r){return console.error("Error during sign up:",r),{data:null,error:r instanceof Error?r.message:"An error occurred during sign up"}}}const nP=({onLogin:t})=>{const[e,n]=T.useState(""),[r,s]=T.useState(""),[i,o]=T.useState(""),[l,a]=T.useState(""),[c,u]=T.useState(!1),d=async f=>{if(f.preventDefault(),a(""),u(!0),!e||!r||!i){a("Please fill in all fields"),u(!1);return}try{const{error:h}=await tP(r,i,e);if(h){a(h);return}Ce.success("Please check your email to verify your account"),t()}catch{a("Failed to create account")}finally{u(!1)}};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create an account"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Start your free trial today"})]}),p.jsx(Bb,{}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),p.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l&&p.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[p.jsx(rd,{className:"h-5 w-5"}),p.jsx("span",{children:l})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full name"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(sT,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"name",type:"text",value:e,onChange:f=>n(f.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Sl,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"email",type:"email",value:r,onChange:f=>s(f.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Hx,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"password",type:"password",value:i,onChange:f=>o(f.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]})]}),p.jsx("button",{type:"submit",disabled:c,className:"w-full py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Creating account...":"Create account"})]}),p.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",p.jsx("button",{onClick:t,className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})]})},rP=({onBack:t})=>{const[e,n]=T.useState(""),[r,s]=T.useState(""),[i,o]=T.useState(!1),l=async a=>{if(a.preventDefault(),s(""),!e){s("Please enter your email address");return}try{o(!0),Ce.success("Password reset instructions sent!")}catch{s("Failed to send reset instructions")}};return i?p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:p.jsx(Sl,{className:"h-6 w-6 text-green-600"})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Check your email"}),p.jsx("p",{className:"text-gray-600",children:"We have sent password reset instructions to your email address."}),p.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-500 font-medium",children:"Back to sign in"})]}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Reset password"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Enter your email address and we'll send you instructions to reset your password."})]}),p.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r&&p.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[p.jsx(rd,{className:"h-5 w-5"}),p.jsx("span",{children:r})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Sl,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{id:"email",type:"email",value:e,onChange:a=>n(a.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]})]}),p.jsx("button",{type:"submit",className:"w-full py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Send reset instructions"})]}),p.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-500",children:[p.jsx(N2,{className:"h-4 w-4 mr-2"}),"Back to sign in"]})]})},sP=({isOpen:t,onClose:e})=>{const[n,r]=T.useState("login"),s=i=>{r(i)};return p.jsx(yf,{show:t,as:T.Fragment,children:p.jsx(py,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:e,children:p.jsxs("div",{className:"min-h-screen px-4 text-center",children:[p.jsx(yf.Child,{as:T.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:p.jsx(py.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40"})}),p.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:""}),p.jsx(yf.Child,{as:T.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:p.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[p.jsx("div",{className:"absolute right-4 top-4",children:p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:p.jsx(Vm,{className:"h-5 w-5"})})}),n==="login"&&p.jsx(eP,{onRegister:()=>s("register"),onForgotPassword:()=>s("reset-password")}),n==="register"&&p.jsx(nP,{onLogin:()=>s("login")}),n==="reset-password"&&p.jsx(rP,{onBack:()=>s("login")})]})})]})})})},iP=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(!1),s=[{name:"Solutions",href:"#features"},{name:"Process",href:"#process"},{name:"Pricing",href:"#pricing"},{name:"Integrations",href:"#integrations"},{name:"FAQs",href:"#faqs"}];return p.jsxs(p.Fragment,{children:[p.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 border-b border-gray-100",children:p.jsxs("nav",{className:"container mx-auto px-6 py-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Vl,{className:"h-8 w-8 text-blue-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Auto Newsletter"})]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[p.jsx("div",{className:"hidden md:flex items-center space-x-6",children:s.map(i=>p.jsx("a",{href:i.href,className:"text-gray-600 hover:text-blue-600 transition-colors",children:i.name},i.name))}),p.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition-colors",children:"Log In"})]}),p.jsx("button",{className:"md:hidden",onClick:()=>e(!t),children:t?p.jsx(Vm,{className:"h-6 w-6 text-gray-600"}):p.jsx(q2,{className:"h-6 w-6 text-gray-600"})})]}),t&&p.jsxs("div",{className:"md:hidden mt-4 pb-4",children:[s.map(i=>p.jsx("a",{href:i.href,className:"block py-2 text-gray-600 hover:text-blue-600 transition-colors",children:i.name},i.name)),p.jsx("button",{onClick:()=>{e(!1),r(!0)},className:"mt-4 w-full bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition-colors",children:"Log In"})]})]})}),p.jsx(sP,{isOpen:n,onClose:()=>r(!1)})]})},oP=()=>p.jsx("div",{className:"relative bg-gradient-to-b from-blue-50 to-white pt-32 pb-20",children:p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[p.jsxs("div",{className:"lg:w-1/2 lg:pr-12",children:[p.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:["Automate Your Newsletter Creation"," ",p.jsx("span",{className:"text-blue-600",children:"Effortlessly"})]}),p.jsx("p",{className:"mt-6 text-xl text-gray-600 leading-relaxed",children:"Save time and engage your audience with AI-driven newsletters tailored to your industry. Let automation work for you while you focus on what matters most."}),p.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[p.jsxs("button",{className:"flex items-center justify-center px-8 py-4 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",children:["Start Your Free Trial",p.jsx(T2,{className:"ml-2 h-5 w-5"})]}),p.jsxs("button",{className:"flex items-center justify-center px-8 py-4 bg-white text-gray-700 rounded-full border border-gray-200 hover:bg-gray-50 transition-colors",children:[p.jsx(G2,{className:"mr-2 h-5 w-5"}),"Watch Demo"]})]})]}),p.jsx("div",{className:"lg:w-1/2 mt-12 lg:mt-0",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?auto=format&fit=crop&q=80",alt:"Newsletter Automation",className:"rounded-lg shadow-2xl"})})]})})}),lP=[{icon:M2,title:"Industry Selection",description:"Personalize content by selecting your industry for targeted newsletters."},{icon:Vl,title:"Automated Content Curation",description:"Fetch relevant articles and media stories instantly with smart algorithms."},{icon:_2,title:"AI-Powered Creation",description:"Leverage advanced AI to craft engaging newsletters that resonate with your audience."},{icon:eT,title:"Seamless Integration",description:"Publish directly to your favorite email marketing tools without friction."},{icon:j2,title:"Time-Saving Automation",description:"Automate your workflow and focus on strategic tasks that matter most."}],aP=()=>p.jsx("section",{id:"features",className:"py-20 bg-white",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Why Choose Auto Newsletter?"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Powerful features to transform your newsletter workflow"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",children:lP.map((t,e)=>p.jsxs("div",{className:"p-8 rounded-2xl bg-white border border-gray-100 hover:shadow-lg transition-shadow group",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center mb-6 group-hover:bg-blue-600 transition-colors",children:p.jsx(t.icon,{className:"h-6 w-6 text-blue-600 group-hover:text-white transition-colors"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]},e))})]})}),Ry=[{icon:U2,title:"Select Your Industry",description:"Choose from a wide range of industries to tailor content perfectly for your audience."},{icon:D2,title:"Curate Content",description:"Auto-fetch articles and content relevant to your specific industry and audience."},{icon:qx,title:"Customize with AI",description:"Use AI suggestions to enhance your newsletter content and engagement."},{icon:Z2,title:"Publish & Send",description:"Distribute through your preferred channels with just one click."}],cP=()=>p.jsx("section",{className:"py-20 bg-gray-50",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"How It Works"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Four simple steps to automated newsletter success"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Ry.map((t,e)=>p.jsxs("div",{className:"relative",children:[e<Ry.length-1&&p.jsx("div",{className:"hidden lg:block absolute top-1/4 right-0 w-full h-0.5 bg-blue-100"}),p.jsxs("div",{className:"relative bg-white p-8 rounded-2xl border border-gray-100 hover:shadow-lg transition-shadow z-10",children:[p.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center mb-6",children:p.jsx(t.icon,{className:"h-6 w-6 text-blue-600"})}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]})]},e))}),p.jsx("div",{className:"text-center mt-12",children:p.jsx("button",{className:"px-8 py-4 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",children:"Start Now"})})]})}),uP=[{quote:"Auto Newsletter has revolutionized our marketing efforts! The AI-powered content suggestions are spot-on, and we've seen a 40% increase in engagement.",author:"Sarah L.",position:"Marketing Director",company:"Tech Solutions",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=150&h=150"},{quote:"We've saved countless hours and increased engagement by 50%. The industry-specific content curation is exactly what we needed.",author:"Mark P.",position:"Owner",company:"Fresh Foods",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&q=80&w=150&h=150"}],dP=()=>p.jsx("section",{className:"py-20 bg-white",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Hear from Our Happy Clients"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Success stories from businesses like yours"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:uP.map((t,e)=>p.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 hover:shadow-lg transition-shadow",children:[p.jsx(Y2,{className:"h-8 w-8 text-blue-600 mb-6"}),p.jsxs("p",{className:"text-lg text-gray-700 mb-6 italic",children:['"',t.quote,'"']}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:t.image,alt:t.author,className:"w-12 h-12 rounded-full object-cover"}),p.jsxs("div",{className:"ml-4",children:[p.jsx("p",{className:"font-semibold text-gray-900",children:t.author}),p.jsxs("p",{className:"text-sm text-gray-600",children:[t.position," at ",t.company]})]})]})]},e))}),p.jsx("div",{className:"mt-12 text-center",children:p.jsxs("a",{href:"#case-studies",className:"text-blue-600 hover:text-blue-700 font-medium inline-flex items-center",children:["View Case Studies",p.jsx("span",{className:"ml-2",children:""})]})})]})}),fP=[{name:"Basic",price:"$29",period:"/month",features:["Up to 2 newsletters per month","Access to basic templates","Email support","Basic analytics"],cta:"Select Basic",popular:!1},{name:"Pro",price:"$59",period:"/month",features:["Up to 5 newsletters per month","Advanced templates","Priority email support","Integration with email marketing tools","Advanced analytics","Custom branding"],cta:"Select Pro",popular:!0},{name:"Enterprise",price:"Custom",period:"",features:["Unlimited newsletters","Custom templates","Dedicated account manager","API access","White-label solution","Custom integrations"],cta:"Contact Sales",popular:!1}],hP=()=>p.jsx("section",{id:"pricing",className:"py-20 bg-gray-50",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Choose the Plan That Fits Your Needs"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"14-day free trial with all plans. No credit card required."})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:fP.map(t=>p.jsxs("div",{className:`relative bg-white rounded-2xl border ${t.popular?"border-blue-600":"border-gray-100"} p-8 hover:shadow-lg transition-shadow`,children:[t.popular&&p.jsx("span",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.name}),p.jsxs("div",{className:"flex items-center justify-center mb-4",children:[p.jsx("span",{className:"text-4xl font-bold text-gray-900",children:t.price}),p.jsx("span",{className:"text-gray-600 ml-2",children:t.period})]})]}),p.jsx("ul",{className:"space-y-4 mb-8",children:t.features.map((e,n)=>p.jsxs("li",{className:"flex items-center text-gray-700",children:[p.jsx(Hm,{className:"h-5 w-5 text-blue-600 mr-3 flex-shrink-0"}),e]},n))}),p.jsx("button",{className:`w-full py-3 px-6 rounded-full font-medium transition-colors ${t.popular?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:t.cta})]},t.name))}),p.jsxs("div",{className:"mt-12 text-center text-gray-600",children:["Looking for different features?"," ",p.jsx("a",{href:"#contact",className:"text-blue-600 hover:text-blue-700",children:"Contact us"})]})]})}),pP=[{name:"Mailchimp",description:"Seamlessly sync your newsletters with Mailchimp campaigns.",icon:""},{name:"Constant Contact",description:"Direct integration with Constant Contact for easy distribution.",icon:""},{name:"Sendinblue",description:"Automatically push content to your Sendinblue account.",icon:""},{name:"HubSpot",description:"Connect with HubSpot for advanced marketing automation.",icon:""},{name:"Campaign Monitor",description:"Streamline your workflow with Campaign Monitor integration.",icon:""},{name:"Custom API",description:"Build custom integrations with our robust API.",icon:""}],mP=()=>p.jsx("section",{className:"py-20 bg-white",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Seamless Integration with Your Favorite Tools"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Connect with leading email marketing platforms in just a few clicks"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:pP.map(t=>p.jsxs("div",{className:"p-6 bg-white rounded-xl border border-gray-100 hover:shadow-lg transition-shadow",children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx("span",{className:"text-2xl mr-3",children:t.icon}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.name})]}),p.jsx("p",{className:"text-gray-600",children:t.description})]},t.name))}),p.jsx("div",{className:"mt-16 text-center",children:p.jsxs("div",{className:"inline-flex items-center p-4 bg-blue-50 rounded-2xl",children:[p.jsx(iT,{className:"h-6 w-6 text-blue-600 mr-3"}),p.jsxs("span",{className:"text-gray-700",children:["Need a custom integration?"," ",p.jsx("a",{href:"#contact",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Let's talk"})]})]})})]})}),gP=[{question:"How does the AI personalize my newsletters?",answer:"Our AI analyzes your selected industry and audience to suggest relevant content and phrasing. It learns from successful newsletters in your industry to provide tailored recommendations that resonate with your readers."},{question:"Can I edit the AI-generated content?",answer:"Absolutely! You have full control to edit and customize all content. Our AI serves as a powerful assistant, providing suggestions while leaving you in complete control of the final output."},{question:"What email marketing tools do you support?",answer:"We support all major platforms including Mailchimp, Constant Contact, Sendinblue, HubSpot, Campaign Monitor, and more. We also offer API access for custom integrations."},{question:"Is there a free trial available?",answer:"Yes, we offer a 14-day free trial with no credit card required. This gives you full access to all features so you can experience the power of automated newsletter creation."},{question:"How secure is my data?",answer:"We use industry-standard encryption and security measures to protect your data. Our servers are hosted in secure facilities, and we regularly perform security audits to ensure your information stays safe."}],yP=()=>{const[t,e]=T.useState(null);return p.jsx("section",{id:"faqs",className:"py-20 bg-gray-50",children:p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Frequently Asked Questions"}),p.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Everything you need to know about Auto Newsletter"})]}),p.jsx("div",{className:"max-w-3xl mx-auto",children:gP.map((n,r)=>p.jsxs("div",{className:"mb-4",children:[p.jsxs("button",{className:"w-full flex items-center justify-between p-6 bg-white rounded-xl border border-gray-100 hover:border-blue-100 transition-colors",onClick:()=>e(t===r?null:r),children:[p.jsx("span",{className:"text-left text-lg font-medium text-gray-900",children:n.question}),t===r?p.jsx(P2,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}):p.jsx(A2,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]}),t===r&&p.jsx("div",{className:"px-6 py-4 bg-white border border-t-0 border-gray-100 rounded-b-xl",children:p.jsx("p",{className:"text-gray-600",children:n.answer})})]},r))}),p.jsx("div",{className:"text-center mt-12",children:p.jsxs("p",{className:"text-gray-600",children:["Still have questions?"," ",p.jsx("a",{href:"#contact",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact us"})]})})]})})},vP=()=>{const t=new Date().getFullYear();return p.jsx("footer",{className:"bg-gray-900 text-gray-300",children:p.jsxs("div",{className:"container mx-auto px-6 py-20",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center mb-6",children:[p.jsx(Vl,{className:"h-8 w-8 text-blue-500"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-white",children:"Auto Newsletter"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Sl,{className:"h-5 w-5 mr-3 text-blue-500"}),p.jsx("a",{href:"mailto:support@autonewsletter.com",className:"hover:text-white transition-colors",children:"support@autonewsletter.com"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(J2,{className:"h-5 w-5 mr-3 text-blue-500"}),p.jsx("a",{href:"tel:+18001234567",className:"hover:text-white transition-colors",children:"+1 (800) 123-4567"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(W2,{className:"h-5 w-5 mr-3 text-blue-500"}),p.jsx("span",{children:"123 Business Ave, Suite 100"})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold text-lg mb-6",children:"Product"}),p.jsx("ul",{className:"space-y-4",children:["Features","Pricing","Integrations","API"].map(e=>p.jsx("li",{children:p.jsx("a",{href:`#${e.toLowerCase()}`,className:"hover:text-white transition-colors",children:e})},e))})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold text-lg mb-6",children:"Company"}),p.jsx("ul",{className:"space-y-4",children:["About Us","Careers","Blog","Press"].map(e=>p.jsx("li",{children:p.jsx("a",{href:`#${e.toLowerCase()}`,className:"hover:text-white transition-colors",children:e})},e))})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-semibold text-lg mb-6",children:"Stay Updated"}),p.jsx("p",{className:"mb-4",children:"Subscribe to our newsletter for the latest updates and tips."}),p.jsxs("form",{className:"space-y-4",children:[p.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-blue-500"}),p.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Subscribe"})]})]})]}),p.jsx("div",{className:"mt-12 pt-8 border-t border-gray-800",children:p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[p.jsx("div",{className:"flex space-x-6 mb-4 md:mb-0",children:[R2,nT,B2,$2].map((e,n)=>p.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(e,{className:"h-5 w-5"})},n))}),p.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6",children:[p.jsxs("span",{children:[" ",t," Auto Newsletter. All rights reserved."]}),p.jsx("a",{href:"#privacy",className:"hover:text-white transition-colors",children:"Privacy Policy"}),p.jsx("a",{href:"#terms",className:"hover:text-white transition-colors",children:"Terms of Service"})]})]})})]})})},wP=()=>p.jsxs("div",{className:"min-h-screen",children:[p.jsx(iP,{}),p.jsxs("main",{children:[p.jsx(oP,{}),p.jsx(aP,{}),p.jsx(cP,{}),p.jsx(dP,{}),p.jsx(hP,{}),p.jsx(mP,{}),p.jsx(yP,{})]}),p.jsx(vP,{})]}),xP=["Technology","Business","Finance","Marketing","Health & Wellness","Science","Education","Entertainment","Sports","Politics","Environment","Food & Cooking","Travel","Fashion","Art & Design","Personal Development","Career Advice","Parenting","Gaming","Music"],bP=({topics:t,onChange:e})=>{const[n,r]=T.useState(""),s=l=>{t.includes(l)||e([...t,l])},i=l=>{e(t.filter(a=>a!==l))},o=l=>{l.preventDefault(),n.trim()&&!t.includes(n.trim())&&(s(n.trim()),r(""))};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"What topics does your newsletter cover?"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Select all topics that apply or add your own custom topics."})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(l=>p.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[l,p.jsx("button",{onClick:()=>i(l),className:"ml-2 inline-flex items-center",children:p.jsx(Vm,{className:"h-4 w-4"})})]},l))}),p.jsxs("form",{onSubmit:o,className:"flex gap-2",children:[p.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Add a custom topic",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),p.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Suggested Topics"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:xP.filter(l=>!t.includes(l)).map(l=>p.jsx("button",{onClick:()=>s(l),className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors",children:l},l))})]})]})},kP=({name:t,pitch:e,onNameChange:n,onPitchChange:r})=>p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tell us about your newsletter"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"This information helps us understand your newsletter's purpose and generate more relevant content."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Newsletter Name"}),p.jsx("input",{type:"text",id:"name",value:t,onChange:s=>n(s.target.value),placeholder:"e.g., Tech Weekly Digest",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"pitch",className:"block text-sm font-medium text-gray-700",children:"Newsletter Pitch"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Describe your newsletter's purpose and what readers can expect in a few sentences."}),p.jsx("textarea",{id:"pitch",value:e,onChange:s=>r(s.target.value),rows:4,placeholder:"e.g., A weekly curated digest of the latest technology trends, breaking news, and expert insights. We focus on making complex tech topics accessible to everyone, from beginners to experts.",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),SP=[{name:"Authoritative",description:"Expert, commanding, and confident tone that establishes credibility"},{name:"Conversational",description:"Friendly, approachable, and engaging like talking to a friend"},{name:"Concise",description:"Clear, brief, and straight to the point without extra fluff"},{name:"Professional",description:"Formal, business-like tone suitable for corporate communications"},{name:"Inspirational",description:"Motivating, uplifting, and encouraging tone that inspires action"}],EP=({tone:t,onChange:e})=>p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Select your newsletter's tone"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Choose the writing style that best matches your brand voice."})]}),p.jsx("div",{className:"space-y-3",children:SP.map(n=>p.jsxs("button",{onClick:()=>e(n.name),className:`w-full flex items-center p-4 border rounded-xl transition-all ${t===n.name?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-200 hover:bg-blue-50/50"}`,children:[p.jsxs("div",{className:"flex-1 text-left",children:[p.jsx("h3",{className:"font-medium text-gray-900",children:n.name}),p.jsx("p",{className:"text-sm text-gray-500",children:n.description})]}),p.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t===n.name?"border-blue-600 bg-blue-600 text-white":"border-gray-300"}`,children:t===n.name&&p.jsx(Hm,{className:"h-4 w-4"})})]},n.name))})]}),CP=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"pl",name:"Polish"},{code:"ru",name:"Russian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese (Simplified)"}],NP=({language:t,onChange:e})=>{const[n,r]=T.useState(""),s=CP.filter(i=>i.name.toLowerCase().includes(n.toLowerCase()));return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Choose your newsletter's language"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Select the primary language for your newsletter content."})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx(Wx,{className:"h-5 w-5 text-gray-400"})}),p.jsx("input",{type:"text",value:n,onChange:i=>r(i.target.value),placeholder:"Search languages...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.map(i=>p.jsxs("button",{onClick:()=>e(i.code),className:`flex items-center p-3 border rounded-lg transition-all ${t===i.code?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-200 hover:bg-blue-50/50"}`,children:[p.jsx("span",{className:"flex-1 text-left",children:i.name}),p.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${t===i.code?"border-blue-600 bg-blue-600 text-white":"border-gray-300"}`,children:t===i.code&&p.jsx(Hm,{className:"h-3 w-3"})})]},i.code))})]})},TP=({targetAudience:t,onChange:e})=>p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Describe your target audience"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Help us understand who your newsletter is for. This will help generate more relevant content for your readers."})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"audience",className:"block text-sm font-medium text-gray-700",children:"Target Audience Description"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Be specific about your audience's interests, knowledge level, and what they're looking to gain from your newsletter."}),p.jsx("textarea",{id:"audience",value:t,onChange:n=>e(n.target.value),rows:6,placeholder:"e.g., Tech-savvy professionals aged 25-45 who want to stay updated on emerging technologies and their practical applications. They have a basic understanding of technology but appreciate clear explanations without technical jargon.",className:"mt-3 block w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Tips for a great audience description:"}),p.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[p.jsx("li",{children:" Include demographic information (age, profession, etc.)"}),p.jsx("li",{children:" Mention their knowledge level in your topic area"}),p.jsx("li",{children:" Describe their goals and what they want to learn"}),p.jsx("li",{children:" Note any specific interests or pain points"})]})]})]});async function OP(t){try{if(!t.id||!t.email)throw new Error("Missing required user data");const{data:e,error:n}=await Xe.from("profiles").select("id").eq("id",t.id).single();if(n&&n.code!=="PGRST116")throw n;const r={id:t.id,email:t.email,name:t.name||"",topics:Array.isArray(t.topics)?t.topics:[],newsletter_name:t.newsletter_name||"",newsletter_pitch:t.newsletter_pitch||"",tone:t.tone||"",language:t.language||"",target_audience:t.target_audience||"",updated_at:new Date().toISOString()};let s;if(e?s=await Xe.from("profiles").update(r).eq("id",t.id).select().single():s=await Xe.from("profiles").insert({...r,created_at:new Date().toISOString()}).select().single(),s.error)throw console.error("Supabase operation error:",s.error),new Error(s.error.message);return{success:!0}}catch(e){return console.error("Error saving profile:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}const Co=5,_P=()=>{const t=nd(),{user:e}=Ws(),{refreshProfile:n}=tg(),[r,s]=T.useState(1),[i,o]=T.useState(!1),[l,a]=T.useState({topics:[],newsletter_name:"",newsletter_pitch:"",tone:"",language:"",target_audience:""});T.useEffect(()=>{e||t("/")},[e,t]);const c=async()=>{var f;if(r<Co)s(r+1);else{o(!0);try{if(!e)throw new Error("No user found");const h={id:e.id,email:e.email||"",name:((f=e.user_metadata)==null?void 0:f.name)||"",topics:l.topics,newsletter_name:l.newsletter_name,newsletter_pitch:l.newsletter_pitch,tone:l.tone,language:l.language,target_audience:l.target_audience};if(!h.email)throw new Error("User email is required");const m=await OP(h);m.success?(await n(),Ce.success("Profile setup completed!"),t("/dashboard")):Ce.error(m.error||"Failed to save profile data")}catch(h){console.error("Error saving profile:",h),Ce.error(h instanceof Error?h.message:"An unexpected error occurred")}finally{o(!1)}}},u=()=>{r>1&&s(r-1)},d=(f,h)=>{a({...l,[f]:h})};return e?p.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:p.jsx("div",{className:"max-w-3xl mx-auto",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("div",{className:"flex justify-between mb-2",children:[p.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["Step ",r," of ",Co]}),p.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[Math.round(r/Co*100),"%"]})]}),p.jsx("div",{className:"h-2 bg-blue-100 rounded-full",children:p.jsx("div",{className:"h-2 bg-blue-600 rounded-full transition-all duration-300",style:{width:`${r/Co*100}%`}})})]}),p.jsxs("div",{className:"mb-8",children:[r===1&&p.jsx(bP,{topics:l.topics,onChange:f=>d("topics",f)}),r===2&&p.jsx(kP,{name:l.newsletter_name,pitch:l.newsletter_pitch,onNameChange:f=>d("newsletter_name",f),onPitchChange:f=>d("newsletter_pitch",f)}),r===3&&p.jsx(EP,{tone:l.tone,onChange:f=>d("tone",f)}),r===4&&p.jsx(NP,{language:l.language,onChange:f=>d("language",f)}),r===5&&p.jsx(TP,{targetAudience:l.target_audience,onChange:f=>d("target_audience",f)})]}),p.jsxs("div",{className:"flex justify-between",children:[r>1?p.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Back"}):p.jsx("div",{}),p.jsx("button",{onClick:c,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?p.jsxs("span",{className:"flex items-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):r===Co?"Complete Setup":"Next"})]})]})})}):null},gd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ro(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ng(t){return"nodeType"in t}function St(t){var e,n;return t?ro(t)?t:ng(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function rg(t){const{Document:e}=St(t);return t instanceof e}function Yl(t){return ro(t)?!1:t instanceof St(t).HTMLElement}function Ub(t){return t instanceof St(t).SVGElement}function so(t){return t?ro(t)?t.document:ng(t)?rg(t)?t:Yl(t)||Ub(t)?t.ownerDocument:document:document:document}const er=gd?x.useLayoutEffect:x.useEffect;function sg(t){const e=x.useRef(t);return er(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function MP(){const t=x.useRef(null),e=x.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=x.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Cl(t,e){e===void 0&&(e=[t]);const n=x.useRef(t);return er(()=>{n.current!==t&&(n.current=t)},e),n}function Xl(t,e){const n=x.useRef();return x.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Vc(t){const e=sg(t),n=x.useRef(null),r=x.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function hp(t){const e=x.useRef();return x.useEffect(()=>{e.current=t},[t]),e.current}let Sf={};function yd(t,e){return x.useMemo(()=>{if(e)return e;const n=Sf[t]==null?0:Sf[t]+1;return Sf[t]=n,t+"-"+n},[t,e])}function Hb(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[a,c]of l){const u=i[a];u!=null&&(i[a]=u+t*c)}return i},{...e})}}const Oi=Hb(1),Wc=Hb(-1);function AP(t){return"clientX"in t&&"clientY"in t}function Vb(t){if(!t)return!1;const{KeyboardEvent:e}=St(t.target);return e&&t instanceof e}function PP(t){if(!t)return!1;const{TouchEvent:e}=St(t.target);return e&&t instanceof e}function pp(t){if(PP(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return AP(t)?{x:t.clientX,y:t.clientY}:null}const Dy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jP(t){return t.matches(Dy)?t:t.querySelector(Dy)}const RP={display:"none"};function DP(t){let{id:e,value:n}=t;return T.createElement("div",{id:e,style:RP},n)}function IP(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return T.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function LP(){const[t,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Wb=x.createContext(null);function $P(t){const e=x.useContext(Wb);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function FP(){const[t]=x.useState(()=>new Set),e=x.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[x.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const zP={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},BP={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function UP(t){let{announcements:e=BP,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=zP}=t;const{announce:i,announcement:o}=LP(),l=yd("DndLiveRegion"),[a,c]=x.useState(!1);if(x.useEffect(()=>{c(!0)},[]),$P(x.useMemo(()=>({onDragStart(d){let{active:f}=d;i(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:h}=d;e.onDragMove&&i(e.onDragMove({active:f,over:h}))},onDragOver(d){let{active:f,over:h}=d;i(e.onDragOver({active:f,over:h}))},onDragEnd(d){let{active:f,over:h}=d;i(e.onDragEnd({active:f,over:h}))},onDragCancel(d){let{active:f,over:h}=d;i(e.onDragCancel({active:f,over:h}))}}),[i,e])),!a)return null;const u=T.createElement(T.Fragment,null,T.createElement(DP,{id:r,value:s.draggable}),T.createElement(IP,{id:l,announcement:o}));return n?Un.createPortal(u,n):u}var Ne;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ne||(Ne={}));function qc(){}const vn=Object.freeze({x:0,y:0});function HP(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function VP(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function WP(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const a=e.width*e.height,c=t.width*t.height,u=o*l,d=u/(a+c-u);return Number(d.toFixed(4))}return 0}const qP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const a=WP(l,e);a>0&&s.push({id:o,data:{droppableContainer:i,value:a}})}}return s.sort(HP)};function KP(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function qb(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:vn}function JP(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const GP=JP(1);function QP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function YP(t,e,n){const r=QP(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,a=t.left-o-(1-s)*parseFloat(n),c=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=s?t.width/s:t.width,d=i?t.height/i:t.height;return{width:u,height:d,top:c,right:a+u,bottom:c+d,left:a}}const XP={ignoreTransform:!1};function Zl(t,e){e===void 0&&(e=XP);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=St(t).getComputedStyle(t);c&&(n=YP(n,c,u))}const{top:r,left:s,width:i,height:o,bottom:l,right:a}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:a}}function Iy(t){return Zl(t,{ignoreTransform:!0})}function ZP(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function ej(t,e){return e===void 0&&(e=St(t).getComputedStyle(t)),e.position==="fixed"}function tj(t,e){e===void 0&&(e=St(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function ig(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(rg(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Yl(s)||Ub(s)||n.includes(s))return n;const i=St(t).getComputedStyle(s);return s!==t&&tj(s,i)&&n.push(s),ej(s,i)?n:r(s.parentNode)}return t?r(t):n}function Kb(t){const[e]=ig(t,1);return e??null}function Ef(t){return!gd||!t?null:ro(t)?t:ng(t)?rg(t)||t===so(t).scrollingElement?window:Yl(t)?t:null:null}function Jb(t){return ro(t)?t.scrollX:t.scrollLeft}function Gb(t){return ro(t)?t.scrollY:t.scrollTop}function mp(t){return{x:Jb(t),y:Gb(t)}}var Ae;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ae||(Ae={}));function Qb(t){return!gd||!t?!1:t===document.scrollingElement}function Yb(t){const e={x:0,y:0},n=Qb(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const nj={x:.2,y:.2};function rj(t,e,n,r,s){let{top:i,left:o,right:l,bottom:a}=n;r===void 0&&(r=10),s===void 0&&(s=nj);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=Yb(t),h={x:0,y:0},m={x:0,y:0},g={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+g.height?(h.y=Ae.Backward,m.y=r*Math.abs((e.top+g.height-i)/g.height)):!u&&a>=e.bottom-g.height&&(h.y=Ae.Forward,m.y=r*Math.abs((e.bottom-g.height-a)/g.height)),!f&&l>=e.right-g.width?(h.x=Ae.Forward,m.x=r*Math.abs((e.right-g.width-l)/g.width)):!d&&o<=e.left+g.width&&(h.x=Ae.Backward,m.x=r*Math.abs((e.left+g.width-o)/g.width)),{direction:h,speed:m}}function sj(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Xb(t){return t.reduce((e,n)=>Oi(e,mp(n)),vn)}function ij(t){return t.reduce((e,n)=>e+Jb(n),0)}function oj(t){return t.reduce((e,n)=>e+Gb(n),0)}function lj(t,e){if(e===void 0&&(e=Zl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Kb(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const aj=[["x",["left","right"],ij],["y",["top","bottom"],oj]];class og{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ig(n),s=Xb(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of aj)for(const a of o)Object.defineProperty(this,a,{get:()=>{const c=l(r),u=s[i]-c;return this.rect[a]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function cj(t){const{EventTarget:e}=St(t);return t instanceof e?t:so(t)}function Cf(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ht;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ht||(Ht={}));function Ly(t){t.preventDefault()}function uj(t){t.stopPropagation()}var se;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(se||(se={}));const Zb={start:[se.Space,se.Enter],cancel:[se.Esc],end:[se.Space,se.Enter]},dj=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case se.Right:return{...n,x:n.x+25};case se.Left:return{...n,x:n.x-25};case se.Down:return{...n,y:n.y+25};case se.Up:return{...n,y:n.y-25}}};class ek{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Jo(so(n)),this.windowListeners=new Jo(St(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ht.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&lj(r),n(vn)}handleKeyDown(e){if(Vb(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Zb,coordinateGetter:o=dj,scrollBehavior:l="smooth"}=s,{code:a}=e;if(i.end.includes(a)){this.handleEnd(e);return}if(i.cancel.includes(a)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:vn;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const f=Wc(d,u),h={x:0,y:0},{scrollableAncestors:m}=r.current;for(const g of m){const v=e.code,{isTop:y,isRight:w,isLeft:b,isBottom:k,maxScroll:E,minScroll:S}=Yb(g),C=sj(g),N={x:Math.min(v===se.Right?C.right-C.width/2:C.right,Math.max(v===se.Right?C.left:C.left+C.width/2,d.x)),y:Math.min(v===se.Down?C.bottom-C.height/2:C.bottom,Math.max(v===se.Down?C.top:C.top+C.height/2,d.y))},M=v===se.Right&&!w||v===se.Left&&!b,R=v===se.Down&&!k||v===se.Up&&!y;if(M&&N.x!==d.x){const z=g.scrollLeft+f.x,ee=v===se.Right&&z<=E.x||v===se.Left&&z>=S.x;if(ee&&!f.y){g.scrollTo({left:z,behavior:l});return}ee?h.x=g.scrollLeft-z:h.x=v===se.Right?g.scrollLeft-E.x:g.scrollLeft-S.x,h.x&&g.scrollBy({left:-h.x,behavior:l});break}else if(R&&N.y!==d.y){const z=g.scrollTop+f.y,ee=v===se.Down&&z<=E.y||v===se.Up&&z>=S.y;if(ee&&!f.x){g.scrollTo({top:z,behavior:l});return}ee?h.y=g.scrollTop-z:h.y=v===se.Down?g.scrollTop-E.y:g.scrollTop-S.y,h.y&&g.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(e,Oi(Wc(d,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ek.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Zb,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function $y(t){return!!(t&&"distance"in t)}function Fy(t){return!!(t&&"delay"in t)}class lg{constructor(e,n,r){var s;r===void 0&&(r=cj(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=so(o),this.documentListeners=new Jo(this.document),this.listeners=new Jo(r),this.windowListeners=new Jo(St(o)),this.initialCoordinates=(s=pp(i))!=null?s:vn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.DragStart,Ly),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),this.windowListeners.add(Ht.ContextMenu,Ly),this.documentListeners.add(Ht.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fy(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if($y(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ht.Click,uj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ht.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const a=(n=pp(e))!=null?n:vn,c=Wc(s,a);if(!r&&l){if($y(l)){if(l.tolerance!=null&&Cf(c,l.tolerance))return this.handleCancel();if(Cf(c,l.distance))return this.handleStart()}return Fy(l)&&Cf(c,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(a)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===se.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const fj={move:{name:"pointermove"},end:{name:"pointerup"}};class tk extends lg{constructor(e){const{event:n}=e,r=so(n.target);super(e,fj,r)}}tk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hj={move:{name:"mousemove"},end:{name:"mouseup"}};var gp;(function(t){t[t.RightClick=2]="RightClick"})(gp||(gp={}));class pj extends lg{constructor(e){super(e,hj,so(e.event.target))}}pj.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===gp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Nf={move:{name:"touchmove"},end:{name:"touchend"}};class mj extends lg{constructor(e){super(e,Nf)}static setup(){return window.addEventListener(Nf.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Nf.move.name,e)};function e(){}}}mj.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Go;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Go||(Go={}));var Kc;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kc||(Kc={}));function gj(t){let{acceleration:e,activator:n=Go.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Kc.TreeOrder,pointerCoordinates:a,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:f}=t;const h=vj({delta:d,disabled:!i}),[m,g]=MP(),v=x.useRef({x:0,y:0}),y=x.useRef({x:0,y:0}),w=x.useMemo(()=>{switch(n){case Go.Pointer:return a?{top:a.y,bottom:a.y,left:a.x,right:a.x}:null;case Go.DraggableRect:return s}},[n,s,a]),b=x.useRef(null),k=x.useCallback(()=>{const S=b.current;if(!S)return;const C=v.current.x*y.current.x,N=v.current.y*y.current.y;S.scrollBy(C,N)},[]),E=x.useMemo(()=>l===Kc.TreeOrder?[...c].reverse():c,[l,c]);x.useEffect(()=>{if(!i||!c.length||!w){g();return}for(const S of E){if((r==null?void 0:r(S))===!1)continue;const C=c.indexOf(S),N=u[C];if(!N)continue;const{direction:M,speed:R}=rj(S,N,w,e,f);for(const z of["x","y"])h[z][M[z]]||(R[z]=0,M[z]=0);if(R.x>0||R.y>0){g(),b.current=S,m(k,o),v.current=R,y.current=M;return}}v.current={x:0,y:0},y.current={x:0,y:0},g()},[e,k,r,g,i,o,JSON.stringify(w),JSON.stringify(h),m,c,E,u,JSON.stringify(f)])}const yj={x:{[Ae.Backward]:!1,[Ae.Forward]:!1},y:{[Ae.Backward]:!1,[Ae.Forward]:!1}};function vj(t){let{delta:e,disabled:n}=t;const r=hp(e);return Xl(s=>{if(n||!r||!s)return yj;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Ae.Backward]:s.x[Ae.Backward]||i.x===-1,[Ae.Forward]:s.x[Ae.Forward]||i.x===1},y:{[Ae.Backward]:s.y[Ae.Backward]||i.y===-1,[Ae.Forward]:s.y[Ae.Forward]||i.y===1}}},[n,e,r])}function wj(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return Xl(s=>{var i;return e===null?null:(i=r??s)!=null?i:null},[r,e])}function xj(t,e){return x.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Nl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Nl||(Nl={}));var yp;(function(t){t.Optimized="optimized"})(yp||(yp={}));const zy=new Map;function bj(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=x.useState(null),{frequency:l,measure:a,strategy:c}=s,u=x.useRef(t),d=v(),f=Cl(d),h=x.useCallback(function(y){y===void 0&&(y=[]),!f.current&&o(w=>w===null?y:w.concat(y.filter(b=>!w.includes(b))))},[f]),m=x.useRef(null),g=Xl(y=>{if(d&&!n)return zy;if(!y||y===zy||u.current!==t||i!=null){const w=new Map;for(let b of t){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const k=b.node.current,E=k?new og(a(k),k):null;b.rect.current=E,E&&w.set(b.id,E)}return w}return y},[t,i,n,d,a]);return x.useEffect(()=>{u.current=t},[t]),x.useEffect(()=>{d||h()},[n,d]),x.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),x.useEffect(()=>{d||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},l))},[l,d,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:i!=null};function v(){switch(c){case Nl.Always:return!1;case Nl.BeforeDragging:return n;default:return!n}}}function nk(t,e){return Xl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function kj(t,e){return nk(t,e)}function Sj(t){let{callback:e,disabled:n}=t;const r=sg(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function vd(t){let{callback:e,disabled:n}=t;const r=sg(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ej(t){return new og(Zl(t),t)}function By(t,e,n){e===void 0&&(e=Ej);const[r,s]=x.useReducer(l,null),i=Sj({callback(a){if(t)for(const c of a){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),o=vd({callback:s});return er(()=>{s(),t?(o==null||o.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),i==null||i.disconnect())},[t]),r;function l(a){if(!t)return null;if(t.isConnected===!1){var c;return(c=a??n)!=null?c:null}const u=e(t);return JSON.stringify(a)===JSON.stringify(u)?a:u}}function Cj(t){const e=nk(t);return qb(t,e)}const Uy=[];function Nj(t){const e=x.useRef(t),n=Xl(r=>t?r&&r!==Uy&&t&&e.current&&t.parentNode===e.current.parentNode?r:ig(t):Uy,[t]);return x.useEffect(()=>{e.current=t},[t]),n}function Tj(t){const[e,n]=x.useState(null),r=x.useRef(t),s=x.useCallback(i=>{const o=Ef(i.target);o&&n(l=>l?(l.set(o,mp(o)),new Map(l)):null)},[]);return x.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(a=>{const c=Ef(a);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,mp(c)]):null}).filter(a=>a!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(a=>{const c=Ef(a);c==null||c.removeEventListener("scroll",s)})}},[s,t]),x.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Oi(i,o),vn):Xb(t):vn,[t,e])}function Hy(t,e){e===void 0&&(e=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},e),x.useEffect(()=>{const r=t!==vn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Wc(t,n.current):vn}function Oj(t){x.useEffect(()=>{if(!gd)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function _j(t,e){return x.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function rk(t){return x.useMemo(()=>t?ZP(t):null,[t])}const Tf=[];function Mj(t,e){e===void 0&&(e=Zl);const[n]=t,r=rk(n?St(n):null),[s,i]=x.useReducer(l,Tf),o=vd({callback:i});return t.length>0&&s===Tf&&i(),er(()=>{t.length?t.forEach(a=>o==null?void 0:o.observe(a)):(o==null||o.disconnect(),i())},[t]),s;function l(){return t.length?t.map(a=>Qb(a)?r:new og(e(a),a)):Tf}}function Aj(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Yl(e)?e:t}function Pj(t){let{measure:e}=t;const[n,r]=x.useState(null),s=x.useCallback(c=>{for(const{target:u}of c)if(Yl(u)){r(d=>{const f=e(u);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),i=vd({callback:s}),o=x.useCallback(c=>{const u=Aj(c);i==null||i.disconnect(),u&&(i==null||i.observe(u)),r(u?e(u):null)},[e,i]),[l,a]=Vc(o);return x.useMemo(()=>({nodeRef:l,rect:n,setRef:a}),[n,l,a])}const jj=[{sensor:tk,options:{}},{sensor:ek,options:{}}],Rj={current:{}},oc={draggable:{measure:Iy},droppable:{measure:Iy,strategy:Nl.WhileDragging,frequency:yp.Optimized},dragOverlay:{measure:Zl}};class Qo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Dj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:oc,measureDroppableContainers:qc,windowRect:null,measuringScheduled:!1},Ij={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qc,draggableNodes:new Map,over:null,measureDroppableContainers:qc},wd=x.createContext(Ij),Lj=x.createContext(Dj);function $j(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qo}}}function Fj(t,e){switch(e.type){case Ne.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ne.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Ne.DragEnd:case Ne.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ne.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Qo(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ne.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Qo(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Ne.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Qo(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function zj(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=x.useContext(wd),i=hp(r),o=hp(n==null?void 0:n.id);return x.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Vb(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:a,node:c}=l;if(!a.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[a.current,c.current]){if(!u)continue;const d=jP(u);if(d){d.focus();break}}})}},[r,e,s,o,i]),null}function Bj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function Uj(t){return x.useMemo(()=>({draggable:{...oc.draggable,...t==null?void 0:t.draggable},droppable:{...oc.droppable,...t==null?void 0:t.droppable},dragOverlay:{...oc.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Hj(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=x.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;er(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=qb(u,r);if(o||(d.x=0),l||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=Kb(c);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,l,r,n])}const sk=x.createContext({...vn,scaleX:1,scaleY:1});var mr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(mr||(mr={}));const Vj=x.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:a=!0,children:c,sensors:u=jj,collisionDetection:d=qP,measuring:f,modifiers:h,...m}=e;const g=x.useReducer(Fj,void 0,$j),[v,y]=g,[w,b]=FP(),[k,E]=x.useState(mr.Uninitialized),S=k===mr.Initialized,{draggable:{active:C,nodes:N,translate:M},droppable:{containers:R}}=v,z=C?N.get(C):null,ee=x.useRef({initial:null,translated:null}),oe=x.useMemo(()=>{var $e;return C!=null?{id:C,data:($e=z==null?void 0:z.data)!=null?$e:Rj,rect:ee}:null},[C,z]),xe=x.useRef(null),[Ke,rt]=x.useState(null),[Z,P]=x.useState(null),$=Cl(m,Object.values(m)),F=yd("DndDescribedBy",o),Y=x.useMemo(()=>R.getEnabled(),[R]),J=Uj(f),{droppableRects:ht,measureDroppableContainers:de,measuringScheduled:ts}=bj(Y,{dragging:S,dependencies:[M.x,M.y],config:J.droppable}),ve=wj(N,C),Dn=x.useMemo(()=>Z?pp(Z):null,[Z]),ra=rE(),oo=kj(ve,J.draggable.measure);Hj({activeNode:C?N.get(C):null,config:ra.layoutShiftCompensation,initialRect:oo,measure:J.draggable.measure});const Et=By(ve,J.draggable.measure,oo),ne=By(ve?ve.parentElement:null),Le=x.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:ht,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=R.getNodeFor((n=Le.current.over)==null?void 0:n.id),Ft=Pj({measure:J.dragOverlay.measure}),sa=(r=Ft.nodeRef.current)!=null?r:ve,Ks=S?(s=Ft.rect)!=null?s:Et:null,Lg=!!(Ft.nodeRef.current&&Ft.rect),$g=Cj(Lg?null:Et),Rd=rk(sa?St(sa):null),rr=Nj(S?st??ve:null),ia=Mj(rr),oa=Bj(h,{transform:{x:M.x-$g.x,y:M.y-$g.y,scaleX:1,scaleY:1},activatorEvent:Z,active:oe,activeNodeRect:Et,containerNodeRect:ne,draggingNodeRect:Ks,over:Le.current.over,overlayNodeRect:Ft.rect,scrollableAncestors:rr,scrollableAncestorRects:ia,windowRect:Rd}),Fg=Dn?Oi(Dn,M):null,zg=Tj(rr),QS=Hy(zg),YS=Hy(zg,[Et]),Js=Oi(oa,QS),Gs=Ks?GP(Ks,oa):null,lo=oe&&Gs?d({active:oe,collisionRect:Gs,droppableRects:ht,droppableContainers:Y,pointerCoordinates:Fg}):null,Bg=VP(lo,"id"),[sr,Ug]=x.useState(null),XS=Lg?oa:Oi(oa,YS),ZS=KP(XS,(i=sr==null?void 0:sr.rect)!=null?i:null,Et),Hg=x.useCallback(($e,Ct)=>{let{sensor:Nt,options:ir}=Ct;if(xe.current==null)return;const zt=N.get(xe.current);if(!zt)return;const rn=$e.nativeEvent,kn=new Nt({active:xe.current,activeNode:zt,event:rn,options:ir,context:Le,onStart(sn){const ao=xe.current;if(ao==null)return;const co=N.get(ao);if(!co)return;const{onDragStart:la}=$.current,aa={active:{id:ao,data:co.data,rect:ee}};Un.unstable_batchedUpdates(()=>{la==null||la(aa),E(mr.Initializing),y({type:Ne.DragStart,initialCoordinates:sn,active:ao}),w({type:"onDragStart",event:aa})})},onMove(sn){y({type:Ne.DragMove,coordinates:sn})},onEnd:Qs(Ne.DragEnd),onCancel:Qs(Ne.DragCancel)});Un.unstable_batchedUpdates(()=>{rt(kn),P($e.nativeEvent)});function Qs(sn){return async function(){const{active:co,collisions:la,over:aa,scrollAdjustedTranslate:Wg}=Le.current;let uo=null;if(co&&Wg){const{cancelDrop:fo}=$.current;uo={activatorEvent:rn,active:co,collisions:la,delta:Wg,over:aa},sn===Ne.DragEnd&&typeof fo=="function"&&await Promise.resolve(fo(uo))&&(sn=Ne.DragCancel)}xe.current=null,Un.unstable_batchedUpdates(()=>{y({type:sn}),E(mr.Uninitialized),Ug(null),rt(null),P(null);const fo=sn===Ne.DragEnd?"onDragEnd":"onDragCancel";if(uo){const Dd=$.current[fo];Dd==null||Dd(uo),w({type:fo,event:uo})}})}}},[N]),eE=x.useCallback(($e,Ct)=>(Nt,ir)=>{const zt=Nt.nativeEvent,rn=N.get(ir);if(xe.current!==null||!rn||zt.dndKit||zt.defaultPrevented)return;const kn={active:rn};$e(Nt,Ct.options,kn)===!0&&(zt.dndKit={capturedBy:Ct.sensor},xe.current=ir,Hg(Nt,Ct))},[N,Hg]),Vg=xj(u,eE);Oj(u),er(()=>{Et&&k===mr.Initializing&&E(mr.Initialized)},[Et,k]),x.useEffect(()=>{const{onDragMove:$e}=$.current,{active:Ct,activatorEvent:Nt,collisions:ir,over:zt}=Le.current;if(!Ct||!Nt)return;const rn={active:Ct,activatorEvent:Nt,collisions:ir,delta:{x:Js.x,y:Js.y},over:zt};Un.unstable_batchedUpdates(()=>{$e==null||$e(rn),w({type:"onDragMove",event:rn})})},[Js.x,Js.y]),x.useEffect(()=>{const{active:$e,activatorEvent:Ct,collisions:Nt,droppableContainers:ir,scrollAdjustedTranslate:zt}=Le.current;if(!$e||xe.current==null||!Ct||!zt)return;const{onDragOver:rn}=$.current,kn=ir.get(Bg),Qs=kn&&kn.rect.current?{id:kn.id,rect:kn.rect.current,data:kn.data,disabled:kn.disabled}:null,sn={active:$e,activatorEvent:Ct,collisions:Nt,delta:{x:zt.x,y:zt.y},over:Qs};Un.unstable_batchedUpdates(()=>{Ug(Qs),rn==null||rn(sn),w({type:"onDragOver",event:sn})})},[Bg]),er(()=>{Le.current={activatorEvent:Z,active:oe,activeNode:ve,collisionRect:Gs,collisions:lo,droppableRects:ht,draggableNodes:N,draggingNode:sa,draggingNodeRect:Ks,droppableContainers:R,over:sr,scrollableAncestors:rr,scrollAdjustedTranslate:Js},ee.current={initial:Ks,translated:Gs}},[oe,ve,lo,Gs,N,sa,Ks,ht,R,sr,rr,Js]),gj({...ra,delta:M,draggingRect:Gs,pointerCoordinates:Fg,scrollableAncestors:rr,scrollableAncestorRects:ia});const tE=x.useMemo(()=>({active:oe,activeNode:ve,activeNodeRect:Et,activatorEvent:Z,collisions:lo,containerNodeRect:ne,dragOverlay:Ft,draggableNodes:N,droppableContainers:R,droppableRects:ht,over:sr,measureDroppableContainers:de,scrollableAncestors:rr,scrollableAncestorRects:ia,measuringConfiguration:J,measuringScheduled:ts,windowRect:Rd}),[oe,ve,Et,Z,lo,ne,Ft,N,R,ht,sr,de,rr,ia,J,ts,Rd]),nE=x.useMemo(()=>({activatorEvent:Z,activators:Vg,active:oe,activeNodeRect:Et,ariaDescribedById:{draggable:F},dispatch:y,draggableNodes:N,over:sr,measureDroppableContainers:de}),[Z,Vg,oe,Et,y,F,N,sr,de]);return T.createElement(Wb.Provider,{value:b},T.createElement(wd.Provider,{value:nE},T.createElement(Lj.Provider,{value:tE},T.createElement(sk.Provider,{value:ZS},c)),T.createElement(zj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),T.createElement(UP,{...l,hiddenTextDescribedById:F}));function rE(){const $e=(Ke==null?void 0:Ke.autoScrollEnabled)===!1,Ct=typeof a=="object"?a.enabled===!1:a===!1,Nt=S&&!$e&&!Ct;return typeof a=="object"?{...a,enabled:Nt}:{enabled:Nt}}}),Wj=x.createContext(null),Vy="button",qj="Droppable";function Kj(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=yd(qj),{activators:o,activatorEvent:l,active:a,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=x.useContext(wd),{role:h=Vy,roleDescription:m="draggable",tabIndex:g=0}=s??{},v=(a==null?void 0:a.id)===e,y=x.useContext(v?sk:Wj),[w,b]=Vc(),[k,E]=Vc(),S=_j(o,e),C=Cl(n);er(()=>(d.set(e,{id:e,key:i,node:w,activatorNode:k,data:C}),()=>{const M=d.get(e);M&&M.key===i&&d.delete(e)}),[d,e]);const N=x.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&h===Vy?!0:void 0,"aria-roledescription":m,"aria-describedby":u.draggable}),[r,h,g,v,m,u.draggable]);return{active:a,activatorEvent:l,activeNodeRect:c,attributes:N,isDragging:v,listeners:r?void 0:S,node:w,over:f,setNodeRef:b,setActivatorNodeRef:E,transform:y}}const Jj="Droppable",Gj={timeout:25};function Qj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=yd(Jj),{active:o,dispatch:l,over:a,measureDroppableContainers:c}=x.useContext(wd),u=x.useRef({disabled:n}),d=x.useRef(!1),f=x.useRef(null),h=x.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...Gj,...s},y=Cl(g??r),w=x.useCallback(()=>{if(!d.current){d.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),h.current=null},v)},[v]),b=vd({callback:w,disabled:m||!o}),k=x.useCallback((N,M)=>{b&&(M&&(b.unobserve(M),d.current=!1),N&&b.observe(N))},[b]),[E,S]=Vc(k),C=Cl(e);return x.useEffect(()=>{!b||!E.current||(b.disconnect(),d.current=!1,b.observe(E.current))},[E,b]),er(()=>(l({type:Ne.RegisterDroppable,element:{id:r,key:i,disabled:n,node:E,rect:f,data:C}}),()=>l({type:Ne.UnregisterDroppable,key:i,id:r})),[r]),x.useEffect(()=>{n!==u.current.disabled&&(l({type:Ne.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)},[r,i,n,l]),{active:o,rect:f,isOver:(a==null?void 0:a.id)===r,node:E,over:a,setNodeRef:S}}async function Yj(t,e){try{const{data:n,error:r}=await Xe.from("newsletters").insert([{user_id:t,name:e,status:"draft",content:{intro:null,featured_story:null,news:[],outro:null}}]).select().single();if(r)throw console.error("Database error:",r),new Error(`Failed to create newsletter: ${r.message}`);if(!n)throw new Error("No data returned from insert");return n}catch(n){throw console.error("Error creating newsletter:",n),n}}async function ik(t,e){try{if(!e||typeof e!="object")throw new Error("Invalid content structure");const{data:n,error:r}=await Xe.from("newsletters").update({content:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Content update error:",r),new Error(`Failed to update newsletter content: ${r.message}`);if(!n)throw new Error("Newsletter not found");return n}catch(n){throw console.error("Error updating newsletter content:",n),n}}async function Xj(t){try{const{error:e}=await Xe.from("newsletters").delete().eq("id",t);if(e)throw console.error("Delete error:",e),new Error(`Failed to delete newsletter: ${e.message}`)}catch(e){throw console.error("Error deleting newsletter:",e),e}}async function Zj(t){try{const{data:e,error:n}=await Xe.from("newsletters").select("*").eq("user_id",t).order("updated_at",{ascending:!1});if(n)throw console.error("Fetch error:",n),new Error(`Failed to fetch newsletters: ${n.message}`);return e||[]}catch(e){throw console.error("Error fetching newsletters:",e),e}}const eR=({selectedNewsletter:t,onSelectNewsletter:e})=>{const{user:n}=Ws(),[r,s]=T.useState([]),[i,o]=T.useState(!0),[l,a]=T.useState(null),[c,u]=T.useState(""),d=T.useCallback(async()=>{if(n)try{const g=await Zj(n.id);s(g)}catch(g){console.error("Error loading newsletters:",g),Ce.error("Failed to load newsletters")}finally{o(!1)}},[n]);T.useEffect(()=>{d()},[d]);const f=async()=>{if(n)try{const g="Untitled Newsletter",v=await Yj(n.id,g);s([v,...r]),e(v),a(v.id),u(g),Ce.success("Newsletter created")}catch(g){console.error("Error creating newsletter:",g),Ce.error("Failed to create newsletter")}},h=async g=>{try{await Xj(g),s(r.filter(v=>v.id!==g)),(t==null?void 0:t.id)===g&&e(r[0]),Ce.success("Newsletter deleted")}catch(v){console.error("Error deleting newsletter:",v),Ce.error("Failed to delete newsletter")}},m=async g=>{try{const v=r.find(w=>w.id===g);if(!v||v.name===c){a(null);return}const y={...v,name:c};await updateNewsletter(g,{name:c}),s(r.map(w=>w.id===g?y:w)),a(null),Ce.success("Newsletter name updated")}catch(v){console.error("Error updating newsletter:",v),Ce.error("Failed to update newsletter name")}};return i?p.jsx("div",{className:"flex justify-center items-center h-full",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[p.jsx(Q2,{className:"h-5 w-5"}),"New Newsletter"]})}),p.jsxs("div",{className:"space-y-1 p-2",children:[r.map(g=>p.jsxs("div",{className:`group relative p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer ${(t==null?void 0:t.id)===g.id?"bg-blue-50":""}`,onClick:()=>e(g),children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Vl,{className:"h-5 w-5 text-gray-400"}),p.jsx("div",{className:"flex-1 min-w-0",children:l===g.id?p.jsx("input",{type:"text",value:c,onChange:v=>u(v.target.value),onBlur:()=>m(g.id),onKeyDown:v=>v.key==="Enter"&&m(g.id),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.name}),p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:g.status})]}),p.jsxs("p",{className:"text-xs text-gray-500",children:["Updated ",new Date(g.updated_at).toLocaleDateString()]})]})})]}),p.jsxs("div",{className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1",children:[p.jsx("button",{onClick:v=>{v.stopPropagation(),a(g.id),u(g.name)},className:"p-1 hover:bg-gray-200 rounded",children:p.jsx(K2,{className:"h-4 w-4 text-gray-500"})}),p.jsx("button",{onClick:v=>{v.stopPropagation(),h(g.id)},className:"p-1 hover:bg-gray-200 rounded",children:p.jsx(tT,{className:"h-4 w-4 text-red-500"})})]})]},g.id)),r.length===0&&p.jsx("div",{className:"text-center py-8 text-gray-500",children:"No newsletters yet"})]})]})},Of="pub_590840da3b38cd9d5d1984d5ce6440f9a1306",_f="https://newsdata.io/api/1";async function tR(t){try{const e=new URLSearchParams({apikey:Of,...t}),r=await(await fetch(`${_f}/latest?${e}`)).json();if(r.status!=="success")throw new Error(r.message||"Failed to fetch latest news");const s=r.results.map(a=>({...a,source_name:a.source_name||a.source_id}));let i=[];if(t.country){const a=new URLSearchParams({apikey:Of,country:t.country}),u=await(await fetch(`${_f}/sources?${a}`)).json();if(u.status==="success"&&u.results.length>0){const f=u.results.slice(0,5).map(m=>m.id).map(async m=>{const g=new URLSearchParams({apikey:Of,source:m,...t});try{const y=await(await fetch(`${_f}/latest?${g}`)).json();return y.status==="success"?y.results:[]}catch(v){return console.error(`Error fetching news for source ${m}:`,v),[]}});i=(await Promise.all(f)).flat().map(m=>({...m,source_name:m.source_name||m.source_id}))}}const o=[...s,...i];return Array.from(new Map(o.map(a=>[a.article_id,a])).values()).sort((a,c)=>new Date(c.pubDate).getTime()-new Date(a.pubDate).getTime())}catch(e){throw console.error("Error fetching news:",e),e}}const nR=({article:t})=>{const{attributes:e,listeners:n,setNodeRef:r,transform:s}=Kj({id:t.article_id,data:t}),i=s?{transform:`translate3d(${s.x}px, ${s.y}px, 0)`}:void 0;return p.jsxs("div",{ref:r,style:i,className:"group relative bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",...e,...n,children:[p.jsx("div",{className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(L2,{className:"h-5 w-5 text-gray-400 cursor-grab"})}),p.jsxs("div",{className:"flex items-start space-x-3",children:[t.image_url&&p.jsx("img",{src:t.image_url,alt:t.title,className:"w-20 h-20 object-cover rounded-lg"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:t.source_name}),t.creator&&t.creator.length>0&&p.jsxs("span",{className:"text-xs text-gray-500",children:["by ",t.creator.join(", ")]})]}),p.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:t.title}),t.description&&p.jsx("p",{className:"text-sm text-gray-600",children:t.description}),p.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-gray-500",children:[p.jsx("span",{children:new Date(t.pubDate).toLocaleString()}),t.category&&t.category.map(o=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-50 text-blue-600",children:o},o)),t.country&&t.country.map(o=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-green-50 text-green-600",children:o.toUpperCase()},o))]})]})]})]})},rR=({filters:t})=>{const[e,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(null),l=T.useCallback(async()=>{s(!0),o(null);try{const a=await tR(t);n(a)}catch(a){o(a instanceof Error?a.message:"Failed to load news")}finally{s(!1)}},[t]);return T.useEffect(()=>{l()},[t,l]),i?p.jsxs("div",{className:"p-4 bg-red-50 rounded-lg flex items-center gap-2 text-red-600",children:[p.jsx(rd,{className:"h-5 w-5"}),p.jsx("span",{children:i}),p.jsx("button",{onClick:l,className:"ml-auto p-2 hover:bg-red-100 rounded-full",children:p.jsx(Vx,{className:"h-4 w-4"})})]}):p.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?p.jsx("div",{className:"flex justify-center p-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p.jsx("div",{className:"space-y-4",children:e.length===0?p.jsx("div",{className:"text-center text-gray-500 py-8",children:"No articles found for the selected filters."}):e.map(a=>p.jsx(nR,{article:a},a.article_id))})})};async function sR(t){try{if(!t||t.length===0)throw new Error("No articles provided for generation");const{data:{session:e}}=await Xe.auth.getSession();if(!e)throw new Error("No active session");const n=await fetch("https://kxxjvioactifagifcxnf.supabase.co/functions/v1/generate-newsletter",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({articles:t.map(s=>({title:s.title,description:s.description,link:s.link,source_name:s.source_name,pubDate:s.pubDate}))})});if(!n.ok){const s=await n.json().catch(()=>({}));throw new Error(s.error||`Failed to generate content: ${n.statusText}`)}const r=await n.json();if(!r.intro||!r.outro||!r.htmlContent)throw new Error("Invalid response from content generation");return{intro:r.intro,featured_story:t[0],news:t.slice(1),outro:r.outro,htmlContent:r.htmlContent}}catch(e){throw console.error("Error generating newsletter content:",e),e instanceof Error?e:new Error("Failed to generate newsletter content")}}function ze(t){this.content=t}ze.prototype={constructor:ze,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new ze(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ze(n)},addToStart:function(t,e){return new ze([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ze(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new ze(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ze.from(t),t.size?new ze(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ze.from(t),t.size?new ze(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ze.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ze.from=function(t){if(t instanceof ze)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ze(e)};function ok(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=ok(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function lk(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),l=e.child(--i),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=lk(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class O{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,s+l,i||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,s+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new O(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let l=this.content[i],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),s+=l.nodeSize),o=a}return new O(r,s)}cutByIndex(e,n){return e==n?O.empty:e==0&&n==this.content.length?this:new O(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new O(s,i)}addToStart(e){return new O([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new O(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return ok(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return lk(this,e,n,r)}findIndex(e,n=-1){if(e==0)return ja(0,e);if(e==this.size)return ja(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=e)return o==e||n>0?ja(r+1,o):ja(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return O.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new O(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return O.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new O(n||e,r)}static from(e){if(!e)return O.empty;if(e instanceof O)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new O([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}O.empty=new O([],0);const Mf={index:0,offset:0};function ja(t,e){return Mf.index=t,Mf.offset=e,Mf}function Jc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Jc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Jc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let te=class vp{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Jc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return vp.none;if(e instanceof vp)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};te.none=[];class Gc extends Error{}class j{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=ck(this.content,e+this.openStart,n);return r&&new j(r,this.openStart,this.openEnd)}removeBetween(e,n){return new j(ak(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return j.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new j(O.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new j(e,r,s)}}j.empty=new j(O.empty,0,0);function ak(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(s==e||i.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(ak(i.content,e-s-1,n-s-1)))}function ck(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=ck(o.content,e-i-1,n);return l&&t.replaceChild(s,o.copy(l))}function iR(t,e,n){if(n.openStart>t.depth)throw new Gc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Gc("Inconsistent open depths");return uk(t,e,n,0)}function uk(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=uk(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Es(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=oR(n,t);return Es(i,fk(t,o,l,e,r))}else return Es(i,Qc(t,e,r))}function dk(t,e){if(!e.type.compatibleContent(t.type))throw new Gc("Cannot join "+e.type.name+" onto "+t.type.name)}function wp(t,e,n){let r=t.node(n);return dk(r,e.node(n)),r}function Ss(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Yo(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Ss(t.nodeAfter,r),i++));for(let l=i;l<o;l++)Ss(s.child(l),r);e&&e.depth==n&&e.textOffset&&Ss(e.nodeBefore,r)}function Es(t,e){return t.type.checkContent(e),t.copy(e)}function fk(t,e,n,r,s){let i=t.depth>s&&wp(t,e,s+1),o=r.depth>s&&wp(n,r,s+1),l=[];return Yo(null,t,s,l),i&&o&&e.index(s)==n.index(s)?(dk(i,o),Ss(Es(i,fk(t,e,n,r,s+1)),l)):(i&&Ss(Es(i,Qc(t,e,s+1)),l),Yo(e,n,s,l),o&&Ss(Es(o,Qc(n,r,s+1)),l)),Yo(r,null,s,l),new O(l)}function Qc(t,e,n){let r=[];if(Yo(null,t,n,r),t.depth>n){let s=wp(t,e,n+1);Ss(Es(s,Qc(t,e,n+1)),r)}return Yo(e,null,n,r),new O(r)}function oR(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(O.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Tl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return te.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let l=r;r=s,s=l}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Yc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(i),c=i-a;if(r.push(o,l,s+a),!c||(o=o.child(l),o.isText))break;i=c-1,s+=a+1}return new Tl(n,r,i)}static resolveCached(e,n){let r=Wy.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else Wy.set(e,r=new lR);let s=r.elts[r.i]=Tl.resolve(e,n);return r.i=(r.i+1)%aR,s}}class lR{constructor(){this.elts=[],this.i=0}}const aR=12,Wy=new WeakMap;class Yc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cR=Object.create(null);let Cs=class xp{constructor(e,n,r,s=te.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||O.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Jc(this.attrs,n||e.defaultAttrs||cR)&&te.sameSet(this.marks,r||te.none)}copy(e=null){return e==this.content?this:new xp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new xp(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return j.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),l=s.start(o),c=s.node(o).content.cut(s.pos-l,i.pos-l);return new j(c,s.depth-o,i.depth-o)}replace(e,n,r){return iR(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Tl.resolveCached(this,e)}resolveNoCache(e){return Tl.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),hk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=O.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=s;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=te.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!te.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=O.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Cs.prototype.text=void 0;class Xc extends Cs{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Xc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Xc(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function hk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Rs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new uR(e,n);if(r.next==null)return Rs.empty;let s=pk(r);r.next&&r.err("Unexpected trailing text");let i=yR(gR(s));return vR(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return O.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,l.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:a}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!s.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:s}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Rs.empty=new Rs(!0);class uR{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function pk(t){let e=[];do e.push(dR(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function dR(t){let e=[];do e.push(fR(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fR(t){let e=mR(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=hR(t,e);else break;return e}function qy(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function hR(t,e){let n=qy(t),r=n;return t.eat(",")&&(t.next!="}"?r=qy(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function pR(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function mR(t){if(t.eat("(")){let e=pk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=pR(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gR(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function s(o,l){o.forEach(a=>a.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(i(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=i(o.exprs[a],l);if(a==o.exprs.length-1)return c;s(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),s(i(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return s(i(o.expr,l),a),s(i(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(i(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();s(i(o.expr,a),u),a=u}if(o.max==-1)s(i(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),s(i(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function mk(t,e){return e-t}function Ky(t,e){let n=[];return r(e),n.sort(mk);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:l,to:a}=i[o];!l&&n.indexOf(a)==-1&&r(a)}}}function yR(t){let e=Object.create(null);return n(Ky(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<s.length;u++)s[u][0]==l&&(c=s[u][1]);Ky(t,a).forEach(u=>{c||s.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new Rs(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(mk);i.next.push({type:s[o][0],next:e[l.join(",")]||n(l)})}return i}}function vR(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:a,next:c}=s.next[l];o.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gk(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function yk(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function vk(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function wk(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new xR(t,r,e[r]);return n}let Jy=class xk{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=wk(e,r.attrs),this.defaultAttrs=gk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Rs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:yk(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Cs(this,this.computeAttrs(e),O.from(n),te.setFrom(r))}createChecked(e=null,n,r){return n=O.from(n),this.checkContent(n),new Cs(this,this.computeAttrs(e),n,te.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=O.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(O.empty,!0);return i?new Cs(this,e,n.append(i),te.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){vk(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:te.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new xk(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wR(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class xR{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wR(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class xd{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=wk(e,s.attrs),this.excluded=null;let i=gk(this.attrs);this.instance=i?new te(this,i):null}create(e=null){return!e&&this.instance?this.instance:new te(this,yk(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new xd(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){vk(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class bk{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=ze.from(e.nodes),n.marks=ze.from(e.marks||{}),this.nodes=Jy.compile(this.spec.nodes,this),this.marks=xd.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Rs.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?Gy(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Gy(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Jy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Xc(r,r.defaultAttrs,e,te.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Cs.fromJSON(this,e)}markFromJSON(e){return te.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Gy(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let l in t.marks){let a=t.marks[l];(s=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function bR(t){return t.tag!=null}function kR(t){return t.style!=null}class Br{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(bR(s))this.tags.push(s);else if(kR(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Yy(this,n,!1);return r.addAll(e,te.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Yy(this,n,!0);return r.addAll(e,te.none,n.from,n.to),j.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(CR(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Xy(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Xy(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Br(e,Br.schemaRules(e)))}}const kk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},SR={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Sk={ol:!0,ul:!0},Zc=1,eu=2,Xo=4;function Qy(t,e,n){return e!=null?(e?Zc:0)|(e==="full"?eu:0):t&&t.whitespace=="pre"?Zc|eu:n&~Xo}class Ra{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=te.none,this.match=i||(o&Xo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(O.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Zc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=O.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(O.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!kk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Yy{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let s=n.topNode,i,o=Qy(null,n.preserveWhitespace,0)|(r?Xo:0);s?i=new Ra(s.type,s.attrs,te.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Ra(null,null,te.none,!0,null,o):i=new Ra(e.schema.topNodeType,null,te.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top;if(s.options&eu||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s.options&Zc)s.options&eu?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=s.content[s.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=e.nodeName.toLowerCase(),i;Sk.hasOwnProperty(s)&&this.parser.normalizeLists&&ER(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,r));if(o?o.ignore:SR.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,c=this.needsBlock;if(kk.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let u=o&&o.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),l&&this.sync(a),this.needsBlock=c}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?i:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(i,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(i=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}i&&this.sync(l)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=s==null?null:e.childNodes[s];o!=l;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n){let r,s;for(let i=this.open;i>=0;i--){let o=this.nodes[i],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,s=o,!l.length)||o.solid)break}if(!r)return null;this.sync(s);for(let i=0;i<r.length;i++)n=this.enterInner(r[i],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=te.none;for(let o of r.concat(e.marks))(s.type?s.type.allowsMarkType(o.type):Zy(o.type,e.type))&&(i=o.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Qy(e,i,o.options);o.options&Xo&&o.content.length==0&&(l|=Xo);let a=te.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Zy(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Ra(e,n,a,s,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=i;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&s?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ER(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Sk.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function CR(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Xy(t){let e={};for(let n in t)e[n]=t[n];return e}function Zy(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class qs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Af(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let l=0,a=0;for(;l<i.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(i[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)s=i.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=lc(Af(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&lc(Af(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return lc(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new qs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=ev(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return ev(e.marks)}}function ev(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Af(t){return t.document||window.document}const tv=new WeakMap;function NR(t){let e=tv.get(t);return e===void 0&&tv.set(t,e=TR(t)),e}function TR(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function lc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=NR(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let l,a=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:m}=lc(t,f,n,r);if(a.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const Ek=65535,Ck=Math.pow(2,16);function OR(t,e){return t+e*Ck}function nv(t){return t&Ek}function _R(t){return(t-(t&Ek))/Ck}const Nk=1,Tk=2,ac=4,Ok=8;class bp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Ok)>0}get deletedBefore(){return(this.delInfo&(Nk|ac))>0}get deletedAfter(){return(this.delInfo&(Tk|ac))>0}get deletedAcross(){return(this.delInfo&ac)>0}}class Mt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Mt.empty)return Mt.empty}recover(e){let n=0,r=nv(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+_R(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?s:0);if(a>e)break;let c=this.ranges[l+i],u=this.ranges[l+o],d=a+c;if(e<=d){let f=c?e==a?-1:e==d?1:n:n,h=a+s+(f<0?0:u);if(r)return h;let m=e==(n<0?a:d)?null:OR(l/3,e-a),g=e==a?Tk:e==d?Nk:ac;return(n<0?e!=a:e!=d)&&(g|=Ok),new bp(h,g,m)}s+=u-c}return r?e+s:new bp(e+s,0,null)}touches(e,n){let r=0,s=nv(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+i],u=a+c;if(e<=u&&l==s*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[s+n],u=this.ranges[s+r];e(l,l+c,a,a+u),i+=u-c}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Mt.empty:new Mt(e<0?[0,-e,0]:[0,0,e])}}Mt.empty=new Mt([]);class _i{constructor(e=[],n,r=0,s=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=s}slice(e=0,n=this.maps.length){return new _i(this.maps,this.mirror,e,n)}copy(){return new _i(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let s=e.getMirror(n);this.appendMap(e.maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e.maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new _i;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this.maps[i],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this.maps[a].recover(l.recover);continue}}s|=l.delInfo,e=l.pos}return r?e:new bp(e,s,null)}}const Pf=Object.create(null);class nt{getMap(){return Mt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Pf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Pf)throw new RangeError("Duplicate use of step JSON ID "+e);return Pf[e]=n,n.prototype.jsonID=e,n}}class ke{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ke(e,null)}static fail(e){return new ke(null,e)}static fromReplace(e,n,r,s){try{return ke.ok(e.replace(n,r,s))}catch(i){if(i instanceof Gc)return ke.fail(i.message);throw i}}}function ag(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(ag(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return O.fromArray(r)}class Mr extends nt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new j(ag(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return ke.fromReplace(e,this.from,this.to,i)}invert(){return new Mn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Mr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Mr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Mr(n.from,n.to,e.markFromJSON(n.mark))}}nt.jsonID("addMark",Mr);class Mn extends nt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new j(ag(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return ke.fromReplace(e,this.from,this.to,r)}invert(){return new Mr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Mn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Mn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Mn(n.from,n.to,e.markFromJSON(n.mark))}}nt.jsonID("removeMark",Mn);class Ar extends nt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ke.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ke.fromReplace(e,this.pos,this.pos+1,new j(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Ar(this.pos,n.marks[s]);return new Ar(this.pos,this.mark)}}return new Hi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ar(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ar(n.pos,e.markFromJSON(n.mark))}}nt.jsonID("addNodeMark",Ar);class Hi extends nt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ke.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ke.fromReplace(e,this.pos,this.pos+1,new j(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ar(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Hi(n.pos,e.markFromJSON(n.mark))}}nt.jsonID("removeNodeMark",Hi);class Pe extends nt{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&kp(e,this.from,this.to)?ke.fail("Structure replace would overwrite content"):ke.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Pe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Pe(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Pe)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?j.empty:new j(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Pe(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?j.empty:new j(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Pe(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pe(n.from,n.to,j.fromJSON(e,n.slice),!!n.structure)}}nt.jsonID("replace",Pe);class Re extends nt{constructor(e,n,r,s,i,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=l}apply(e){if(this.structure&&(kp(e,this.from,this.gapFrom)||kp(e,this.gapTo,this.to)))return ke.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ke.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ke.fromReplace(e,this.from,this.to,r):ke.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Re(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new Re(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Re(n.from,n.to,n.gapFrom,n.gapTo,j.fromJSON(e,n.slice),n.insert,!!n.structure)}}nt.jsonID("replaceAround",Re);function kp(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function MR(t,e,n,r){let s=[],i=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+a.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[g])?o.to=h:s.push(o=new Mn(f,h,d[g])));l&&l.to==f?l.to=h:i.push(l=new Mr(f,h,r))}}),s.forEach(a=>t.step(a)),i.forEach(a=>t.step(a))}function AR(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;i++;let a=null;if(r instanceof xd){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],f;for(let h=0;h<s.length;h++){let m=s[h];m.step==i-1&&d.eq(s[h].style)&&(f=m)}f?(f.to=c,f.step=i):s.push({style:d,from:Math.max(l,e),to:c,step:i})}}}),s.forEach(o=>t.step(new Mn(o.from,o.to,o.style)))}function cg(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<i.childCount;a++){let c=i.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Pe(l,u,j.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Mn(l,u,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,m;for(;f=h.exec(c.text);)m||(m=new j(O.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Pe(l+f.index,l+f.index+f[0].length,m))}}l=u}if(!r.validEnd){let a=r.fillBefore(O.empty,!0);t.replace(l,l,new j(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function PR(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function io(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(i,o,n))return r;if(r==0||s.type.spec.isolating||!PR(s,i,o))break}return null}function jR(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),l=s.after(i+1),a=o,c=l,u=O.empty,d=0;for(let m=i,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=O.from(r.node(m).copy(u)),d++):a--;let f=O.empty,h=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,f=O.from(s.node(m).copy(f)),h++):c++;t.step(new Re(a,c,o,l,new j(u.append(f),d,h),u.size-d,!0))}function ug(t,e,n=null,r=t){let s=RR(t,e),i=s&&DR(r,e);return i?s.map(rv).concat({type:e,attrs:n}).concat(i.map(rv)):null}function rv(t){return{type:t,attrs:null}}function RR(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function DR(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<s;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function IR(t,e,n){let r=O.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=O.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new Re(s,i,s,i,new j(r,0,0),n.length,!0))}function LR(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,a)&&$R(t.doc,t.mapping.slice(i).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&Mk(t,o,l,i),cg(t,t.mapping.slice(i).map(l,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(l,1),f=u.map(l+o.nodeSize,1);return t.step(new Re(d,f,d+1,f-1,new j(O.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&_k(t,o,l,i),!1}})}function _k(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(s.text);){let a=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Mk(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function $R(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function FR(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Re(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new j(O.from(o),0,0),1,!0))}function Mi(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let l=s.indexAfter(i),a=r&&r[0];return s.node(i).canReplaceWith(l,l,a?a.type:s.node(i+1).type)}function zR(t,e,n=1,r){let s=t.doc.resolve(e),i=O.empty,o=O.empty;for(let l=s.depth,a=s.depth-n,c=n-1;l>a;l--,c--){i=O.from(s.node(l).copy(i));let u=r&&r[c];o=O.from(u?u.type.create(u.attrs,o):s.node(l).copy(o))}t.step(new Pe(e,e,new j(i.append(o),n,n),!0))}function Xr(t,e){let n=t.resolve(e),r=n.index();return Ak(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function BR(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function Ak(t,e){return!!(t&&e&&!t.isLeaf&&BR(t,e))}function bd(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,l=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),l++,o=r.node(s).maybeChild(l)):(i=r.node(s).maybeChild(l-1),o=r.node(s+1)),i&&!i.isTextblock&&Ak(i,o)&&r.node(s).canReplace(l,l+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function UR(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Mk(t,u.node(),u.before(),l)}o.inlineContent&&cg(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Pe(c,a.map(e+n,-1),j.empty,!0)),r===!0){let u=t.doc.resolve(c);_k(t,u.node(),u.before(),t.steps.length)}return t}function HR(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function Pk(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(a,a,s);else{let d=c.contentMatchAt(a).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function kd(t,e,n=e,r=j.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return jk(s,i,r)?new Pe(e,n,r):new VR(s,i,r).fit()}function jk(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class VR{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=O.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=O.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,l=s.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let a=new j(i,o,l);return e>-1?new Re(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Pe(r.pos,s.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=jf(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(O.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=jf(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new j(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=jf(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new j(Ro(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new j(Ro(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));d=d.matchFragment(s)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let g=l.child(c),v=d.matchType(g.type);if(!v)break;c++,(c>1||a==0||g.content.size)&&(d=v,u.push(Rk(g.mark(f.allowedMarks(g.marks)),c==1?a:0,c==l.childCount?h:-1)))}let m=c==l.childCount;m||(h=-1),this.placed=Do(this.placed,n,O.from(u)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?j.empty:new j(Ro(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new j(Ro(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Rf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Rf(e,n,s,r,i);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Rf(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Do(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Do(this.placed,this.depth,O.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(O.empty,!0);n.childCount&&(this.placed=Do(this.placed,this.frontier.length,n))}}function Ro(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ro(t.firstChild.content,e-1,n)))}function Do(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Do(t.lastChild.content,e-1,n)))}function jf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Rk(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Rk(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O.empty,!0)))),t.copy(r)}function Rf(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,o);return l&&!WR(n,i.content,o)?l:null}function WR(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qR(t){return t.spec.defining||t.spec.definingForContent}function KR(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(jk(s,i,r))return t.step(new Pe(e,n,r));let o=Ik(s,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?l=f:s.before(f)==h&&o.splice(1,0,-f)}let a=o.indexOf(l),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let m=f.firstChild;if(c.push(m),h==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let h=c[f],m=qR(h.type);if(m&&!h.sameMarkup(s.node(Math.abs(l)-1)))u=f;else if(m||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),m=c[h];if(m)for(let g=0;g<o.length;g++){let v=o[(g+a)%o.length],y=!0;v<0&&(y=!1,v=-v);let w=s.node(v-1),b=s.index(v-1);if(w.canReplaceWith(b,b,m.type,m.marks))return t.replace(s.before(v),y?i.after(v):n,new j(Dk(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),n=i.after(h))}}function Dk(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(Dk(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(O.empty,!0))}return t}function JR(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=HR(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new j(O.from(r),0,0))}function GR(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=Ik(r,s);for(let o=0;o<i.length;o++){let l=i[o],a=o==i.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),s.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),s.indexAfter(l-1))))return t.delete(r.before(l),s.after(l))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function Ik(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Ai extends nt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ke.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return ke.fromReplace(e,this.pos,this.pos+1,new j(O.from(s),0,n.isLeaf?0:1))}getMap(){return Mt.empty}invert(e){return new Ai(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ai(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ai(n.pos,n.attr,n.value)}}nt.jsonID("attr",Ai);class Ol extends nt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ke.ok(r)}getMap(){return Mt.empty}invert(e){return new Ol(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ol(n.attr,n.value)}}nt.jsonID("docAttr",Ol);let Vi=class extends Error{};Vi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Vi.prototype=Object.create(Error.prototype);Vi.prototype.constructor=Vi;Vi.prototype.name="TransformError";class Lk{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _i}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Vi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=j.empty){let s=kd(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new j(O.from(r),0,0))}delete(e,n){return this.replace(e,n,j.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return KR(this,e,n,r),this}replaceRangeWith(e,n,r){return JR(this,e,n,r),this}deleteRange(e,n){return GR(this,e,n),this}lift(e,n){return jR(this,e,n),this}join(e,n=1){return UR(this,e,n),this}wrap(e,n){return IR(this,e,n),this}setBlockType(e,n=e,r,s=null){return LR(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return FR(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Ai(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ol(e,n)),this}addNodeMark(e,n){return this.step(new Ar(e,n)),this}removeNodeMark(e,n){if(!(n instanceof te)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Hi(e,n)),this}split(e,n=1,r){return zR(this,e,n,r),this}addMark(e,n,r){return MR(this,e,n,r),this}removeMark(e,n,r){return AR(this,e,n,r),this}clearIncompatible(e,n,r){return cg(this,e,n,r),this}}const Df=Object.create(null);class H{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new QR(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=j.empty){let r=n.content.lastChild,s=null;for(let l=0;l<n.openEnd;l++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(i);e.replaceRange(u.map(a.pos),u.map(c.pos),l?j.empty:n),l==0&&ov(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:l}=s[i],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),ov(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new B(e):si(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?si(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):si(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new gn(e.node(0))}static atStart(e){return si(e,e,0,0,1)||new gn(e)}static atEnd(e){return si(e,e,e.content.size,e.childCount,-1)||new gn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Df[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Df)throw new RangeError("Duplicate use of selection JSON ID "+e);return Df[e]=n,n.prototype.jsonID=e,n}getBookmark(){return B.between(this.$anchor,this.$head).getBookmark()}}H.prototype.visible=!0;class QR{constructor(e,n){this.$from=e,this.$to=n}}let sv=!1;function iv(t){!sv&&!t.parent.inlineContent&&(sv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class B extends H{constructor(e,n=e){iv(e),iv(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return H.near(r);let s=e.resolve(n.map(this.anchor));return new B(s.parent.inlineContent?s:r,r)}replace(e,n=j.empty){if(super.replace(e,n),n==j.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof B&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Sd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new B(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=H.findFrom(n,r,!0)||H.findFrom(n,-r,!0);if(i)n=i.$head;else return H.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(H.findFrom(e,-r,!0)||H.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new B(e,n)}}H.jsonID("text",B);class Sd{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Sd(e.map(this.anchor),e.map(this.head))}resolve(e){return B.between(e.resolve(this.anchor),e.resolve(this.head))}}class L extends H{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?H.near(i):new L(i)}content(){return new j(O.from(this.node),0,0)}eq(e){return e instanceof L&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new L(e.resolve(n.anchor))}static create(e,n){return new L(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}L.prototype.visible=!1;H.jsonID("node",L);class dg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Sd(r,r):new dg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&L.isSelectable(r)?new L(n):H.near(n)}}class gn extends H{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=j.empty){if(n==j.empty){e.delete(0,e.doc.content.size);let r=H.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new gn(e)}map(e){return new gn(e)}eq(e){return e instanceof gn}getBookmark(){return YR}}H.jsonID("all",gn);const YR={map(){return this},resolve(t){return new gn(t)}};function si(t,e,n,r,s,i=!1){if(e.inlineContent)return B.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let l=e.child(o);if(l.isAtom){if(!i&&L.isSelectable(l))return L.create(t,n-(s<0?l.nodeSize:0))}else{let a=si(t,l,n+s,s<0?l.childCount:0,s,i);if(a)return a}n+=l.nodeSize*s}return null}function ov(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Pe||s instanceof Re))return;let i=t.mapping.maps[r],o;i.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(H.near(t.doc.resolve(o),n))}const lv=1,Da=2,av=4;class XR extends Lk{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|lv)&~Da,this.storedMarks=null,this}get selectionSet(){return(this.updated&lv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Da,this}ensureMarks(e){return te.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Da)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Da,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||te.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),this.selection.empty||this.setSelection(H.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=av,this}get scrolledIntoView(){return(this.updated&av)>0}}function cv(t,e){return!e||!t?t:t.bind(e)}class Io{constructor(e,n,r){this.name=e,this.init=cv(n.init,r),this.apply=cv(n.apply,r)}}const ZR=[new Io("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Io("selection",{init(t,e){return t.selection||H.atStart(e.doc)},apply(t){return t.selection}}),new Io("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Io("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class If{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ZR.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Io(r.key,r.spec.state,r))})}}class wi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=s?s[o].n:0,c=s?s[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new wi(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new XR(this)}static create(e){let n=new If(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new wi(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new If(this.schema,e.plugins),r=n.fields,s=new wi(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new If(e.schema,e.plugins),i=new wi(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Cs.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=H.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){i[o.name]=c.fromJSON.call(a,e,n[l],i);return}}i[o.name]=o.init(e,i)}}),i}}function $k(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=$k(s,e,{})),n[r]=s}return n}class qe{constructor(e){this.spec=e,this.props={},e.props&&$k(e.props,this,this.props),this.key=e.key?e.key.key:Fk("plugin")}getState(e){return e[this.key]}}const Lf=Object.create(null);function Fk(t){return t in Lf?t+"$"+ ++Lf[t]:(Lf[t]=0,t+"$")}class $t{constructor(e="key"){this.key=Fk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Be=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},_l=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Sp=null;const zn=function(t,e,n){let r=Sp||(Sp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},eD=function(){Sp=null},Ds=function(t,e,n,r){return n&&(uv(t,e,n,r,-1)||uv(t,e,n,r,1))},tD=/^(img|br|input|textarea|hr)$/i;function uv(t,e,n,r,s){for(;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Kt(t))){let i=t.parentNode;if(!i||i.nodeType!=1||ea(t)||tD.test(t.nodeName)||t.contentEditable=="false")return!1;e=Be(t)+(s<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.contentEditable=="false")return!1;e=s<0?Kt(t):0}else return!1}}function Kt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nD(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Kt(t)}else if(t.parentNode&&!ea(t))e=Be(t),t=t.parentNode;else return null}}function rD(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ea(t))e=Be(t)+1,t=t.parentNode;else return null}}function sD(t,e,n){for(let r=e==0,s=e==Kt(t);r||s;){if(t==n)return!0;let i=Be(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==Kt(t)}}function ea(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ed=function(t){return t.focusNode&&Ds(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function cs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function iD(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function oD(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Kt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Kt(r.startContainer),r.startOffset)}}}const jn=typeof navigator<"u"?navigator:null,dv=typeof document<"u"?document:null,Zr=jn&&jn.userAgent||"",Ep=/Edge\/(\d+)/.exec(Zr),zk=/MSIE \d/.exec(Zr),Cp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zr),kt=!!(zk||Cp||Ep),Ur=zk?document.documentMode:Cp?+Cp[1]:Ep?+Ep[1]:0,wn=!kt&&/gecko\/(\d+)/i.test(Zr);wn&&+(/Firefox\/(\d+)/.exec(Zr)||[0,0])[1];const Np=!kt&&/Chrome\/(\d+)/.exec(Zr),et=!!Np,Bk=Np?+Np[1]:0,lt=!kt&&!!jn&&/Apple Computer/.test(jn.vendor),Wi=lt&&(/Mobile\/\w+/.test(Zr)||!!jn&&jn.maxTouchPoints>2),Vt=Wi||(jn?/Mac/.test(jn.platform):!1),lD=jn?/Win/.test(jn.platform):!1,fn=/Android \d/.test(Zr),ta=!!dv&&"webkitFontSmoothing"in dv.documentElement.style,aD=ta?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function cD(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ln(t,e){return typeof t=="number"?t:t[e]}function uD(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function fv(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;o=_l(o)){if(o.nodeType!=1)continue;let l=o,a=l==i.body,c=a?cD(i):uD(l),u=0,d=0;if(e.top<c.top+Ln(r,"top")?d=-(c.top-e.top+Ln(s,"top")):e.bottom>c.bottom-Ln(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ln(s,"top")-c.top:e.bottom-c.bottom+Ln(s,"bottom")),e.left<c.left+Ln(r,"left")?u=-(c.left-e.left+Ln(s,"left")):e.right>c.right-Ln(r,"right")&&(u=e.right-c.right+Ln(s,"right")),u||d)if(a)i.defaultView.scrollBy(u,d);else{let f=l.scrollLeft,h=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let m=l.scrollLeft-f,g=l.scrollTop-h;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function dD(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(i,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,s=a.top;break}}return{refDOM:r,refTop:s,stack:Uk(t.dom)}}function Uk(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=_l(r));return e}function fD({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Hk(n,r==0?0:r-e)}function Hk(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ti=null;function hD(t){if(t.setActive)return t.setActive();if(ti)return t.focus(ti);let e=Uk(t);t.focus(ti==null?{get preventScroll(){return ti={preventScroll:!0},!0}}:void 0),ti||(ti=!1,Hk(e,0))}function Vk(t,e){let n,r=2e8,s,i=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=zn(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let m=f[h];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=u,r=g,s=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!n&&a&&(n=a,s=c,r=0),n&&n.nodeType==3?pD(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:Vk(n,s)}function pD(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let i=dr(r,1);if(i.top!=i.bottom&&fg(e,i))return{node:t,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function fg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function mD(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function gD(t,e,n){let{node:r,offset:s}=Vk(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function yD(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?s=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(s=l.posAfter),o=!0),!l.contentDOM&&s<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}i=l.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function Wk(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(fg(e,c))return Wk(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function vD(t,e){let n=t.dom.ownerDocument,r,s=0,i=oD(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!fg(e,c)||(o=Wk(t.dom,e,c),!o))return null}if(lt)for(let c=o;r&&c;c=_l(c))c.draggable&&(r=void 0);if(o=mD(o,e),r){if(wn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;ta&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(l=yD(t,r,s,e))}l==null&&(l=gD(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function hv(t){return t.top<t.bottom||t.left<t.right}function dr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(hv(r))return r}return Array.prototype.find.call(n,hv)||t.getBoundingClientRect()}const wD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qk(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=ta||wn;if(r.nodeType==3)if(o&&(wD.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let a=dr(zn(r,s,s),n);if(wn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=dr(zn(r,s-1,s-1),-1);if(c.top==a.top){let u=dr(zn(r,s,s+1),-1);if(u.top!=a.top)return No(u,u.left<c.left)}}return a}else{let a=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(a--,u=1):n<0?a--:c++,No(dr(zn(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==Kt(r))){let a=r.childNodes[s-1];if(a.nodeType==1)return $f(a.getBoundingClientRect(),!1)}if(i==null&&s<Kt(r)){let a=r.childNodes[s];if(a.nodeType==1)return $f(a.getBoundingClientRect(),!0)}return $f(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==Kt(r))){let a=r.childNodes[s-1],c=a.nodeType==3?zn(a,Kt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return No(dr(c,1),!1)}if(i==null&&s<Kt(r)){let a=r.childNodes[s];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?zn(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return No(dr(c,-1),!0)}return No(dr(r.nodeType==3?zn(r):r,-n),n>=0)}function No(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function $f(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Kk(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function xD(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return Kk(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let o=qk(t,s.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=zn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const bD=/[\u0590-\u08ac]/;function kD(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,l=t.domSelection();return l?!bD.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?i:o:Kk(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!h.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==g;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let pv=null,mv=null,gv=!1;function SD(t,e,n){return pv==e&&mv==n?gv:(pv=e,mv=n,gv=n=="up"||n=="down"?xD(t,e,n):kD(t,e,n))}const Yt=0,yv=1,ms=2,Rn=3;class na{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Yt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Be(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],l=i+o.size;if(l>e||o instanceof Gk){s=e-i;break}i=l}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Jk&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Be(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Be(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(s==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Be(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Be(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let f=0,h=0;f<this.children.length;f++){let m=this.children[f],g=h+m.size;if(i>h&&o<g)return m.setSelection(e-h-m.border,n-h-m.border,r,s);h=g}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((wn||lt)&&e==n){let{node:f,offset:h}=l;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let m=f,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:Be(g)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=f.childNodes[h-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(wn&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(s=!0)}if(!(s||u&&lt)&&Ds(l.node,l.offset,c.anchorNode,c.anchorOffset)&&Ds(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let h=l;l=a,a=h}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+i.border,a=o-i.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?ms:yv,e==l&&n==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Rn:i.markDirty(e-l,n-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?ms:Rn}r=o}this.dirty=ms}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ms:yv;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Jk extends na{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Yt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ED extends na{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Is extends na{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=qs.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Is(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Rn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Rn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Yt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Yt}}slice(e,n,r){let s=Is.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Op(i,n,o,r)),e>0&&(i=Op(i,0,e,r));for(let l=0;l<i.length;l++)i[l].parent=s;return s.children=i,s}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Hr extends na{constructor(e,n,r,s,i,o,l,a,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=l}static create(e,n,r,s,i,o){let l=i.nodeViews[n.type.name],a,c=l&&l(n,i,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=qs.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Xk(u,r,n),c?a=new CD(e,n,r,s,u,d||null,f,c,i,o+1):n.isText?new Cd(e,n,r,s,u,f,i):new Hr(e,n,r,s,u,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>O.empty)}return e}matchesNode(e,n,r){return this.dirty==Yt&&e.eq(this.node)&&tu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new TD(this,o&&o.node,e);MD(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?te.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,s)},(c,u,d,f)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,d,f)||l&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(h=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(c,u,d,h,e)||a.updateNextNode(c,u,d,e,f,s)||a.addNode(c,u,d,e,s),s+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ms)&&(o&&this.protectLocalComposition(e,o),Qk(this.contentDOM,this.children,e),Wi&&AD(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof B)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,l=PD(this.node.content,o,r-n,s-n);return l<0?null:{node:i,pos:l,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new ED(this,i,n,s);e.input.compositionNodes.push(o),this.children=Op(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==Rn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Yt}updateOuterDeco(e){if(tu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Yk(this.dom,this.nodeDOM,Tp(this.outerDeco,this.node,n),Tp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function vv(t,e,n,r,s){Xk(r,e,t);let i=new Hr(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class Cd extends Hr{constructor(e,n,r,s,i,o,l){super(e,n,r,s,i,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Rn||this.dirty!=Yt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Yt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Yt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new Cd(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Rn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Gk extends na{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Yt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CD extends Hr{constructor(e,n,r,s,i,o,l,a,c,u){super(e,n,r,s,i,o,l,c,u),this.spec=a}update(e,n,r,s){if(this.dirty==Rn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Qk(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=wv(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(l,r);if(o instanceof Is){let a=r?r.previousSibling:t.lastChild;Qk(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=wv(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Zo=function(t){t&&(this.nodeName=t)};Zo.prototype=Object.create(null);const gs=[new Zo];function Tp(t,e,n){if(t.length==0)return gs;let r=n?gs[0]:new Zo,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new Zo(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&s.length==1&&s.push(r=new Zo(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return s}function Yk(t,e,n,r){if(n==gs&&r==gs)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],l=n[i];if(i){let a;l&&l.nodeName==o.nodeName&&s!=t&&(a=s.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(s),l=gs[0]),s=a}ND(s,l||gs[0],o)}return s}function ND(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function Xk(t,e,n){return Yk(t,t,gs,Tp(e,n,t.nodeType!=1))}function tu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function wv(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class TD{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=OD(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Yt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Is.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==Rn&&o.dom==o.contentDOM&&(o.dirty=ms),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Hr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=i)return!1;let u=a.dom,d,f=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Rn&&tu(n,a.outerDeco));if(!f&&a.update(e,n,r,s))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,s,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ms,d.updateChildren(s,o+1),d.dirty=Yt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!tu(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let l=Hr.create(this.top,n,r,s,i,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,s,i){let o=Hr.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new Jk(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Is;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Cd)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((lt||et)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new Gk(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function OD(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof Is)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(s-1))break;--s,i.set(l,s),o.push(l)}}return{index:s,matched:i,matches:o.reverse()}}function _D(t,e){return t.type.side-e.type.side}function MD(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let v=s[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(_D);for(let v=0;v<d.length;v++)n(d[v],c,!!a)}else n(u,c,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let v=0;v<l.length;v++)l[v].to<=i&&l.splice(v--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)l.push(s[o++]);let m=i+f.nodeSize;if(f.isText){let v=m;o<s.length&&s[o].from<v&&(v=s[o].from);for(let y=0;y<l.length;y++)l[y].to<v&&(v=l[y].to);v<m&&(a=f.cut(v-i),f=f.cut(0,v-i),m=v,h=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,g,e.forChild(i,f),h),i=m}}function AD(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function PD(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),l=i;if(i+=o.nodeSize,!o.isText)continue;let a=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;a+=c.text}if(i>=n){if(i>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Op(t,e,n,r,s){let i=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?i.push(a):(c<e&&i.push(a.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(a.slice(n-c,a.size,r)))}return i}function hg(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(Ed(n)){for(a=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&L.isSelectable(d)&&s.parent&&!(d.isInline&&sD(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new L(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;c=pg(t,u,l,d)}return c}function Zk(t){return t.editable?t.hasFocus():tS(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Jn(t,e=!1){let n=t.state.selection;if(eS(t,n),!!Zk(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&et){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ds(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)RD(t);else{let{anchor:r,head:s}=n,i,o;xv&&!(n instanceof B)&&(n.$from.parent.inlineContent||(i=bv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=bv(t,n.to))),t.docView.setSelection(r,s,t.root,e),xv&&(i&&kv(i),o&&kv(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&jD(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const xv=lt||et&&Bk<63;function bv(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(lt&&s&&s.contentEditable=="false")return Ff(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Ff(s);if(i)return Ff(i)}}function Ff(t){return t.contentEditable="true",lt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function kv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function jD(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Zk(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function RD(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setStart(r.parentNode,Be(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!t.state.selection.visible&&kt&&Ur<=11&&(r.disabled=!0,r.disabled=!1)}function eS(t,e){if(e instanceof L){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Sv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Sv(t)}function Sv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function pg(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||B.between(e,n,r)}function Ev(t){return t.editable&&!t.hasFocus()?!1:tS(t)}function tS(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function DD(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ds(e.node,e.offset,n.anchorNode,n.anchorOffset)}function _p(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&H.findFrom(i,e)}function gr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Cv(t,e,n){let r=t.state.selection;if(r instanceof B)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return gr(t,new B(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=_p(t.state,e);return s&&s instanceof L?gr(t,s):!1}else if(!(Vt&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let l=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?L.isSelectable(i)?gr(t,new L(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):ta?gr(t,new B(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof L&&r.node.isInline)return gr(t,new B(e>0?r.$to:r.$from));{let s=_p(t.state,e);return s?gr(t,s):!1}}}function nu(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function el(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ni(t,e){return e<0?ID(t):LD(t)}function ID(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(wn&&n.nodeType==1&&r<nu(n)&&el(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(el(l,-1))s=n,i=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(nS(n))break;{let l=n.previousSibling;for(;l&&el(l,-1);)s=n.parentNode,i=Be(l),l=l.previousSibling;if(l)n=l,r=nu(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Mp(t,n,r):s&&Mp(t,s,i)}function LD(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=nu(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let l=n.childNodes[r];if(el(l,1))i=n,o=++r;else break}else{if(nS(n))break;{let l=n.nextSibling;for(;l&&el(l,1);)i=l.parentNode,o=Be(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=nu(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&Mp(t,i,o)}function nS(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function $D(t,e){for(;t&&e==t.childNodes.length&&!ea(t);)e=Be(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function FD(t,e){for(;t&&!e&&!ea(t);)e=Be(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Mp(t,e,n){if(e.nodeType!=3){let i,o;(o=$D(e,n))?(e=o,n=0):(i=FD(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ed(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Jn(t)},50)}function Nv(t,e){let n=t.state.doc.resolve(e);if(!(et||lD)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Tv(t,e,n){let r=t.state.selection;if(r instanceof B&&!r.empty||n.indexOf("s")>-1||Vt&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=_p(t.state,e);if(o&&o instanceof L)return gr(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,l=r instanceof gn?H.near(o,e):H.findFrom(o,e);return l?gr(t,l):!1}return!1}function Ov(t,e){if(!(t.state.selection instanceof B))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function _v(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function zD(t){if(!lt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;_v(t,r,"true"),setTimeout(()=>_v(t,r,"false"),20)}return!1}function BD(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function UD(t,e){let n=e.keyCode,r=BD(e);if(n==8||Vt&&n==72&&r=="c")return Ov(t,-1)||ni(t,-1);if(n==46&&!e.shiftKey||Vt&&n==68&&r=="c")return Ov(t,1)||ni(t,1);if(n==13||n==27)return!0;if(n==37||Vt&&n==66&&r=="c"){let s=n==37?Nv(t,t.state.selection.from)=="ltr"?-1:1:-1;return Cv(t,s,r)||ni(t,s)}else if(n==39||Vt&&n==70&&r=="c"){let s=n==39?Nv(t,t.state.selection.from)=="ltr"?1:-1:1;return Cv(t,s,r)||ni(t,s)}else{if(n==38||Vt&&n==80&&r=="c")return Tv(t,-1,r)||ni(t,-1);if(n==40||Vt&&n==78&&r=="c")return zD(t)||Tv(t,1,r)||ni(t,1);if(r==(Vt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function rS(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||qs.fromSchema(t.state.schema),l=cS(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=aS[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=l.createElement(u[h]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function sS(t,e,n,r,s){let i=s.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||i||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return e?new j(O.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):j.empty;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)l=d;else{let f=s.marks(),{schema:h}=t.state,m=qs.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(h.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=qD(n),ta&&KD(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Br.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!HD.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=JD(Mv(l,+u[1],+u[2]),u[4]);else if(l=j.maxOpen(VD(l.content,s),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Mv(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const HD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function VD(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(l=>{if(!o)return;let a=s.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&i.length&&oS(a,i,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=lS(o[o.length-1],i.length));let u=iS(l,a);o.push(u),s=s.matchType(u.type),i=a}}),o)return O.from(o)}return t}function iS(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,O.from(t));return t}function oS(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=oS(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(O.from(iS(n,t,s+1))))}}function lS(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,lS(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(O.empty,!0);return t.copy(n.append(r))}function Ap(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(i=0),s<r-1&&(l=Ap(l,e,n,r,s+1,i)),s>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,i<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(O.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function Mv(t,e,n){return e<t.openStart&&(t=new j(Ap(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new j(Ap(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const aS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Av=null;function cS(){return Av||(Av=document.implementation.createHTMLDocument("title"))}let zf=null;function WD(t){let e=window.trustedTypes;return e?(zf||(zf=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),zf.createHTML(t)):t}function qD(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=cS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&aS[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=WD(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function KD(t){let e=t.querySelectorAll(et?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function JD(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;s=O.from(a.create(r[l+1],s)),i++,o++}return new j(s,i,o)}const at={},ct={},GD={touchstart:!0,touchmove:!0};class QD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function YD(t){for(let e in at){let n=at[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{ZD(t,r)&&!mg(t,r)&&(t.editable||!(r.type in ct))&&n(t,r)},GD[e]?{passive:!0}:void 0)}lt&&t.dom.addEventListener("input",()=>null),Pp(t)}function Pr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function XD(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Pp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>mg(t,r))})}function mg(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function ZD(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function eI(t,e){!mg(t,e)&&at[e.type]&&(t.editable||!(e.type in ct))&&at[e.type](t,e)}ct.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dS(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(fn&&et&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Wi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,cs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||UD(t,n)?n.preventDefault():Pr(t,"key")};ct.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ct.keypress=(t,e)=>{let n=e;if(dS(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Vt&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof B)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,s))&&t.dispatch(t.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function Nd(t){return{left:t.clientX,top:t.clientY}}function tI(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function gg(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,l=>o>i.depth?l(t,n,i.nodeAfter,i.before(o),s,!0):l(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Pi(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function nI(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&L.isSelectable(r)?(Pi(t,new L(n)),!0):!1}function rI(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof L&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(L.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Pi(t,L.create(t.state.doc,s)),!0):!1}function sI(t,e,n,r,s){return gg(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?rI(t,n):nI(t,n))}function iI(t,e,n,r){return gg(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function oI(t,e,n,r){return gg(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||lI(t,n,r)}function lI(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Pi(t,B.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),l=s.before(i);if(o.inlineContent)Pi(t,B.create(r,l+1,l+1+o.content.size));else if(L.isSelectable(o))Pi(t,L.create(r,l));else continue;return!0}}function yg(t){return ru(t)}const uS=Vt?"metaKey":"ctrlKey";at.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=yg(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&tI(n,t.input.lastClick)&&!n[uS]&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i};let o=t.posAtCoords(Nd(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new aI(t,o,n,!!r)):(i=="doubleClick"?iI:oI)(t,o.pos,o.inside,n)?n.preventDefault():Pr(t,"pointer"))};class aI{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[uS],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const l=s?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof L&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Jn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Nd(e))),this.updateAllowDefault(e),this.allowDefault||!n?Pr(this.view,"pointer"):sI(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||lt&&this.mightDrag&&!this.mightDrag.node.isAtom||et&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Pi(this.view,H.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Pr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}at.touchstart=t=>{t.input.lastTouch=Date.now(),yg(t),Pr(t,"pointer")};at.touchmove=t=>{t.input.lastTouch=Date.now(),Pr(t,"pointer")};at.contextmenu=t=>yg(t);function dS(t,e){return t.composing?!0:lt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const cI=fn?5e3:-1;ct.compositionstart=ct.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof B&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ru(t,!0),t.markCursor=null;else if(ru(t,!e.selection.empty),wn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}fS(t,cI)};ct.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,fS(t,20))};function fS(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ru(t),e))}function hS(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=dI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function uI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=nD(e.focusNode,e.focusOffset),r=rD(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function dI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ru(t,e=!1){if(!(fn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),hS(t),e||t.docView&&t.docView.dirty){let n=hg(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function fI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ml=kt&&Ur<15||Wi&&aD<604;at.copy=ct.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Ml?null:n.clipboardData,o=r.content(),{dom:l,text:a}=rS(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):fI(t,l),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function pI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Al(t,r.value,null,s,e):Al(t,r.textContent,r.innerHTML,s,e)},50)}function Al(t,e,n,r,s){let i=sS(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,s,i||j.empty)))return!0;if(!i)return!1;let o=hI(i),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pS(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ct.paste=(t,e)=>{let n=e;if(t.composing&&!fn)return;let r=Ml?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Al(t,pS(r),r.getData("text/html"),s,n)?n.preventDefault():pI(t,n)};class mS{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const gS=Vt?"altKey":"ctrlKey";at.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(Nd(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof L?s.to-1:s.to))){if(r&&r.mightDrag)o=L.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=L.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=rS(t,l);(!n.dataTransfer.files.length||!et||Bk>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ml?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ml||n.dataTransfer.setData("text/plain",c),t.dragging=new mS(u,!n[gS],o)};at.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ct.dragover=ct.dragenter=(t,e)=>e.preventDefault();ct.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(Nd(n));if(!s)return;let i=t.state.doc.resolve(s.pos),o=r&&r.slice;o?t.someProp("transformPasted",m=>{o=m(o,t)}):o=sS(t,pS(n.dataTransfer),Ml?null:n.dataTransfer.getData("text/html"),!1,i);let l=!!(r&&!n[gS]);if(t.someProp("handleDrop",m=>m(t,n,o||j.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?Pk(t.state.doc,i.pos,o):i.pos;a==null&&(a=i.pos);let c=t.state.tr;if(l){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&L.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new L(h));else{let m=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((g,v,y,w)=>m=w),c.setSelection(pg(t,h,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};at.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Jn(t)},20))};at.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};at.beforeinput=(t,e)=>{if(et&&fn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,cs(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in ct)at[t]=ct[t];function Pl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class su{constructor(e,n){this.toDOM=e,this.spec=n||Ns,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new Gt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof su&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Pl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Vr{constructor(e,n){this.attrs=e,this.spec=n||Ns}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Gt(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Vr&&Pl(this.attrs,e.attrs)&&Pl(this.spec,e.spec)}static is(e){return e.type instanceof Vr}destroy(){}}class vg{constructor(e,n){this.attrs=e,this.spec=n||Ns}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Gt(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof vg&&Pl(this.attrs,e.attrs)&&Pl(this.spec,e.spec)}destroy(){}}class Gt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Gt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Gt(e,e,new su(n,r))}static inline(e,n,r,s){return new Gt(e,n,new Vr(r,s))}static node(e,n,r,s){return new Gt(e,n,new vg(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vr}get widget(){return this.type instanceof su}}const ii=[],Ns={};class Te{constructor(e,n){this.local=e.length?e:ii,this.children=n.length?n:ii}static create(e,n){return n.length?iu(n,e,0,Ns):Qe}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!i||i(l.spec))&&r.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,s+l,i)}}map(e,n,r){return this==Qe||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ns)}mapInner(e,n,r,s,i){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,s);a&&a.type.valid(n,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?mI(this.children,o||[],e,n,r,s,i):o?new Te(o.sort(Ts),ii):Qe}add(e,n){return n.length?this==Qe?Te.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((l,a)=>{let c=a+r,u;if(u=vS(n,l,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<a;)i+=3;s[i]==a?s[i+2]=s[i+2].addInner(l,u,c+1):s.splice(i,0,a,a+l.nodeSize,iu(u,l,c+1,Ns)),i+=3}});let o=yS(i?wS(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Te(o.length?this.local.concat(o).sort(Ts):this.local,s||this.children)}remove(e){return e.length==0||this==Qe?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,l=r[i]+n,a=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,l+1);c!=Qe?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let l=0;l<s.length;l++)s[l].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Te(s,r):Qe}forChild(e,n){if(this==Qe)return this;if(n.isLeaf)return Te.empty;let r,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let i=e+1,o=i+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>i&&a.type instanceof Vr){let c=Math.max(i,a.from)-i,u=Math.min(o,a.to)-i;c<u&&(s||(s=[])).push(a.copy(c,u))}}if(s){let l=new Te(s.sort(Ts),ii);return r?new Er([l,r]):l}return r||Qe}eq(e){if(this==e)return!0;if(!(e instanceof Te)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return wg(this.localsInner(e))}localsInner(e){if(this==Qe)return ii;if(e.inlineContent||!this.local.some(Vr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Te.empty=new Te([],[]);Te.removeOverlap=wg;const Qe=Te.empty;class Er{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Ns));return Er.from(r)}forChild(e,n){if(n.isLeaf)return Te.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=Qe&&(i instanceof Er?r=r.concat(i.members):r.push(i))}return Er.from(r)}eq(e){if(!(e instanceof Er)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?wg(r?n:n.sort(Ts)):ii}static from(e){switch(e.length){case 0:return Qe;case 1:return e[0];default:return new Er(e.every(n=>n instanceof Te)?e:e.reduce((n,r)=>n.concat(r instanceof Te?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function mI(t,e,n,r,s,i,o){let l=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,m,g)=>{let v=g-m-(h-f);for(let y=0;y<l.length;y+=3){let w=l[y+1];if(w<0||f>w+u-d)continue;let b=l[y]+u-d;h>=b?l[y+1]=f<=b?-2:-1:f>=u&&v&&(l[y]+=v,l[y+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-s;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[c+1]+i,-1),h=f-s,{index:m,offset:g}=r.content.findIndex(d),v=r.maybeChild(m);if(v&&g==d&&g+v.nodeSize==h){let y=l[c+2].mapInner(n,v,u+1,t[c]+i+1,o);y!=Qe?(l[c]=d,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=gI(l,t,e,n,s,i,o),u=iu(c,r,0,o);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Te(e.sort(Ts),l)}function yS(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Gt(s.from+e,s.to+e,s.type))}return n}function gI(t,e,n,r,s,i,o){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,s,c);d?n.push(d):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+i+1);return n}function vS(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function wS(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function iu(t,e,n,r){let s=[],i=!1;e.forEach((l,a)=>{let c=vS(t,l,a+n);if(c){i=!0;let u=iu(c,l,n+a+1,r);u!=Qe&&s.push(a,a+l.nodeSize,u)}});let o=yS(i?wS(t):t,-n).sort(Ts);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new Te(o,s):Qe}function Ts(t,e){return t.from-e.from||t.to-e.to}function wg(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),Pv(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Pv(e,s,r.copy(i.from,r.to)));break}}}return e}function Pv(t,e,n){for(;e<t.length&&Ts(n,t[e])>0;)e++;t.splice(e,0,n)}function Bf(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Qe&&e.push(r)}),t.cursorWrapper&&e.push(Te.create(t.state.doc,[t.cursorWrapper.deco])),Er.from(e)}const yI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},vI=kt&&Ur<=11;class wI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new wI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);kt&&Ur<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),vI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ev(this.view)){if(this.suppressingSelectionUpdates)return Jn(this.view);if(kt&&Ur<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ds(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=_l(i))n.add(i);for(let i=e.anchorNode;i;i=_l(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ev(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(wn&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||SI(e,d)!=h)&&f.remove()}}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ed(r)&&(c=hg(e))&&c.eq(H.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Jn(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),bI(e)),this.handleDOMChange(i,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Jn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(kt&&Ur<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?Be(s)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?Be(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let jv=new WeakMap,Rv=!1;function bI(t){if(!jv.has(t)&&(jv.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=wn,Rv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Rv=!0}}function Dv(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ds(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function kI(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Dv(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Dv(t,n):null}function SI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function EI(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ed(a)||c.push({node:a.focusNode,offset:a.focusOffset})),et&&t.input.lastKeyCode===8)for(let v=i;v>s;v--){let y=r.childNodes[v-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){i=v;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||Br.fromSchema(t.state.schema),h=d.resolve(o),m=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:CI,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:l}}function CI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(lt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||lt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const NI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function TI(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=hg(t,M);if(R&&!t.state.selection.eq(R)){if(et&&fn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ee=>ee(t,cs(13,"Enter"))))return;let z=t.state.tr.setSelection(R);M=="pointer"?z.setMeta("pointer",!0):M=="key"&&z.scrollIntoView(),i&&z.setMeta("composition",i),t.dispatch(z)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=EI(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=MI(d.content,c.doc.content,c.from,f,h);if(m&&t.input.domChangeCount++,(Wi&&t.input.lastIOSEnter>Date.now()-225||fn)&&s.some(M=>M.nodeType==1&&!NI.test(M.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",M=>M(t,cs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof B&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let M=Iv(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let R=t.state.tr.setSelection(M);i&&R.setMeta("composition",i),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof B&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),kt&&Ur<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=u.resolve(m.start),w=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA,b;if((Wi&&t.input.lastIOSEnter>Date.now()-225&&(!w||s.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(v)&&(b=H.findFrom(c.doc.resolve(g.pos+1),1,!0))&&b.head==v.pos)&&t.someProp("handleKeyDown",M=>M(t,cs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&_I(u,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",M=>M(t,cs(8,"Backspace")))){fn&&et&&t.domObserver.suppressSelectionUpdates();return}et&&fn&&m.endB==m.start&&(t.input.lastAndroidDelete=Date.now()),fn&&!w&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,cs(13,"Enter"))})},20));let k=m.start,E=m.endA,S,C,N;if(w){if(g.pos==v.pos)kt&&Ur<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Jn(t),20)),S=t.state.tr.delete(k,E),C=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(N=OI(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start()))))S=t.state.tr,N.type=="add"?S.addMark(k,E,N.mark):S.removeMark(k,E,N.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",R=>R(t,k,E,M)))return;S=t.state.tr.insertText(M,k,E)}}if(S||(S=t.state.tr.replace(k,E,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let M=Iv(t,S.doc,c.sel);M&&!(et&&fn&&t.composing&&M.empty&&(m.start!=m.endB||t.input.lastAndroidDelete<Date.now()-100)&&(M.head==k||M.head==S.mapping.map(E)-1)||kt&&M.empty&&M.head==k)&&S.setSelection(M)}C&&S.ensureMarks(C),i&&S.setMeta("composition",i),t.dispatch(S.scrollIntoView())}function Iv(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:pg(t,e.resolve(n.anchor),e.resolve(n.head))}function OI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,l,a;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)l=s[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(s.length==0&&i.length==1)l=i[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(O.from(c).eq(t))return{mark:l,type:o}}function _I(t,e,n,r,s){if(n-e<=s.pos-r.pos||Uf(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&n==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Uf(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Uf(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Uf(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function MI(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let a=Math.max(0,i-Math.min(o,l));r-=o+a-i}if(o<i&&t.size<e.size){let a=r<=i&&r>=o?i-r:0;i-=a,i&&i<e.size&&Lv(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-o),o=i}else if(l<i){let a=r<=i&&r>=l?i-r:0;i-=a,i&&i<t.size&&Lv(t.textBetween(i-1,i+1))&&(i+=a?1:-1),o=i+(o-l),l=i}return{start:i,endA:o,endB:l}}function Lv(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class AI{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new QD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Uv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=zv(this),Fv(this),this.nodeViews=Bv(this),this.docView=vv(this.state.doc,$v(this),Bf(this),this.dom,this),this.domObserver=new xI(this,(r,s,i,o)=>TI(this,r,s,i,o)),this.domObserver.start(),YD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Pp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Uv),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(hS(this),o=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Bv(this);jI(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Pp(this),this.editable=zv(this),Fv(this);let a=Bf(this),c=$v(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&dD(this);if(o){this.domObserver.stop();let h=d&&(kt||et)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&PI(s.selection,e.selection);if(d){let m=et?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=uI(this)),(i||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=vv(e.doc,c,a,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&DD(this))?Jn(this,h):(eS(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&fD(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof L){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&fv(this,n.getBoundingClientRect(),e)}else fv(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new mS(e.slice,e.move,s<0?void 0:L.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(s=n?n(l):l))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let l=i[o].props[e];if(l!=null&&(s=n?n(l):l))return s}}hasFocus(){if(kt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&hD(this.dom),Jn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return vD(this,e)}coordsAtPos(e,n=1){return qk(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return SD(this,n||this.state,e)}pasteHTML(e,n){return Al(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Al(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(XD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Bf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,eD())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return eI(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?lt&&this.root.nodeType===11&&iD(this.dom.ownerDocument)==this.dom&&kI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function $v(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Gt.node(0,t.state.doc.content.size,e)]}function Fv(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Gt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function zv(t){return!t.someProp("editable",e=>e(t.state)===!1)}function PI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Bv(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function jI(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Uv(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Kr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ou={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},RI=typeof navigator<"u"&&/Mac/.test(navigator.platform),DI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ue=0;Ue<10;Ue++)Kr[48+Ue]=Kr[96+Ue]=String(Ue);for(var Ue=1;Ue<=24;Ue++)Kr[Ue+111]="F"+Ue;for(var Ue=65;Ue<=90;Ue++)Kr[Ue]=String.fromCharCode(Ue+32),ou[Ue]=String.fromCharCode(Ue);for(var Hf in Kr)ou.hasOwnProperty(Hf)||(ou[Hf]=Kr[Hf]);function II(t){var e=RI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||DI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ou:Kr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const LI=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function $I(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))LI?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function FI(t){let e=Object.create(null);for(let n in t)e[$I(n)]=t[n];return e}function Vf(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zI(t){return new qe({props:{handleKeyDown:xS(t)}})}function xS(t){let e=FI(t);return function(n,r){let s=II(r),i,o=e[Vf(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let l=e[Vf(s,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(i=Kr[r.keyCode])&&i!=s){let l=e[Vf(i,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const BI=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function bS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const UI=(t,e,n)=>{let r=bS(t,n);if(!r)return!1;let s=xg(r);if(!s){let o=r.blockRange(),l=o&&io(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let i=s.nodeBefore;if(CS(t,s,e,-1))return!0;if(r.parent.content.size==0&&(qi(i,"end")||L.isSelectable(i)))for(let o=r.depth;;o--){let l=kd(t.doc,r.before(o),r.after(o),j.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(qi(i,"end")?H.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):L.create(a.doc,s.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},HI=(t,e,n)=>{let r=bS(t,n);if(!r)return!1;let s=xg(r);return s?kS(t,s,e):!1},VI=(t,e,n)=>{let r=SS(t,n);if(!r)return!1;let s=bg(r);return s?kS(t,s,e):!1};function kS(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=kd(t.doc,i,a,j.empty);if(!c||c.from!=i||c instanceof Pe&&c.slice.size>=a-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(B.create(u.doc,i)),n(u.scrollIntoView())}return!0}function qi(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const WI=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=xg(r)}let o=i&&i.nodeBefore;return!o||!L.isSelectable(o)?!1:(e&&e(t.tr.setSelection(L.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function xg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function SS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const qI=(t,e,n)=>{let r=SS(t,n);if(!r)return!1;let s=bg(r);if(!s)return!1;let i=s.nodeAfter;if(CS(t,s,e,1))return!0;if(r.parent.content.size==0&&(qi(i,"start")||L.isSelectable(i))){let o=kd(t.doc,r.before(),r.after(),j.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(qi(i,"start")?H.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):L.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},KI=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=bg(r)}let o=i&&i.nodeAfter;return!o||!L.isSelectable(o)?!1:(e&&e(t.tr.setSelection(L.create(t.doc,i.pos)).scrollIntoView()),!0)};function bg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const JI=(t,e)=>{let n=t.selection,r=n instanceof L,s;if(r){if(n.node.isTextblock||!Xr(t.doc,n.from))return!1;s=n.from}else if(s=bd(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(L.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},GI=(t,e)=>{let n=t.selection,r;if(n instanceof L){if(n.node.isTextblock||!Xr(t.doc,n.to))return!1;r=n.to}else if(r=bd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},QI=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&io(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},YI=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function ES(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const XI=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=ES(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(H.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},ZI=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof gn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=ES(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=t.tr.insert(o,i.createAndFill());l.setSelection(B.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},eL=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Mi(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&io(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},tL=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(L.create(t.doc,s))),!0)};function nL(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Xr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function CS(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,l,a=s.type.spec.isolating||i.type.spec.isolating;if(!a&&nL(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,m=O.empty;for(let y=o.length-1;y>=0;y--)m=O.from(o[y].create(null,m));m=O.from(s.copy(m));let g=t.tr.step(new Re(e.pos-1,h,e.pos,h,new j(m,1,0),o.length,!0)),v=g.doc.resolve(h+2*o.length);v.nodeAfter&&v.nodeAfter.type==s.type&&Xr(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&a?null:H.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&io(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&qi(i,"start",!0)&&qi(s,"end")){let h=s,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=i,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let y=O.empty;for(let b=m.length-1;b>=0;b--)y=O.from(m[b].copy(y));let w=t.tr.step(new Re(e.pos-m.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new j(y,m.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function NS(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(B.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const rL=NS(-1),sL=NS(1);function iL(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),l=o&&ug(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Hv(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[i];n.doc.nodesBetween(o,l,(a,c)=>{if(s)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];i.setBlockType(l,a,t,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function oL(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);a=new Yc(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Yc(s,n.doc.resolve(i.end(o.depth)),o.depth)),l=!0}let c=ug(a,t,e,o);return c?(r&&r(lL(n.tr,o,c,l,t).scrollIntoView()),!0):!1}}function lL(t,e,n,r,s){let i=O.empty;for(let u=n.length-1;u>=0;u--)i=O.from(n[u].type.create(n[u].attrs,i));t.step(new Re(e.start-(r?2:0),e.end,e.start,e.end,new j(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Mi(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function aL(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?cL(e,n,t,i):uL(e,n,i):!0:!1}}function cL(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new Re(i-1,o,i,o,new j(O.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Yc(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const l=io(r);if(l==null)return!1;s.lift(r,l);let a=s.mapping.map(i,-1)-1;return Xr(s.doc,a)&&s.join(a),e(s.scrollIntoView()),!0}function uL(t,e,n){let r=t.tr,s=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=s.child(m).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?O.empty:O.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new Re(d-(l?1:0),f+(a?1:0),d+1,f-1,new j((l?O.empty:O.from(s.copy(O.empty))).append(a?O.empty:O.from(s.copy(O.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function dL(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=O.from(c?t.create():null),d=new j(O.from(t.create(null,O.from(l.type.create(null,u)))),c?3:1,0),f=i.start,h=i.end;n(e.tr.step(new Re(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Td(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}class Od{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:s}=n,{tr:i}=r,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,l=[],a=!!e,c=e||i.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const v=this.buildProps(c,n),y=h(...g)(v);return l.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,s=!1,i=e||r.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,n=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,l={tr:e,editor:s,view:o,state:Td({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class fL{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function I(t,e,n){return t.config[e]===void 0&&t.parent?I(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?I(t.parent,e,n):null}):t.config[e]}function _d(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function TS(t){const e=[],{nodeExtensions:n,markExtensions:r}=_d(t),s=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},a=I(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=I(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function Ie(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function We(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const l=i?i.split(" "):[],a=r[s]?r[s].split(" "):[],c=l.filter(u=>!a.includes(u));r[s]=[...a,...c].join(" ")}else if(s==="style"){const l=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function jp(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>We(n,r),{})}function OS(t){return typeof t=="function"}function q(t,e=void 0,...n){return OS(t)?e?t.bind(e)(...n):t(...n):t}function hL(t={}){return Object.keys(t).length===0&&t.constructor===Object}function pL(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Vv(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):pL(n.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...r,...s}}}}function Wv(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&hL(n)?!1:n!=null))}function mL(t,e){var n;const r=TS(t),{nodeExtensions:s,markExtensions:i}=_d(t),o=(n=s.find(c=>I(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(s.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,w)=>{const b=I(w,"extendNodeSchema",d);return{...y,...b?b(c):{}}},{}),h=Wv({...f,content:q(I(c,"content",d)),marks:q(I(c,"marks",d)),group:q(I(c,"group",d)),inline:q(I(c,"inline",d)),atom:q(I(c,"atom",d)),selectable:q(I(c,"selectable",d)),draggable:q(I(c,"draggable",d)),code:q(I(c,"code",d)),whitespace:q(I(c,"whitespace",d)),defining:q(I(c,"defining",d)),isolating:q(I(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),m=q(I(c,"parseHTML",d));m&&(h.parseDOM=m.map(y=>Vv(y,u)));const g=I(c,"renderHTML",d);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:jp(y,u)}));const v=I(c,"renderText",d);return v&&(h.toText=v),[c.name,h]})),a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,y)=>{const w=I(y,"extendMarkSchema",d);return{...v,...w?w(c):{}}},{}),h=Wv({...f,inclusive:q(I(c,"inclusive",d)),excludes:q(I(c,"excludes",d)),group:q(I(c,"group",d)),spanning:q(I(c,"spanning",d)),code:q(I(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var y;return[v.name,{default:(y=v==null?void 0:v.attribute)===null||y===void 0?void 0:y.default}]}))}),m=q(I(c,"parseHTML",d));m&&(h.parseDOM=m.map(v=>Vv(v,u)));const g=I(c,"renderHTML",d);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:jp(v,u)})),[c.name,h]}));return new bk({topNode:o,nodes:l,marks:a})}function Wf(t,e){return e.nodes[t]||e.marks[t]||null}function qv(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const gL=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,l)=>{var a,c;const u=((c=(a=s.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:s,pos:i,parent:o,index:l}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),n};function kg(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Md{constructor(e){this.find=e.find,this.handler=e.handler}}const yL=(t,e)=>{if(kg(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Ia(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=gL(c)+i;return o.forEach(f=>{if(u)return;const h=yL(d,f.find);if(!h)return;const m=a.state.tr,g=Td({state:a.state,transaction:m}),v={from:r-(h[0].length-i.length),to:s},{commands:y,chain:w,can:b}=new Od({editor:n,state:g});f.handler({state:g,range:v,match:h,commands:y,chain:w,can:b})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:s,text:i}),a.dispatch(m),u=!0)}),u}function vL(t){const{editor:e,rules:n}=t,r=new qe({state:{init(){return null},apply(s,i){const o=s.getMeta(r);if(o)return o;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{const{from:c,text:u}=l,d=c+u.length;Ia({editor:e,from:c,to:d,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,l){return Ia({editor:e,from:i,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Ia({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Ia({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wL(t){return Object.prototype.toString.call(t).slice(8,-1)}function La(t){return wL(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ad(t,e){const n={...t};return La(t)&&La(e)&&Object.keys(e).forEach(r=>{La(e[r])&&La(t[r])?n[r]=Ad(t[r],e[r]):n[r]=e[r]}),n}class tr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(I(this,"addOptions",{name:this.name}))),this.storage=q(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ad(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new tr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(I(n,"addOptions",{name:n.name})),n.storage=q(I(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function xL(t){return typeof t=="number"}class bL{constructor(e){this.find=e.find,this.handler=e.handler}}const kL=(t,e,n)=>{if(kg(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function SL(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Od({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),v=Math.min(s,m+h.content.size),y=h.textBetween(g-m,v-m,void 0,"");kL(y,i.find,o).forEach(b=>{if(b.index===void 0)return;const k=g+b.index+1,E=k+b[0].length,S={from:n.tr.mapping.map(k),to:n.tr.mapping.map(E)},C=i.handler({state:n,range:S,match:b,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});d.push(C)})}),d.every(h=>h!==null)}const EL=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function CL(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l=typeof DragEvent<"u"?new DragEvent("drop"):null;const a=({state:u,from:d,to:f,rule:h,pasteEvt:m})=>{const g=u.tr,v=Td({state:u,transaction:g});if(!(!SL({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:m,dropEvent:l})||!g.steps.length))return l=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g};return n.map(u=>new qe({view(d){const f=h=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(i=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var h;const m=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!s,v=m.getMeta("uiEvent")==="drop"&&!i,y=m.getMeta("applyPasteRules"),w=!!y;if(!g&&!v&&!w)return;if(w){const{from:E,text:S}=y,C=E+S.length,N=EL(S);return a({rule:u,state:h,from:E,to:{b:C},pasteEvt:N})}const b=f.doc.content.findDiffStart(h.doc.content),k=f.doc.content.findDiffEnd(h.doc.content);if(!(!xL(b)||!k||b===k.b))return a({rule:u,state:h,from:b,to:k,pasteEvt:o})}}))}function NL(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class xi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=xi.resolve(e),this.schema=mL(this.extensions,n),this.setupExtensions()}static resolve(e){const n=xi.sort(xi.flatten(e)),r=NL(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=I(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=I(r,"priority")||100,o=I(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Wf(n.name,this.schema)},s=I(n,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,n=xi.sort([...this.extensions].reverse()),r=[],s=[],i=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:Wf(o.name,this.schema)},a=[],c=I(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&I(o,"exitable",l)&&(u.ArrowRight=()=>tr.handleExit({editor:e,mark:o})),c){const g=Object.fromEntries(Object.entries(c()).map(([v,y])=>[v,()=>y({editor:e})]));u={...u,...g}}const d=zI(u);a.push(d);const f=I(o,"addInputRules",l);qv(o,e.options.enableInputRules)&&f&&r.push(...f());const h=I(o,"addPasteRules",l);qv(o,e.options.enablePasteRules)&&h&&s.push(...h());const m=I(o,"addProseMirrorPlugins",l);if(m){const g=m();a.push(...g)}return a}).flat();return[vL({editor:e,rules:r}),...CL({editor:e,rules:s}),...i]}get attributes(){return TS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=_d(this.extensions);return Object.fromEntries(n.filter(r=>!!I(r,"addNodeView")).map(r=>{const s=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ie(r.name,this.schema)},o=I(r,"addNodeView",i);if(!o)return[];const l=(a,c,u,d,f)=>{const h=jp(a,s);return o()({node:a,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Wf(e.name,this.schema)};e.type==="mark"&&(!((n=q(I(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const s=I(e,"onBeforeCreate",r),i=I(e,"onCreate",r),o=I(e,"onUpdate",r),l=I(e,"onSelectionUpdate",r),a=I(e,"onTransaction",r),c=I(e,"onFocus",r),u=I(e,"onBlur",r),d=I(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class ut{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(I(this,"addOptions",{name:this.name}))),this.storage=q(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ut(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ad(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new ut({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(I(n,"addOptions",{name:n.name})),n.storage=q(I(n,"addStorage",{name:n.name,options:n.options})),n}}function _S(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,s,(a,c,u,d)=>{var f;a.isBlock&&c>r&&(l+=i);const h=o==null?void 0:o[a.type.name];if(h)return u&&(l+=h({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,s-c))}),l}function MS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const TL=ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qe({key:new $t("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),l=Math.max(...i.map(u=>u.$to.pos)),a=MS(n);return _S(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),OL=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_L=(t=!1)=>({commands:e})=>e.setContent("",t),ML=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),f=c.resolve(u.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const m=io(h);if(l.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},AL=t=>e=>t(e),PL=()=>({state:t,dispatch:e})=>ZI(t,e),jL=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new B(r.doc.resolve(o-1))),!0},RL=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const l=s.before(i),a=s.after(i);t.delete(l,a).scrollIntoView()}return!0}return!1},DL=t=>({tr:e,state:n,dispatch:r})=>{const s=Ie(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const a=i.before(o),c=i.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},IL=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},LL=()=>({state:t,dispatch:e})=>BI(t,e),$L=()=>({commands:t})=>t.keyboardShortcut("Enter"),FL=()=>({state:t,dispatch:e})=>XI(t,e);function lu(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:kg(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function Rp(t,e,n={}){return t.find(r=>r.type===e&&lu(r.attrs,n))}function zL(t,e,n={}){return!!Rp(t,e,n)}function Sg(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if((!r.node||!r.node.marks.some(c=>c.type===e))&&(r=t.parent.childBefore(t.parentOffset)),!r.node||!r.node.marks.some(c=>c.type===e))return;const s=Rp([...r.node.marks],e,n);if(!s)return;let i=r.index,o=t.start()+r.offset,l=i+1,a=o+r.node.nodeSize;for(Rp([...r.node.marks],e,n);i>0&&s.isInSet(t.parent.child(i-1).marks);)i-=1,o-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&zL([...t.parent.child(l).marks],e,n);)a+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:a}}function es(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const BL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=es(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(s){const d=Sg(a,i,e);if(d&&d.from<=c&&d.to>=u){const f=B.create(o,d.from,d.to);n.setSelection(f)}}return!0},UL=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function AS(t){return t instanceof B}function ys(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function PS(t,e=null){if(!e)return null;const n=H.atStart(t),r=H.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?B.create(t,ys(0,s,i),ys(t.content.size,s,i)):B.create(t,ys(e,s,i),ys(e,s,i))}function Eg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const HL=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{Eg()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!AS(n.state.selection))return o(),!0;const l=PS(s.doc,t)||n.state.selection,a=n.state.selection.eq(l);return i&&(a||s.setSelection(l),a&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},VL=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),WL=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),jS=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&jS(r)}return t};function $a(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return jS(n)}function au(t,e,n){n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return O.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),au("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,l="";const a=new bk({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Br.fromSchema(a).parseSlice($a(t),n.parseOptions):Br.fromSchema(a).parse($a(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=Br.fromSchema(e);return n.slice?i.parseSlice($a(t),n.parseOptions).content:i.parse($a(t),n.parseOptions)}return au("",e,n)}function qL(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Pe||s instanceof Re))return;const i=t.mapping.maps[r];let o=0;i.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(H.near(t.doc.resolve(o),n))}const KL=t=>!("type"in t),JL=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=au(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:i.options.enableContentCheck})}catch(m){return i.emit("contentError",{editor:i,error:m,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((KL(l)?l:[l]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),a===c&&d){const{parent:m}=r.doc.resolve(a);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(a-=1,c+=1)}let h;u?(Array.isArray(e)?h=e.map(m=>m.text||"").join(""):typeof e=="object"&&e&&e.text?h=e.text:h=e,r.insertText(h,a,c)):(h=l,r.replaceWith(a,c,h)),n.updateSelection&&qL(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:h})}return!0},GL=()=>({state:t,dispatch:e})=>JI(t,e),QL=()=>({state:t,dispatch:e})=>GI(t,e),YL=()=>({state:t,dispatch:e})=>UI(t,e),XL=()=>({state:t,dispatch:e})=>qI(t,e),ZL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},e3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},t3=()=>({state:t,dispatch:e})=>HI(t,e),n3=()=>({state:t,dispatch:e})=>VI(t,e);function RS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function r3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))Eg()||RS()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const s3=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=r3(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function jl(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?Ie(e,t.schema):null,l=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),m=Math.min(s,f+d.nodeSize);l.push({node:d,from:h,to:m})});const a=s-r,c=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>lu(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=a}const i3=(t,e={})=>({state:n,dispatch:r})=>{const s=Ie(t,n.schema);return jl(n,s,e)?QI(n,r):!1},o3=()=>({state:t,dispatch:e})=>eL(t,e),l3=t=>({state:e,dispatch:n})=>{const r=Ie(t,e.schema);return aL(r)(e,n)},a3=()=>({state:t,dispatch:e})=>YI(t,e);function Pd(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Kv(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}const c3=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=Pd(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Ie(t,r.schema)),l==="mark"&&(o=es(t,r.schema)),s&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,Kv(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(Kv(d.attrs,e)))})})}),!0):!1},u3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),d3=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),f3=()=>({state:t,dispatch:e})=>WI(t,e),h3=()=>({state:t,dispatch:e})=>KI(t,e),p3=()=>({state:t,dispatch:e})=>tL(t,e),m3=()=>({state:t,dispatch:e})=>sL(t,e),g3=()=>({state:t,dispatch:e})=>rL(t,e);function Dp(t,e,n={},r={}){return au(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const y3=(t,e=!1,n={},r={})=>({editor:s,tr:i,dispatch:o,commands:l})=>{var a,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const d=Dp(t,s.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck});return o&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&i.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function DS(t,e){const n=es(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function v3(t,e){const n=new Lk(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function w3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function x3(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function b3(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Cg(t){return e=>b3(e.$from,t)}function k3(t,e){const n=qs.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function S3(t,e){const n={from:0,to:t.content.size};return _S(t,n,e)}function E3(t,e){const n=Ie(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,l=>{i.push(l)});const o=i.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function IS(t,e){const n=Pd(typeof e=="string"?e:e.name,t.schema);return n==="node"?E3(t,e):n==="mark"?DS(t,e):{}}function C3(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function N3(t){const e=C3(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function T3(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[i];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const c=e.slice(i).map(l,-1),u=e.slice(i).map(a),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),N3(r)}function Ng(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=Sg(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function cc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function Ip(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?es(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>lu(d.attrs,n,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,m=f.pos;t.doc.nodesBetween(h,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,v),w=Math.min(m,v+g.nodeSize),b=w-y;o+=b,l.push(...g.marks.map(k=>({mark:k,from:y,to:w})))})}),o===0)return!1;const a=l.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>lu(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=l.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+c:a)>=o}function O3(t,e,n={}){if(!e)return jl(t,null,n)||Ip(t,null,n);const r=Pd(e,t.schema);return r==="node"?jl(t,e,n):r==="mark"?Ip(t,e,n):!1}function Jv(t,e){const{nodeExtensions:n}=_d(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=q(I(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Tg(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Tg(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function _3(t){return t instanceof L}function M3(t,e,n){var r;const{selection:s}=e;let i=null;if(AS(s)&&(i=s.$cursor),i){const l=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=s;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=h&&m}return!c}),c})}const A3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:l}=i,a=es(t,r.schema);if(s)if(o){const c=DS(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const m=Math.max(h,u),g=Math.min(h+f.nodeSize,d);f.marks.find(y=>y.type===a)?f.marks.forEach(y=>{a===y.type&&n.addMark(m,g,a.create({...y.attrs,...e}))}):n.addMark(m,g,a.create(e))})});return M3(r,n,a)},P3=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),j3=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Ie(t,n.schema);return i.isTextblock?s().command(({commands:o})=>Hv(i,e)(n)?!0:o.clearNodes()).command(({state:o})=>Hv(i,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},R3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=ys(t,0,r.content.size),i=L.create(r,s);e.setSelection(i)}return!0},D3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=B.atStart(r).from,l=B.atEnd(r).to,a=ys(s,o,l),c=ys(i,o,l),u=B.create(r,a,c);e.setSelection(u)}return!0},I3=t=>({state:e,dispatch:n})=>{const r=Ie(t,e.schema);return dL(r)(e,n)};function Gv(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}const L3=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:l,$to:a}=i,c=s.extensionManager.attributes,u=cc(c,l.node().type.name,l.node().attrs);if(i instanceof L&&i.node.isBlock)return!l.parentOffset||!Mi(o,l.pos)?!1:(r&&(t&&Gv(n,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:w3(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,m=Mi(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&Mi(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(m=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(m&&(i instanceof B&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Gv(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},$3=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const l=Ie(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(s){let y=O.empty;const w=a.index(-1)?1:a.index(-2)?2:3;for(let N=a.depth-w;N>=a.depth-3;N-=1)y=O.from(a.node(N).copy(y));const b=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k={...cc(f,a.node().type.name,a.node().attrs),...e},E=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(k))||void 0;y=y.append(O.from(l.createAndFill(null,E)||void 0));const S=a.before(a.depth-(w-1));n.replace(S,a.after(-b),new j(y,4-w,0));let C=-1;n.doc.nodesBetween(S,n.doc.content.size,(N,M)=>{if(C>-1)return!1;N.isTextblock&&N.content.size===0&&(C=M+1)}),C>-1&&n.setSelection(B.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,m={...cc(f,d.type.name,d.attrs),...e},g={...cc(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const v=h?[{type:l,attrs:m},{type:h,attrs:g}]:[{type:l,attrs:m}];if(!Mi(n.doc,a.pos,2))return!1;if(s){const{selection:y,storedMarks:w}=r,{splittableMarks:b}=i.extensionManager,k=w||y.$to.parentOffset&&y.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!k||!s)return!0;const E=k.filter(S=>b.includes(S.type.name));n.ensureMarks(E)}return!0},qf=(t,e)=>{const n=Cg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Xr(t.doc,n.pos)&&t.join(n.pos),!0},Kf=(t,e)=>{const n=Cg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Xr(t.doc,r)&&t.join(r),!0},F3=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=Ie(t,o.schema),m=Ie(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:w}=g,b=y.blockRange(w),k=v||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const E=Cg(S=>Jv(S.type.name,d))(g);if(b.depth>=1&&E&&b.depth-E.depth<=1){if(E.node.type===h)return c.liftListItem(m);if(Jv(E.node.type.name,d)&&h.validContent(E.node.content)&&l)return a().command(()=>(i.setNodeMarkup(E.pos,h),!0)).command(()=>qf(i,h)).command(()=>Kf(i,h)).run()}return!n||!k||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>qf(i,h)).command(()=>Kf(i,h)).run():a().command(()=>{const S=u().wrapInList(h,r),C=k.filter(N=>f.includes(N.type.name));return i.ensureMarks(C),S?!0:c.clearNodes()}).wrapInList(h,r).command(()=>qf(i,h)).command(()=>Kf(i,h)).run()},z3=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=es(t,r.schema);return Ip(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},B3=(t,e,n={})=>({state:r,commands:s})=>{const i=Ie(t,r.schema),o=Ie(e,r.schema),l=jl(r,i,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?s.setNode(o,a):s.setNode(i,{...a,...n})},U3=(t,e={})=>({state:n,commands:r})=>{const s=Ie(t,n.schema);return jl(n,s,e)?r.lift(s):r.wrapIn(s,e)},H3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,a))}else o.delete(i.from,i.to)}return!0}}return!1},V3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},W3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=es(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!s)return!0;if(u&&o){let{from:f,to:h}=l;const m=(i=c.marks().find(v=>v.type===a))===null||i===void 0?void 0:i.attrs,g=Sg(c,a,m);g&&(f=g.from,h=g.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},q3=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=Pd(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=Ie(t,r.schema)),l==="mark"&&(o=es(t,r.schema)),s&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{i&&i===d.type&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const m=Math.max(f,c),g=Math.min(f+d.nodeSize,u);n.addMark(m,g,o.create({...h.attrs,...e}))}})})}),!0):!1},K3=(t,e={})=>({state:n,dispatch:r})=>{const s=Ie(t,n.schema);return iL(s,e)(n,r)},J3=(t,e={})=>({state:n,dispatch:r})=>{const s=Ie(t,n.schema);return oL(s,e)(n,r)};var G3=Object.freeze({__proto__:null,blur:OL,clearContent:_L,clearNodes:ML,command:AL,createParagraphNear:PL,cut:jL,deleteCurrentNode:RL,deleteNode:DL,deleteRange:IL,deleteSelection:LL,enter:$L,exitCode:FL,extendMarkRange:BL,first:UL,focus:HL,forEach:VL,insertContent:WL,insertContentAt:JL,joinBackward:YL,joinDown:QL,joinForward:XL,joinItemBackward:ZL,joinItemForward:e3,joinTextblockBackward:t3,joinTextblockForward:n3,joinUp:GL,keyboardShortcut:s3,lift:i3,liftEmptyBlock:o3,liftListItem:l3,newlineInCode:a3,resetAttributes:c3,scrollIntoView:u3,selectAll:d3,selectNodeBackward:f3,selectNodeForward:h3,selectParentNode:p3,selectTextblockEnd:m3,selectTextblockStart:g3,setContent:y3,setMark:A3,setMeta:P3,setNode:j3,setNodeSelection:R3,setTextSelection:D3,sinkListItem:I3,splitBlock:L3,splitListItem:$3,toggleList:F3,toggleMark:z3,toggleNode:B3,toggleWrap:U3,undoInputRule:H3,unsetAllMarks:V3,unsetMark:W3,updateAttributes:q3,wrapIn:K3,wrapInList:J3});const Q3=ut.create({name:"commands",addCommands(){return{...G3}}}),Y3=ut.create({name:"drop",addProseMirrorPlugins(){return[new qe({key:new $t("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),X3=ut.create({name:"editable",addProseMirrorPlugins(){return[new qe({key:new $t("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Z3=ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qe({key:new $t("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),e$=ut.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:f,parent:h}=d,m=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,g=m.parent.type.spec.isolating,v=d.pos-d.parentOffset,y=g&&m.parent.childCount===1?v===d.pos:H.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Eg()||RS()?i:s},addProseMirrorPlugins(){return[new qe({key:new $t("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:l}=e.selection,a=H.atStart(e.doc).from,c=H.atEnd(e.doc).to;if(i||!(o===a&&l===c)||!Tg(n.doc))return;const f=n.tr,h=Td({state:n,transaction:f}),{commands:m}=new Od({editor:this.editor,state:h});if(m.clearNodes(),!!f.steps.length)return f}})]}}),t$=ut.create({name:"paste",addProseMirrorPlugins(){return[new qe({key:new $t("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),n$=ut.create({name:"tabindex",addProseMirrorPlugins(){return[new qe({key:new $t("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class us{get name(){return this.node.type.name}constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new us(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new us(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new us(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1),l=this.resolvedPos.doc.resolve(o);if(!s&&l.depth<=this.depth)return;const a=new us(l,this.editor,s,s?n:null);s&&(a.actualDepth=this.depth+1),e.push(new us(l,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(i[a]!==n[a])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(a=>n[a]===o.node.attrs[a])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const r$=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function s$(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class i$ extends fL{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=s$(r$,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=OS(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;r=n.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[X3,TL.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Q3,Z3,e$,n$,Y3,t$].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new xi(s,this)}createCommandManager(){this.commandManager=new Od({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=Dp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=Dp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=PS(e,this.options.autofocus);this.view=new AI(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:wi.create({doc:e,selection:n||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return IS(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return O3(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return k3(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return S3(this.state.doc,{blockSeparator:n,textSerializers:{...MS(this.schema),...r}})}get isEmpty(){return Tg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new us(n,this)}get $doc(){return this.$pos(0)}}function Ki(t){return new Md({find:t.find,handler:({state:e,range:n,match:r})=>{const s=q(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(Ng(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+a,c);const f=n.from+a+o.length;i.addMark(n.from+a,f,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function o$(t){return new Md({find:t.find,handler:({state:e,range:n,match:r})=>{const s=q(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let l=n.to;const a=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;i.insert(c,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()}})}function Lp(t){return new Md({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=q(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function Rl(t){return new Md({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=q(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&ug(a,t.type,i);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(v=>h.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Xr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}let bn=class $p{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=q(I(this,"addOptions",{name:this.name}))),this.storage=q(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new $p(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ad(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new $p(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=q(I(n,"addOptions",{name:n.name})),n.storage=q(I(n,"addStorage",{name:n.name,options:n.options})),n}};function Ls(t){return new bL({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=q(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(Ng(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function l$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LS={exports:{}},Jf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function a$(){if(Qv)return Jf;Qv=1;var t=T;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(d,f){var h=f(),m=r({inst:{value:h,getSnapshot:f}}),g=m[0].inst,v=m[1];return i(function(){g.value=h,g.getSnapshot=f,a(g)&&v({inst:g})},[d,h,f]),s(function(){return a(g)&&v({inst:g}),d(function(){a(g)&&v({inst:g})})},[d]),o(h),h}function a(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return Jf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Jf}LS.exports=a$();var Og=LS.exports;const c$=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},u$=({contentComponent:t})=>{const e=Og.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return T.createElement(T.Fragment,null,Object.values(e))};function d$(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:AN.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}class f$ extends T.Component{constructor(e){var n;super(e),this.editorContentRef=T.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=d$(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return T.createElement(T.Fragment,null,T.createElement("div",{ref:c$(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&T.createElement(u$,{contentComponent:e.contentComponent}))}}const h$=x.forwardRef((t,e)=>{const n=T.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return T.createElement(f$,{key:n,innerRef:e,...t})}),p$=T.memo(h$);var m$=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},g$=l$(m$),$S={exports:{}},Gf={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function y$(){if(Yv)return Gf;Yv=1;var t=T,e=Og;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Gf.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=i(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=l(function(){function y(S){if(!w){if(w=!0,b=S,S=f(S),h!==void 0&&g.hasValue){var C=g.value;if(h(C,S))return k=C}return k=S}if(C=k,r(b,S))return C;var N=f(S);return h!==void 0&&h(C,N)?C:(b=S,k=N)}var w=!1,b,k,E=d===void 0?null:d;return[function(){return y(u())},E===null?void 0:function(){return y(E())}]},[u,d,f,h]);var v=s(c,m[0],m[1]);return o(function(){g.hasValue=!0,g.value=v},[v]),a(v),v},Gf}$S.exports=y$();var v$=$S.exports;class w${constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function x$(t){var e;const[n]=x.useState(()=>new w$(t.editor)),r=v$.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:g$);return x.useEffect(()=>n.watch(t.editor),[t.editor,n]),x.useDebugValue(r),r}const b$=!1,Fp=typeof window>"u",k$=Fp||!!(typeof window<"u"&&window.next);class S${constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Fp||k$?null:this.createEditor();if(this.options.current.immediatelyRender&&Fp&&b$)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)===null||i===void 0?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)===null||i===void 0?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)===null||i===void 0?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)===null||i===void 0?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)===null||i===void 0?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)===null||i===void 0?void 0:i.call(s,...r)}};return new i$(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function E$(t={},e=[]){const n=x.useRef(t);n.current=t;const[r]=x.useState(()=>new S$(n)),s=Og.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return x.useDebugValue(s),x.useEffect(r.onRender(e)),x$({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&i===0?0:i+1}),s}const C$=x.createContext({editor:null});C$.Consumer;const N$=x.createContext({onDragStart:void 0}),T$=()=>x.useContext(N$);T.forwardRef((t,e)=>{const{onDragStart:n}=T$(),r=t.as||"div";return T.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const O$=/^\s*>\s$/,_$=bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Rl({find:O$,type:this.type})]}}),M$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,A$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,P$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,j$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,R$=tr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ki({find:M$,type:this.type}),Ki({find:P$,type:this.type})]},addPasteRules(){return[Ls({find:A$,type:this.type}),Ls({find:j$,type:this.type})]}}),D$="listItem",Xv="textStyle",Zv=/^\s*([-+*])\s$/,I$=bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",We(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(D$,this.editor.getAttributes(Xv)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Rl({find:Zv,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Rl({find:Zv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Xv),editor:this.editor})),[t]}}),L$=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,$$=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,F$=tr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ki({find:L$,type:this.type})]},addPasteRules(){return[Ls({find:$$,type:this.type})]}}),z$=/^```([a-z]+)?[\s\n]$/,B$=/^~~~([a-z]+)?[\s\n]$/,U$=bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",We(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(H.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Lp({find:z$,type:this.type,getAttributes:t=>({language:t[1]})}),Lp({find:B$,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qe({key:new $t("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(B.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),H$=bn.create({name:"doc",topNode:!0,content:"block+"});function V$(t={}){return new qe({view(e){return new W$(e,t)}})}class W${constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let i,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")i=-pageXOffset,o=-pageYOffset;else{let l=s.getBoundingClientRect();i=l.left-s.scrollLeft,o=l.top-s.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Pk(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const q$=ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[V$(this.options)]}});class ye extends H{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ye.valid(r)?new ye(r):H.near(r)}content(){return j.empty}eq(e){return e instanceof ye&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ye(e.resolve(n.pos))}getBookmark(){return new _g(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!K$(e)||!J$(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ye.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let a=e.doc.resolve(s);if(ye.valid(a))return a}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!L.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let l=e.doc.resolve(s);if(ye.valid(l))return l}return null}}}ye.prototype.visible=!1;ye.findFrom=ye.findGapCursorFrom;H.jsonID("gapcursor",ye);class _g{constructor(e){this.pos=e}map(e){return new _g(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ye.valid(n)?new ye(n):H.near(n)}}function K$(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function J$(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function G$(){return new qe({props:{decorations:Z$,createSelectionBetween(t,e,n){return e.pos==n.pos&&ye.valid(n)?new ye(n):null},handleClick:Y$,handleKeyDown:Q$,handleDOMEvents:{beforeinput:X$}}})}const Q$=xS({ArrowLeft:Fa("horiz",-1),ArrowRight:Fa("horiz",1),ArrowUp:Fa("vert",-1),ArrowDown:Fa("vert",1)});function Fa(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof B){if(!i.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=ye.findGapCursorFrom(l,e,a);return c?(s&&s(r.tr.setSelection(new ye(c))),!0):!1}}function Y$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ye.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&L.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ye(r))),!0)}function X$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ye))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=O.empty;for(let o=r.length-1;o>=0;o--)s=O.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new j(s,0,0));return i.setSelection(B.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function Z$(t){if(!(t.selection instanceof ye))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Te.create(t.doc,[Gt.widget(t.selection.head,e,{key:"gapcursor"})])}const e4=ut.create({name:"gapCursor",addProseMirrorPlugins(){return[G$()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=q(I(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),t4=bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",We(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const d=a.filter(f=>l.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),n4=bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,We(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Lp({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var cu=200,De=function(){};De.prototype.append=function(e){return e.length?(e=De.from(e),!this.length&&e||e.length<cu&&this.leafAppend(e)||this.length<cu&&e.leafPrepend(this)||this.appendInner(e)):this};De.prototype.prepend=function(e){return e.length?De.from(e).append(this):this};De.prototype.appendInner=function(e){return new r4(this,e)};De.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?De.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};De.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};De.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};De.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};De.from=function(e){return e instanceof De?e:e&&e.length?new FS(e):De.empty};var FS=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,l){for(var a=i;a<o;a++)if(s(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,l){for(var a=i-1;a>=o;a--)if(s(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=cu)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=cu)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(De);De.empty=new FS([]);var r4=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var l=this.left.length;if(s<l&&this.left.forEachInner(r,s,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(r,Math.max(s-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(r,s-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(s,l),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(De);const s4=500;class hn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new Cn(d.map));let h=d.step.map(s.slice(i)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Cn(m,void 0,void 0,c.length+u.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return l=s?d.selection.map(s.slice(i)):d.selection,a=new hn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,s){let i=[],o=this.eventCount,l=this.items,a=!s&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Cn(e.mapping.maps[u],d,n),h;(h=a&&a.merge(f))&&(f=h,u?i.pop():l=l.slice(0,l.length-1)),i.push(f),n&&(o++,n=void 0),s||(a=f)}let c=o-r.depth;return c>o4&&(l=i4(l,c),o-=c),new hn(l.append(i),o)}remapping(e,n){let r=new _i;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new hn(this.items.append(e.map(n=>new Cn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},s);let a=n;this.items.forEach(f=>{let h=i.getMirror(--a);if(h==null)return;o=Math.min(o,h);let m=i.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(i.slice(a+1,h));v&&l++,r.push(new Cn(m,g,v))}else r.push(new Cn(m))},s);let c=[];for(let f=n;f<o;f++)c.push(new Cn(i.maps[f]));let u=this.items.slice(0,s).append(c).append(r),d=new hn(u,l);return d.emptyItemCount()>s4&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)s.push(o),o.selection&&i++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new Cn(c.invert(),a,u),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new hn(De.from(s.reverse()),i)}}hn.empty=new hn(De.empty,0);function i4(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Cn{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Cn(n.getMap().invert(),n,this.selection)}}}class yr{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const o4=20;function l4(t,e,n,r){let s=n.getMeta(Os),i;if(s)return s.historyState;n.getMeta(u4)&&(t=new yr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Os))return o.getMeta(Os).redo?new yr(t.done.addTransform(n,void 0,r,uc(e)),t.undone,e1(n.mapping.maps),t.prevTime,t.prevComposition):new yr(t.done,t.undone.addTransform(n,void 0,r,uc(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!a4(n,t.prevRanges)),c=o?Qf(t.prevRanges,n.mapping):e1(n.mapping.maps);return new yr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,uc(e)),hn.empty,c,n.time,l??t.prevComposition)}else return(i=n.getMeta("rebased"))?new yr(t.done.rebased(n,i),t.undone.rebased(n,i),Qf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new yr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Qf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function a4(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function e1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Qf(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function c4(t,e,n){let r=uc(e),s=Os.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),a=new yr(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(Os,{redo:n,historyState:a})}let Yf=!1,t1=null;function uc(t){let e=t.plugins;if(t1!=e){Yf=!1,t1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Yf=!0;break}}return Yf}const Os=new $t("history"),u4=new $t("closeHistory");function d4(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qe({key:Os,state:{init(){return new yr(hn.empty,hn.empty,null,0,-1)},apply(e,n,r){return l4(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?BS:r=="historyRedo"?US:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function zS(t,e){return(n,r)=>{let s=Os.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=c4(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const BS=zS(!1,!0),US=zS(!0,!0),f4=ut.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>BS(t,e),redo:()=>({state:t,dispatch:e})=>US(t,e)}},addProseMirrorPlugins(){return[d4(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),h4=bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",We(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:s}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):_3(n)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(B.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(L.create(o.doc,c.pos)):o.setSelection(B.create(o.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(u,d),o.setSelection(B.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[o$({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),p4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,m4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,g4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,y4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,v4=tr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ki({find:p4,type:this.type}),Ki({find:g4,type:this.type})]},addPasteRules(){return[Ls({find:m4,type:this.type}),Ls({find:y4,type:this.type})]}}),w4=bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",We(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),x4="listItem",n1="textStyle",r1=/^(\d+)\.\s$/,b4=bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",We(this.options.HTMLAttributes,n),0]:["ol",We(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(x4,this.editor.getAttributes(n1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Rl({find:r1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Rl({find:r1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(n1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),k4=bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),S4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,E4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,C4=tr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",We(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ki({find:S4,type:this.type})]},addPasteRules(){return[Ls({find:E4,type:this.type})]}}),N4=bn.create({name:"text",group:"inline"}),T4=ut.create({name:"starterKit",addExtensions(){var t,e,n,r,s,i,o,l,a,c,u,d,f,h,m,g,v,y;const w=[];return this.options.bold!==!1&&w.push(R$.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&w.push(_$.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(I$.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(F$.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(U$.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&w.push(H$.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&w.push(q$.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&w.push(e4.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&w.push(t4.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&w.push(n4.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(f4.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(h4.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(v4.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(w4.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(b4.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&w.push(k4.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(C4.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&w.push(N4.configure((y=this.options)===null||y===void 0?void 0:y.text)),w}}),O4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",_4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Ji=(t,e)=>{for(const n in e)t[n]=e[n];return t},zp="numeric",Bp="ascii",Up="alpha",dc="asciinumeric",za="alphanumeric",Hp="domain",HS="emoji",M4="scheme",A4="slashscheme",s1="whitespace";function P4(t,e){return t in e||(e[t]=[]),e[t]}function vs(t,e,n){e[zp]&&(e[dc]=!0,e[za]=!0),e[Bp]&&(e[dc]=!0,e[Up]=!0),e[dc]&&(e[za]=!0),e[Up]&&(e[za]=!0),e[za]&&(e[Hp]=!0),e[HS]&&(e[Hp]=!0);for(const r in e){const s=P4(r,n);s.indexOf(t)<0&&s.push(t)}}function j4(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function yt(t){t===void 0&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}yt.groups={};yt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e){return e===void 0&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||yt.groups;let s;return e&&e.j?s=e:(s=new yt(e),n&&r&&vs(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||yt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,l=s.go(t);if(l?(o=new yt,Ji(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new yt,i){if(r)if(o.t&&typeof o.t=="string"){const a=Ji(j4(o.t,r),n);vs(i,a,r)}else n&&vs(i,n,r);o.t=i}return s.j[t]=o,o}};const V=(t,e,n,r,s)=>t.ta(e,n,r,s),Bt=(t,e,n,r,s)=>t.tr(e,n,r,s),i1=(t,e,n,r,s)=>t.ts(e,n,r,s),A=(t,e,n,r,s)=>t.tt(e,n,r,s),$n="WORD",Vp="UWORD",Dl="LOCALHOST",Wp="TLD",qp="UTLD",fc="SCHEME",oi="SLASH_SCHEME",Mg="NUM",VS="WS",Ag="NL",tl="OPENBRACE",nl="CLOSEBRACE",uu="OPENBRACKET",du="CLOSEBRACKET",fu="OPENPAREN",hu="CLOSEPAREN",pu="OPENANGLEBRACKET",mu="CLOSEANGLEBRACKET",gu="FULLWIDTHLEFTPAREN",yu="FULLWIDTHRIGHTPAREN",vu="LEFTCORNERBRACKET",wu="RIGHTCORNERBRACKET",xu="LEFTWHITECORNERBRACKET",bu="RIGHTWHITECORNERBRACKET",ku="FULLWIDTHLESSTHAN",Su="FULLWIDTHGREATERTHAN",Eu="AMPERSAND",Cu="APOSTROPHE",Nu="ASTERISK",vr="AT",Tu="BACKSLASH",Ou="BACKTICK",_u="CARET",Cr="COLON",Pg="COMMA",Mu="DOLLAR",Nn="DOT",Au="EQUALS",jg="EXCLAMATION",Tn="HYPHEN",Pu="PERCENT",ju="PIPE",Ru="PLUS",Du="POUND",Iu="QUERY",Rg="QUOTE",Dg="SEMI",On="SLASH",rl="TILDE",Lu="UNDERSCORE",WS="EMOJI",$u="SYM";var qS=Object.freeze({__proto__:null,WORD:$n,UWORD:Vp,LOCALHOST:Dl,TLD:Wp,UTLD:qp,SCHEME:fc,SLASH_SCHEME:oi,NUM:Mg,WS:VS,NL:Ag,OPENBRACE:tl,CLOSEBRACE:nl,OPENBRACKET:uu,CLOSEBRACKET:du,OPENPAREN:fu,CLOSEPAREN:hu,OPENANGLEBRACKET:pu,CLOSEANGLEBRACKET:mu,FULLWIDTHLEFTPAREN:gu,FULLWIDTHRIGHTPAREN:yu,LEFTCORNERBRACKET:vu,RIGHTCORNERBRACKET:wu,LEFTWHITECORNERBRACKET:xu,RIGHTWHITECORNERBRACKET:bu,FULLWIDTHLESSTHAN:ku,FULLWIDTHGREATERTHAN:Su,AMPERSAND:Eu,APOSTROPHE:Cu,ASTERISK:Nu,AT:vr,BACKSLASH:Tu,BACKTICK:Ou,CARET:_u,COLON:Cr,COMMA:Pg,DOLLAR:Mu,DOT:Nn,EQUALS:Au,EXCLAMATION:jg,HYPHEN:Tn,PERCENT:Pu,PIPE:ju,PLUS:Ru,POUND:Du,QUERY:Iu,QUOTE:Rg,SEMI:Dg,SLASH:On,TILDE:rl,UNDERSCORE:Lu,EMOJI:WS,SYM:$u});const ri=/[a-z]/,Xf=new RegExp("\\p{L}","u"),Zf=new RegExp("\\p{Emoji}","u"),eh=/\d/,o1=/\s/,l1=`
`,R4="",D4="";let Ba=null,Ua=null;function I4(t){t===void 0&&(t=[]);const e={};yt.groups=e;const n=new yt;Ba==null&&(Ba=a1(O4)),Ua==null&&(Ua=a1(_4)),A(n,"'",Cu),A(n,"{",tl),A(n,"}",nl),A(n,"[",uu),A(n,"]",du),A(n,"(",fu),A(n,")",hu),A(n,"<",pu),A(n,">",mu),A(n,"",gu),A(n,"",yu),A(n,"",vu),A(n,"",wu),A(n,"",xu),A(n,"",bu),A(n,"",ku),A(n,"",Su),A(n,"&",Eu),A(n,"*",Nu),A(n,"@",vr),A(n,"`",Ou),A(n,"^",_u),A(n,":",Cr),A(n,",",Pg),A(n,"$",Mu),A(n,".",Nn),A(n,"=",Au),A(n,"!",jg),A(n,"-",Tn),A(n,"%",Pu),A(n,"|",ju),A(n,"+",Ru),A(n,"#",Du),A(n,"?",Iu),A(n,'"',Rg),A(n,"/",On),A(n,";",Dg),A(n,"~",rl),A(n,"_",Lu),A(n,"\\",Tu);const r=Bt(n,eh,Mg,{[zp]:!0});Bt(r,eh,r);const s=Bt(n,ri,$n,{[Bp]:!0});Bt(s,ri,s);const i=Bt(n,Xf,Vp,{[Up]:!0});Bt(i,ri),Bt(i,Xf,i);const o=Bt(n,o1,VS,{[s1]:!0});A(n,l1,Ag,{[s1]:!0}),A(o,l1),Bt(o,o1,o);const l=Bt(n,Zf,WS,{[HS]:!0});Bt(l,Zf,l),A(l,R4,l);const a=A(l,D4);Bt(a,Zf,l);const c=[[ri,s]],u=[[ri,null],[Xf,i]];for(let d=0;d<Ba.length;d++)ar(n,Ba[d],Wp,$n,c);for(let d=0;d<Ua.length;d++)ar(n,Ua[d],qp,Vp,u);vs(Wp,{tld:!0,ascii:!0},e),vs(qp,{utld:!0,alpha:!0},e),ar(n,"file",fc,$n,c),ar(n,"mailto",fc,$n,c),ar(n,"http",oi,$n,c),ar(n,"https",oi,$n,c),ar(n,"ftp",oi,$n,c),ar(n,"ftps",oi,$n,c),vs(fc,{scheme:!0,ascii:!0},e),vs(oi,{slashscheme:!0,ascii:!0},e),t=t.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<t.length;d++){const f=t[d][0],m=t[d][1]?{[M4]:!0}:{[A4]:!0};f.indexOf("-")>=0?m[Hp]=!0:ri.test(f)?eh.test(f)?m[dc]=!0:m[Bp]=!0:m[zp]=!0,i1(n,f,f,m)}return i1(n,"localhost",Dl,{ascii:!0}),n.jd=new yt($u),{start:n,tokens:Ji({groups:e},qS)}}function L4(t,e){const n=$4(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let l=t,a=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(d=0,f=0,u=l):d>=0&&(d+=n[o].length,f++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function $4(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ar(t,e,n,r,s){let i;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?i=t.j[a]:(i=new yt(r),i.jr=s.slice(),t.j[a]=i),t=i}return i=new yt(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function a1(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Il={defaultProtocol:"http",events:null,format:c1,formatHref:c1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ig(t,e){e===void 0&&(e=null);let n=Ji({},Il);t&&(n=Ji(n,t instanceof Ig?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Ig.prototype={o:Il,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Il[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function c1(t){return t}function KS(t,e){this.t="token",this.v=t,this.tk=e}KS.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return t===void 0&&(t=Il.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),c&&(o.rel=c),u&&Ji(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function jd(t,e){class n extends KS{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const u1=jd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),d1=jd("text"),F4=jd("nl"),Ha=jd("url",{isLink:!0,toHref(t){return t===void 0&&(t=Il.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Dl&&t[1].t===Cr}}),Ut=t=>new yt(t);function z4(t){let{groups:e}=t;const n=e.domain.concat([Eu,Nu,vr,Tu,Ou,_u,Mu,Au,Tn,Mg,Pu,ju,Ru,Du,On,$u,rl,Lu]),r=[Cu,Cr,Pg,Nn,jg,Iu,Rg,Dg,pu,mu,tl,nl,du,uu,fu,hu,gu,yu,vu,wu,xu,bu,ku,Su],s=[Eu,Cu,Nu,Tu,Ou,_u,Mu,Au,Tn,tl,nl,Pu,ju,Ru,Du,Iu,On,$u,rl,Lu],i=Ut(),o=A(i,rl);V(o,s,o),V(o,e.domain,o);const l=Ut(),a=Ut(),c=Ut();V(i,e.domain,l),V(i,e.scheme,a),V(i,e.slashscheme,c),V(l,s,o),V(l,e.domain,l);const u=A(l,vr);A(o,vr,u),A(a,vr,u),A(c,vr,u);const d=A(o,Nn);V(d,s,o),V(d,e.domain,o);const f=Ut();V(u,e.domain,f),V(f,e.domain,f);const h=A(f,Nn);V(h,e.domain,f);const m=Ut(u1);V(h,e.tld,m),V(h,e.utld,m),A(u,Dl,m);const g=A(f,Tn);V(g,e.domain,f),V(m,e.domain,f),A(m,Nn,h),A(m,Tn,g);const v=A(m,Cr);V(v,e.numeric,u1);const y=A(l,Tn),w=A(l,Nn);V(y,e.domain,l),V(w,s,o),V(w,e.domain,l);const b=Ut(Ha);V(w,e.tld,b),V(w,e.utld,b),V(b,e.domain,l),V(b,s,o),A(b,Nn,w),A(b,Tn,y),A(b,vr,u);const k=A(b,Cr),E=Ut(Ha);V(k,e.numeric,E);const S=Ut(Ha),C=Ut();V(S,n,S),V(S,r,C),V(C,n,S),V(C,r,C),A(b,On,S),A(E,On,S);const N=A(a,Cr),M=A(c,Cr),R=A(M,On),z=A(R,On);V(a,e.domain,l),A(a,Nn,w),A(a,Tn,y),V(c,e.domain,l),A(c,Nn,w),A(c,Tn,y),V(N,e.domain,S),A(N,On,S),V(z,e.domain,S),V(z,n,S),A(z,On,S);const ee=[[tl,nl],[uu,du],[fu,hu],[pu,mu],[gu,yu],[vu,wu],[xu,bu],[ku,Su]];for(let oe=0;oe<ee.length;oe++){const[xe,Ke]=ee[oe],rt=A(S,xe);A(C,xe,rt),A(rt,Ke,S);const Z=Ut(Ha);V(rt,n,Z);const P=Ut();V(rt,r),V(Z,n,Z),V(Z,r,P),V(P,n,Z),V(P,r,P),A(Z,Ke,S),A(P,Ke,S)}return A(i,Dl,b),A(i,Ag,F4),{start:i,tokens:qS}}function B4(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let l=t,a=null,c=null,u=0,d=null,f=-1;for(;s<r&&!(a=l.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=a||l.go(n[s].t));)a=null,l=c,l.accepts()?(f=0,d=l):f>=0&&f++,s++,u++;if(f<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(th(d1,e,o)),o=[]),s-=f,u-=f;const h=d.t,m=n.slice(s-u,s);i.push(th(h,e,m))}}return o.length>0&&i.push(th(d1,e,o)),i}function th(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const U4=typeof console<"u"&&console&&console.warn||(()=>{}),H4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",fe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function V4(){yt.groups={},fe.scanner=null,fe.parser=null,fe.tokenQueue=[],fe.pluginQueue=[],fe.customSchemes=[],fe.initialized=!1}function f1(t,e){if(e===void 0&&(e=!1),fe.initialized&&U4(`linkifyjs: already initialized - will not register custom scheme "${t}" ${H4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);fe.customSchemes.push([t,e])}function W4(){fe.scanner=I4(fe.customSchemes);for(let t=0;t<fe.tokenQueue.length;t++)fe.tokenQueue[t][1]({scanner:fe.scanner});fe.parser=z4(fe.scanner.tokens);for(let t=0;t<fe.pluginQueue.length;t++)fe.pluginQueue[t][1]({scanner:fe.scanner,parser:fe.parser});fe.initialized=!0}function JS(t){return fe.initialized||W4(),B4(fe.parser.start,t,L4(fe.scanner.start,t))}function GS(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Ig(n),s=JS(t),i=[];for(let o=0;o<s.length;o++){const l=s[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&i.push(l.toFormattedObject(r))}return i}function q4(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function K4(t){return new qe({key:new $t("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,l=v3(n.doc,[...e]);if(T3(l).forEach(({newRange:c})=>{const u=x3(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(y=>y!=="");if(h.length<=0)return!1;const m=h[h.length-1],g=d.pos+f.lastIndexOf(m);if(!m)return!1;const v=JS(m).map(y=>y.toObject(t.defaultProtocol));if(!q4(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).forEach(y=>{Ng(y.from,y.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function J4(t){return new qe({key:new $t("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=r.target;const l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(f=>f.nodeName==="A"))return!1;const a=IS(e.state,t.type.name),c=r.target,u=(s=c==null?void 0:c.href)!==null&&s!==void 0?s:a.href,d=(i=c==null?void 0:c.target)!==null&&i!==void 0?i:a.target;return c&&u?(window.open(u,d),!0):!1}}})}function G4(t){return new qe({key:new $t("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:s}=e,{selection:i}=s,{empty:o}=i;if(o)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=GS(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}const Q4=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function h1(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(Q4,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Y4=tr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(t=>{if(typeof t=="string"){f1(t);return}f1(t.scheme,t.optionalSlashes)})},onDestroy(){V4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!h1(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:t}){return h1(t.href,this.options.protocols)?["a",We(this.options.HTMLAttributes,t),0]:["a",We(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ls({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=GS(t).filter(s=>s.isLink&&n(s.value));r.length&&r.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(K4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&t.push(J4({type:this.type})),this.options.linkOnPaste&&t.push(G4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),X4=({editor:t})=>t?p.jsxs("div",{className:"border-b border-gray-200 p-2 flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-100 ${t.isActive("bold")?"bg-gray-100":""}`,children:p.jsx(O2,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-100 ${t.isActive("italic")?"bg-gray-100":""}`,children:p.jsx(F2,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-100 ${t.isActive("bulletList")?"bg-gray-100":""}`,children:p.jsx(V2,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-100 ${t.isActive("orderedList")?"bg-gray-100":""}`,children:p.jsx(H2,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>{const e=window.prompt("Enter URL");e&&t.chain().focus().setLink({href:e}).run()},className:`p-2 rounded hover:bg-gray-100 ${t.isActive("link")?"bg-gray-100":""}`,children:p.jsx(z2,{className:"h-4 w-4"})}),p.jsx("div",{className:"flex-1"}),p.jsx("button",{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50",children:p.jsx(rT,{className:"h-4 w-4"})}),p.jsx("button",{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50",children:p.jsx(X2,{className:"h-4 w-4"})})]}):null,Z4=({newsletter:t,onUpdate:e,isGenerating:n})=>{const r=E$({extensions:[T4,Y4.configure({openOnClick:!1})],content:`
      <h2>Introduction</h2>
      <p>${t.content.intro||""}</p>
      
      <h2>Featured Story</h2>
      ${t.content.featured_story?`
        <h3>${t.content.featured_story.title}</h3>
        <p>${t.content.featured_story.description||""}</p>
      `:""}
      
      <h2>News You Can't Miss</h2>
      ${t.content.news.map(s=>`
        <h3>${s.title}</h3>
        <p>${s.description||""}</p>
      `).join("")}
      
      <h2>Conclusion</h2>
      <p>${t.content.outro||""}</p>
    `,onUpdate:({editor:s})=>{e(s.getHTML())}});return T.useEffect(()=>{r&&t&&r.commands.setContent(`
        <h2>Introduction</h2>
        <p>${t.content.intro||""}</p>
        
        <h2>Featured Story</h2>
        ${t.content.featured_story?`
          <h3>${t.content.featured_story.title}</h3>
          <p>${t.content.featured_story.description||""}</p>
        `:""}
        
        <h2>News You Can't Miss</h2>
        ${t.content.news.map(s=>`
          <h3>${s.title}</h3>
          <p>${s.description||""}</p>
        `).join("")}
        
        <h2>Conclusion</h2>
        <p>${t.content.outro||""}</p>
      `)},[r,t]),p.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:n?p.jsxs("div",{className:"p-8 text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Generating newsletter content..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(X4,{editor:r}),p.jsx("div",{className:"p-4",children:p.jsx(p$,{editor:r})})]})})},p1=({id:t,title:e,description:n,children:r})=>{const{setNodeRef:s,isOver:i}=Qj({id:t});return p.jsxs("div",{ref:s,className:`p-4 rounded-lg border-2 ${i?"border-blue-500 bg-blue-50":"border-dashed border-gray-300"}`,children:[p.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e}),p.jsx("p",{className:"text-sm text-gray-500 mb-4",children:n}),r]})},m1=({article:t})=>p.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[p.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-800 px-2 py-0.5 rounded",children:t.source_name}),p.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.pubDate).toLocaleDateString()})]}),p.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:t.title}),t.description&&p.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e5=({newsletter:t,onUpdate:e})=>{const[n,r]=T.useState(!1),[s,i]=T.useState(!1),o=async()=>{if(!t.content.featured_story&&t.content.news.length===0){Ce.error("Add some articles before generating content");return}r(!0);try{const l=[t.content.featured_story,...t.content.news].filter(u=>u!==null);if(l.length===0)throw new Error("No articles selected");const a=await sR(l),c=await ik(t.id,{...t.content,...a});e(c),i(!0),Ce.success("Newsletter content generated successfully!")}catch(l){console.error("Error generating content:",l),Ce.error(l instanceof Error?l.message:"Failed to generate content")}finally{r(!1)}};return p.jsx("div",{className:"p-4 space-y-4",children:s?p.jsx(Z4,{newsletter:t,onUpdate:l=>{e({...t,content:{...t.content,htmlContent:l}})},isGenerating:n}):p.jsxs(p.Fragment,{children:[p.jsx(p1,{id:"featured_story",title:"Featured Story",description:"Drop your main article here",children:t.content.featured_story?p.jsx(m1,{article:t.content.featured_story}):p.jsx("div",{className:"text-center py-8 text-gray-500",children:"Drop an article here"})}),p.jsx(p1,{id:"news",title:"News You Can't Miss",description:"Drop up to 10 supporting articles",children:p.jsx("div",{className:"space-y-4",children:t.content.news.length>0?t.content.news.map(l=>p.jsx(m1,{article:l},l.article_id)):p.jsx("div",{className:"text-center py-8 text-gray-500",children:"Drop articles here"})})}),p.jsxs("button",{onClick:o,disabled:n,className:"w-full flex items-center justify-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[p.jsx(qx,{className:"h-5 w-5 mr-2"}),n?"Generating...":"Generate Newsletter"]})]})})},t5=["business","entertainment","environment","food","health","politics","science","sports","technology","top","world"],n5=[{code:"us",name:"United States"},{code:"gb",name:"United Kingdom"},{code:"ca",name:"Canada"},{code:"au",name:"Australia"},{code:"in",name:"India"},{code:"de",name:"Germany"},{code:"fr",name:"France"},{code:"ru",name:"Russia"},{code:"ua",name:"Ukraine"}],r5=({filters:t,onFilterChange:e})=>{const[n,r]=T.useState(!1),s=(i,o)=>{const l={...t,[i]:o};e(l)};return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>r(!n),className:`p-2 rounded-lg flex items-center gap-2 ${Object.keys(t).length>2?"bg-blue-50 text-blue-600 hover:bg-blue-100":"hover:bg-gray-100 text-gray-600"}`,children:[p.jsx(I2,{className:"h-5 w-5"}),p.jsx("span",{className:"text-sm",children:Object.keys(t).length>2?"Filters Active":"Filters"})]}),n&&p.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-10",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),p.jsx("select",{value:t.country||"us",onChange:i=>s("country",i.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:n5.map(i=>p.jsx("option",{value:i.code,children:i.name},i.code))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),p.jsxs("select",{value:t.category||"",onChange:i=>s("category",i.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[p.jsx("option",{value:"",children:"All Categories"}),t5.map(i=>p.jsx("option",{value:i,children:i.charAt(0).toUpperCase()+i.slice(1)},i))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),p.jsxs("select",{value:t.language||"en",onChange:i=>s("language",i.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 text-sm",children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"})]})]}),p.jsx("div",{className:"pt-2 border-t border-gray-200",children:p.jsx("button",{onClick:()=>{e({country:"us",language:"en"}),r(!1)},className:"text-sm text-red-600 hover:text-red-700",children:"Reset Filters"})})]})})]})},s5=()=>{Ws();const[t,e]=T.useState(null),[n,r]=T.useState({country:"us",language:"en"}),[s,i]=T.useState(""),o=async a=>{if(!t)return;const{active:c,over:u}=a;if(!u)return;const d=c.data.current,f=u.id;try{const h={...t.content};if(f==="featured_story")h.featured_story=d;else if(f==="news"){if(h.news.length>=10){Ce.error("Maximum of 10 articles reached");return}h.news.find(g=>g.article_id===d.article_id)||h.news.push(d)}const m=await ik(t.id,h);e(m),Ce.success("Article added to newsletter")}catch(h){console.error("Error updating newsletter:",h),Ce.error("Failed to add article")}},l=a=>{a.preventDefault(),r(c=>({...c,q:s}))};return p.jsxs("div",{className:"h-screen bg-gray-100 flex overflow-hidden",children:[p.jsx("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col sticky top-0 h-screen overflow-y-auto",children:p.jsx(eR,{selectedNewsletter:t,onSelectNewsletter:e})}),p.jsx("div",{className:"flex-1 flex overflow-hidden",children:p.jsxs(Vj,{onDragEnd:o,children:[p.jsxs("div",{className:"flex-1 border-r border-gray-200 bg-white overflow-y-auto",children:[p.jsxs("div",{className:"sticky top-0 bg-white z-10 p-4 border-b border-gray-200",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl font-bold",children:"Content Room"}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>r({...n}),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Refresh content",children:p.jsx(Vx,{className:"h-5 w-5 text-gray-600"})}),p.jsx(r5,{filters:n,onFilterChange:r})]})]}),p.jsxs("form",{onSubmit:l,className:"relative",children:[p.jsx(Wx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),p.jsx("input",{type:"text",value:s,onChange:a=>i(a.target.value),placeholder:"Search content...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),p.jsx(rR,{filters:n})]}),p.jsx("div",{className:"w-96 bg-white sticky top-0 h-screen overflow-y-auto",children:t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"sticky top-0 bg-white z-10 p-4 border-b border-gray-200",children:p.jsx("h2",{className:"text-xl font-bold",children:"Template"})}),p.jsx(e5,{newsletter:t,onUpdate:e})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[p.jsx(Vl,{className:"h-12 w-12 mb-4"}),p.jsx("p",{children:"Select or create a newsletter to start editing"})]})})]})})]})},i5=()=>{const t=nd(),{isAuthenticated:e}=Ws(),[n,r]=T.useState(null);return T.useEffect(()=>{e&&t("/dashboard")},[e,t]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:p.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Verification Failed"}),p.jsx("p",{className:"mt-2 text-gray-600",children:n}),p.jsx("button",{onClick:()=>t("/"),className:"mt-4 text-blue-600 hover:text-blue-500",children:"Return to Home"})]})})}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:p.jsx("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),p.jsx("h2",{className:"mt-4 text-xl font-bold text-gray-900",children:"Verifying your email..."}),p.jsx("p",{className:"mt-2 text-gray-600",children:"Please wait while we complete the verification process."})]})})})},g1=({children:t})=>{const{isAuthenticated:e,user:n}=Ws(),{profile:r,isLoading:s}=tg();return e?s?p.jsx("div",{children:"Loading..."}):!r&&location.pathname!=="/onboarding"?p.jsx(uf,{to:"/onboarding"}):r&&location.pathname==="/onboarding"?p.jsx(uf,{to:"/dashboard"}):p.jsx(p.Fragment,{children:t}):p.jsx(uf,{to:"/"})};function o5(){return p.jsx(S2,{children:p.jsx(XA,{children:p.jsxs(ZA,{children:[p.jsxs(x2,{children:[p.jsx(Ao,{path:"/",element:p.jsx(wP,{})}),p.jsx(Ao,{path:"/auth/callback",element:p.jsx(i5,{})}),p.jsx(Ao,{path:"/onboarding",element:p.jsx(g1,{children:p.jsx(_P,{})})}),p.jsx(Ao,{path:"/dashboard",element:p.jsx(g1,{children:p.jsx(s5,{})})})]}),p.jsx(V_,{position:"top-right"})]})})})}Mx(document.getElementById("root")).render(p.jsx(x.StrictMode,{children:p.jsx(o5,{})}));export{y1 as g};
